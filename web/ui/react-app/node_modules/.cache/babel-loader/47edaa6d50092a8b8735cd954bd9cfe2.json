{"ast":null,"code":"import _createForOfIteratorHelper from \"/usr/local/google/home/freinartz/repos/src/github.com/GoogleCloudPlatform/prometheus-clean/web/ui/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport { Transaction, EditorSelection } from '@codemirror/state';\nimport { Text, findClusterBreak, countColumn, codePointSize, codePointAt } from '@codemirror/text';\nimport { Direction } from '@codemirror/view';\nimport { matchBrackets } from '@codemirror/matchbrackets';\nimport { IndentContext, getIndentation, indentString, indentUnit, getIndentUnit, syntaxTree } from '@codemirror/language';\nimport { NodeProp } from 'lezer-tree';\n\nfunction updateSel(sel, by) {\n  return EditorSelection.create(sel.ranges.map(by), sel.mainIndex);\n}\n\nfunction setSel(state, selection) {\n  return state.update({\n    selection: selection,\n    scrollIntoView: true,\n    annotations: Transaction.userEvent.of(\"keyboardselection\")\n  });\n}\n\nfunction moveSel(_ref, how) {\n  var state = _ref.state,\n      dispatch = _ref.dispatch;\n  var selection = updateSel(state.selection, how);\n  if (selection.eq(state.selection)) return false;\n  dispatch(setSel(state, selection));\n  return true;\n}\n\nfunction rangeEnd(range, forward) {\n  return EditorSelection.cursor(forward ? range.to : range.from);\n}\n\nfunction cursorByChar(view, forward) {\n  return moveSel(view, function (range) {\n    return range.empty ? view.moveByChar(range, forward) : rangeEnd(range, forward);\n  });\n}\n/**\nMove the selection one character to the left (which is backward in\nleft-to-right text, forward in right-to-left text).\n*/\n\n\nvar cursorCharLeft = function cursorCharLeft(view) {\n  return cursorByChar(view, view.textDirection != Direction.LTR);\n};\n/**\nMove the selection one character to the right.\n*/\n\n\nvar cursorCharRight = function cursorCharRight(view) {\n  return cursorByChar(view, view.textDirection == Direction.LTR);\n};\n/**\nMove the selection one character forward.\n*/\n\n\nvar cursorCharForward = function cursorCharForward(view) {\n  return cursorByChar(view, true);\n};\n/**\nMove the selection one character backward.\n*/\n\n\nvar cursorCharBackward = function cursorCharBackward(view) {\n  return cursorByChar(view, false);\n};\n\nfunction cursorByGroup(view, forward) {\n  return moveSel(view, function (range) {\n    return range.empty ? view.moveByGroup(range, forward) : rangeEnd(range, forward);\n  });\n}\n/**\nMove the selection across one group of word or non-word (but also\nnon-space) characters.\n*/\n\n\nvar cursorGroupLeft = function cursorGroupLeft(view) {\n  return cursorByGroup(view, view.textDirection != Direction.LTR);\n};\n/**\nMove the selection one group to the right.\n*/\n\n\nvar cursorGroupRight = function cursorGroupRight(view) {\n  return cursorByGroup(view, view.textDirection == Direction.LTR);\n};\n/**\nMove the selection one group forward.\n*/\n\n\nvar cursorGroupForward = function cursorGroupForward(view) {\n  return cursorByGroup(view, true);\n};\n/**\nMove the selection one group backward.\n*/\n\n\nvar cursorGroupBackward = function cursorGroupBackward(view) {\n  return cursorByGroup(view, false);\n};\n\nfunction interestingNode(state, node, bracketProp) {\n  if (node.type.prop(bracketProp)) return true;\n  var len = node.to - node.from;\n  return len && (len > 2 || /[^\\s,.;:]/.test(state.sliceDoc(node.from, node.to))) || node.firstChild;\n}\n\nfunction moveBySyntax(state, start, forward) {\n  var pos = syntaxTree(state).resolve(start.head);\n  var bracketProp = forward ? NodeProp.closedBy : NodeProp.openedBy; // Scan forward through child nodes to see if there's an interesting\n  // node ahead.\n\n  for (var at = start.head;;) {\n    var next = forward ? pos.childAfter(at) : pos.childBefore(at);\n    if (!next) break;\n    if (interestingNode(state, next, bracketProp)) pos = next;else at = forward ? next.to : next.from;\n  }\n\n  var bracket = pos.type.prop(bracketProp),\n      match,\n      newPos;\n  if (bracket && (match = forward ? matchBrackets(state, pos.from, 1) : matchBrackets(state, pos.to, -1)) && match.matched) newPos = forward ? match.end.to : match.end.from;else newPos = forward ? pos.to : pos.from;\n  return EditorSelection.cursor(newPos, forward ? -1 : 1);\n}\n/**\nMove the cursor over the next syntactic element to the left.\n*/\n\n\nvar cursorSyntaxLeft = function cursorSyntaxLeft(view) {\n  return moveSel(view, function (range) {\n    return moveBySyntax(view.state, range, view.textDirection != Direction.LTR);\n  });\n};\n/**\nMove the cursor over the next syntactic element to the right.\n*/\n\n\nvar cursorSyntaxRight = function cursorSyntaxRight(view) {\n  return moveSel(view, function (range) {\n    return moveBySyntax(view.state, range, view.textDirection == Direction.LTR);\n  });\n};\n\nfunction cursorByLine(view, forward) {\n  return moveSel(view, function (range) {\n    return range.empty ? view.moveVertically(range, forward) : rangeEnd(range, forward);\n  });\n}\n/**\nMove the selection one line up.\n*/\n\n\nvar cursorLineUp = function cursorLineUp(view) {\n  return cursorByLine(view, false);\n};\n/**\nMove the selection one line down.\n*/\n\n\nvar cursorLineDown = function cursorLineDown(view) {\n  return cursorByLine(view, true);\n};\n\nfunction cursorByPage(view, forward) {\n  return moveSel(view, function (range) {\n    return range.empty ? view.moveVertically(range, forward, view.dom.clientHeight) : rangeEnd(range, forward);\n  });\n}\n/**\nMove the selection one page up.\n*/\n\n\nvar cursorPageUp = function cursorPageUp(view) {\n  return cursorByPage(view, false);\n};\n/**\nMove the selection one page down.\n*/\n\n\nvar cursorPageDown = function cursorPageDown(view) {\n  return cursorByPage(view, true);\n};\n\nfunction moveByLineBoundary(view, start, forward) {\n  var line = view.visualLineAt(start.head),\n      moved = view.moveToLineBoundary(start, forward);\n  if (moved.head == start.head && moved.head != (forward ? line.to : line.from)) moved = view.moveToLineBoundary(start, forward, false);\n\n  if (!forward && moved.head == line.from && line.length) {\n    var space = /^\\s*/.exec(view.state.sliceDoc(line.from, Math.min(line.from + 100, line.to)))[0].length;\n    if (space && start.head != line.from + space) moved = EditorSelection.cursor(line.from + space);\n  }\n\n  return moved;\n}\n/**\nMove the selection to the next line wrap point, or to the end of\nthe line if there isn't one left on this line.\n*/\n\n\nvar cursorLineBoundaryForward = function cursorLineBoundaryForward(view) {\n  return moveSel(view, function (range) {\n    return moveByLineBoundary(view, range, true);\n  });\n};\n/**\nMove the selection to previous line wrap point, or failing that to\nthe start of the line. If the line is indented, and the cursor\nisn't already at the end of the indentation, this will move to the\nend of the indentation instead of the start of the line.\n*/\n\n\nvar cursorLineBoundaryBackward = function cursorLineBoundaryBackward(view) {\n  return moveSel(view, function (range) {\n    return moveByLineBoundary(view, range, false);\n  });\n};\n/**\nMove the selection to the start of the line.\n*/\n\n\nvar cursorLineStart = function cursorLineStart(view) {\n  return moveSel(view, function (range) {\n    return EditorSelection.cursor(view.visualLineAt(range.head).from, 1);\n  });\n};\n/**\nMove the selection to the end of the line.\n*/\n\n\nvar cursorLineEnd = function cursorLineEnd(view) {\n  return moveSel(view, function (range) {\n    return EditorSelection.cursor(view.visualLineAt(range.head).to, -1);\n  });\n};\n\nfunction toMatchingBracket(state, dispatch, extend) {\n  var found = false,\n      selection = updateSel(state.selection, function (range) {\n    var matching = matchBrackets(state, range.head, -1) || matchBrackets(state, range.head, 1) || range.head > 0 && matchBrackets(state, range.head - 1, 1) || range.head < state.doc.length && matchBrackets(state, range.head + 1, -1);\n    if (!matching || !matching.end) return range;\n    found = true;\n    var head = matching.start.from == range.head ? matching.end.to : matching.end.from;\n    return extend ? EditorSelection.range(range.anchor, head) : EditorSelection.cursor(head);\n  });\n  if (!found) return false;\n  dispatch(setSel(state, selection));\n  return true;\n}\n/**\nMove the selection to the bracket matching the one it is currently\non, if any.\n*/\n\n\nvar cursorMatchingBracket = function cursorMatchingBracket(_ref2) {\n  var state = _ref2.state,\n      dispatch = _ref2.dispatch;\n  return toMatchingBracket(state, dispatch, false);\n};\n/**\nExtend the selection to the bracket matching the one the selection\nhead is currently on, if any.\n*/\n\n\nvar selectMatchingBracket = function selectMatchingBracket(_ref3) {\n  var state = _ref3.state,\n      dispatch = _ref3.dispatch;\n  return toMatchingBracket(state, dispatch, true);\n};\n\nfunction extendSel(view, how) {\n  var selection = updateSel(view.state.selection, function (range) {\n    var head = how(range);\n    return EditorSelection.range(range.anchor, head.head, head.goalColumn);\n  });\n  if (selection.eq(view.state.selection)) return false;\n  view.dispatch(setSel(view.state, selection));\n  return true;\n}\n\nfunction selectByChar(view, forward) {\n  return extendSel(view, function (range) {\n    return view.moveByChar(range, forward);\n  });\n}\n/**\nMove the selection head one character to the left, while leaving\nthe anchor in place.\n*/\n\n\nvar selectCharLeft = function selectCharLeft(view) {\n  return selectByChar(view, view.textDirection != Direction.LTR);\n};\n/**\nMove the selection head one character to the right.\n*/\n\n\nvar selectCharRight = function selectCharRight(view) {\n  return selectByChar(view, view.textDirection == Direction.LTR);\n};\n/**\nMove the selection head one character forward.\n*/\n\n\nvar selectCharForward = function selectCharForward(view) {\n  return selectByChar(view, true);\n};\n/**\nMove the selection head one character backward.\n*/\n\n\nvar selectCharBackward = function selectCharBackward(view) {\n  return selectByChar(view, false);\n};\n\nfunction selectByGroup(view, forward) {\n  return extendSel(view, function (range) {\n    return view.moveByGroup(range, forward);\n  });\n}\n/**\nMove the selection head one [group](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) to\nthe left.\n*/\n\n\nvar selectGroupLeft = function selectGroupLeft(view) {\n  return selectByGroup(view, view.textDirection != Direction.LTR);\n};\n/**\nMove the selection head one group to the right.\n*/\n\n\nvar selectGroupRight = function selectGroupRight(view) {\n  return selectByGroup(view, view.textDirection == Direction.LTR);\n};\n/**\nMove the selection head one group forward.\n*/\n\n\nvar selectGroupForward = function selectGroupForward(view) {\n  return selectByGroup(view, true);\n};\n/**\nMove the selection head one group backward.\n*/\n\n\nvar selectGroupBackward = function selectGroupBackward(view) {\n  return selectByGroup(view, false);\n};\n/**\nMove the selection head over the next syntactic element to the left.\n*/\n\n\nvar selectSyntaxLeft = function selectSyntaxLeft(view) {\n  return extendSel(view, function (range) {\n    return moveBySyntax(view.state, range, view.textDirection != Direction.LTR);\n  });\n};\n/**\nMove the selection head over the next syntactic element to the right.\n*/\n\n\nvar selectSyntaxRight = function selectSyntaxRight(view) {\n  return extendSel(view, function (range) {\n    return moveBySyntax(view.state, range, view.textDirection == Direction.LTR);\n  });\n};\n\nfunction selectByLine(view, forward) {\n  return extendSel(view, function (range) {\n    return view.moveVertically(range, forward);\n  });\n}\n/**\nMove the selection head one line up.\n*/\n\n\nvar selectLineUp = function selectLineUp(view) {\n  return selectByLine(view, false);\n};\n/**\nMove the selection head one line down.\n*/\n\n\nvar selectLineDown = function selectLineDown(view) {\n  return selectByLine(view, true);\n};\n\nfunction selectByPage(view, forward) {\n  return extendSel(view, function (range) {\n    return view.moveVertically(range, forward, view.dom.clientHeight);\n  });\n}\n/**\nMove the selection head one page up.\n*/\n\n\nvar selectPageUp = function selectPageUp(view) {\n  return selectByPage(view, false);\n};\n/**\nMove the selection head one page down.\n*/\n\n\nvar selectPageDown = function selectPageDown(view) {\n  return selectByPage(view, true);\n};\n/**\nMove the selection head to the next line boundary.\n*/\n\n\nvar selectLineBoundaryForward = function selectLineBoundaryForward(view) {\n  return extendSel(view, function (range) {\n    return moveByLineBoundary(view, range, true);\n  });\n};\n/**\nMove the selection head to the previous line boundary.\n*/\n\n\nvar selectLineBoundaryBackward = function selectLineBoundaryBackward(view) {\n  return extendSel(view, function (range) {\n    return moveByLineBoundary(view, range, false);\n  });\n};\n/**\nMove the selection head to the start of the line.\n*/\n\n\nvar selectLineStart = function selectLineStart(view) {\n  return extendSel(view, function (range) {\n    return EditorSelection.cursor(view.visualLineAt(range.head).from);\n  });\n};\n/**\nMove the selection head to the end of the line.\n*/\n\n\nvar selectLineEnd = function selectLineEnd(view) {\n  return extendSel(view, function (range) {\n    return EditorSelection.cursor(view.visualLineAt(range.head).to);\n  });\n};\n/**\nMove the selection to the start of the document.\n*/\n\n\nvar cursorDocStart = function cursorDocStart(_ref4) {\n  var state = _ref4.state,\n      dispatch = _ref4.dispatch;\n  dispatch(setSel(state, {\n    anchor: 0\n  }));\n  return true;\n};\n/**\nMove the selection to the end of the document.\n*/\n\n\nvar cursorDocEnd = function cursorDocEnd(_ref5) {\n  var state = _ref5.state,\n      dispatch = _ref5.dispatch;\n  dispatch(setSel(state, {\n    anchor: state.doc.length\n  }));\n  return true;\n};\n/**\nMove the selection head to the start of the document.\n*/\n\n\nvar selectDocStart = function selectDocStart(_ref6) {\n  var state = _ref6.state,\n      dispatch = _ref6.dispatch;\n  dispatch(setSel(state, {\n    anchor: state.selection.main.anchor,\n    head: 0\n  }));\n  return true;\n};\n/**\nMove the selection head to the end of the document.\n*/\n\n\nvar selectDocEnd = function selectDocEnd(_ref7) {\n  var state = _ref7.state,\n      dispatch = _ref7.dispatch;\n  dispatch(setSel(state, {\n    anchor: state.selection.main.anchor,\n    head: state.doc.length\n  }));\n  return true;\n};\n/**\nSelect the entire document.\n*/\n\n\nvar selectAll = function selectAll(_ref8) {\n  var state = _ref8.state,\n      dispatch = _ref8.dispatch;\n  dispatch(state.update({\n    selection: {\n      anchor: 0,\n      head: state.doc.length\n    },\n    annotations: Transaction.userEvent.of(\"keyboardselection\")\n  }));\n  return true;\n};\n/**\nExpand the selection to cover entire lines.\n*/\n\n\nvar selectLine = function selectLine(_ref9) {\n  var state = _ref9.state,\n      dispatch = _ref9.dispatch;\n  var ranges = selectedLineBlocks(state).map(function (_ref10) {\n    var from = _ref10.from,\n        to = _ref10.to;\n    return EditorSelection.range(from, Math.min(to + 1, state.doc.length));\n  });\n  dispatch(state.update({\n    selection: EditorSelection.create(ranges),\n    annotations: Transaction.userEvent.of(\"keyboardselection\")\n  }));\n  return true;\n};\n/**\nSelect the next syntactic construct that is larger than the\nselection. Note that this will only work insofar as the language\n[provider](https://codemirror.net/6/docs/ref/#language.language) you use builds up a full\nsyntax tree.\n*/\n\n\nvar selectParentSyntax = function selectParentSyntax(_ref11) {\n  var state = _ref11.state,\n      dispatch = _ref11.dispatch;\n  var selection = updateSel(state.selection, function (range) {\n    var _a;\n\n    var context = syntaxTree(state).resolve(range.head, 1);\n\n    while (!(context.from < range.from && context.to >= range.to || context.to > range.to && context.from <= range.from || !((_a = context.parent) === null || _a === void 0 ? void 0 : _a.parent))) {\n      context = context.parent;\n    }\n\n    return EditorSelection.range(context.to, context.from);\n  });\n  dispatch(setSel(state, selection));\n  return true;\n};\n/**\nSimplify the current selection. When multiple ranges are selected,\nreduce it to its main range. Otherwise, if the selection is\nnon-empty, convert it to a cursor selection.\n*/\n\n\nvar simplifySelection = function simplifySelection(_ref12) {\n  var state = _ref12.state,\n      dispatch = _ref12.dispatch;\n  var cur = state.selection,\n      selection = null;\n  if (cur.ranges.length > 1) selection = EditorSelection.create([cur.main]);else if (!cur.main.empty) selection = EditorSelection.create([EditorSelection.cursor(cur.main.head)]);\n  if (!selection) return false;\n  dispatch(setSel(state, selection));\n  return true;\n};\n\nfunction deleteBy(_ref13, by) {\n  var state = _ref13.state,\n      dispatch = _ref13.dispatch;\n  var changes = state.changeByRange(function (range) {\n    var from = range.from,\n        to = range.to;\n\n    if (from == to) {\n      var towards = by(from);\n      from = Math.min(from, towards);\n      to = Math.max(to, towards);\n    }\n\n    return from == to ? {\n      range: range\n    } : {\n      changes: {\n        from: from,\n        to: to\n      },\n      range: EditorSelection.cursor(from)\n    };\n  });\n  if (changes.changes.empty) return false;\n  dispatch(state.update(changes, {\n    scrollIntoView: true,\n    annotations: Transaction.userEvent.of(\"delete\")\n  }));\n  return true;\n}\n\nvar deleteByChar = function deleteByChar(target, forward, codePoint) {\n  return deleteBy(target, function (pos) {\n    var state = target.state,\n        line = state.doc.lineAt(pos),\n        before;\n\n    if (!forward && pos > line.from && pos < line.from + 200 && !/[^ \\t]/.test(before = line.text.slice(0, pos - line.from))) {\n      if (before[before.length - 1] == \"\\t\") return pos - 1;\n      var col = countColumn(before, 0, state.tabSize),\n          drop = col % getIndentUnit(state) || getIndentUnit(state);\n\n      for (var i = 0; i < drop && before[before.length - 1 - i] == \" \"; i++) {\n        pos--;\n      }\n\n      return pos;\n    }\n\n    var targetPos;\n\n    if (codePoint) {\n      var next = line.text.slice(pos - line.from + (forward ? 0 : -2), pos - line.from + (forward ? 2 : 0));\n      var size = next ? codePointSize(codePointAt(next, 0)) : 1;\n      targetPos = forward ? Math.min(state.doc.length, pos + size) : Math.max(0, pos - size);\n    } else {\n      targetPos = findClusterBreak(line.text, pos - line.from, forward) + line.from;\n    }\n\n    if (targetPos == pos && line.number != (forward ? state.doc.lines : 1)) targetPos += forward ? 1 : -1;\n    return targetPos;\n  });\n};\n/**\nDelete the selection, or, for cursor selections, the code point\nbefore the cursor.\n*/\n\n\nvar deleteCodePointBackward = function deleteCodePointBackward(view) {\n  return deleteByChar(view, false, true);\n};\n/**\nDelete the selection, or, for cursor selections, the code point\nafter the cursor.\n*/\n\n\nvar deleteCodePointForward = function deleteCodePointForward(view) {\n  return deleteByChar(view, true, true);\n};\n/**\nDelete the selection, or, for cursor selections, the character\nbefore the cursor.\n*/\n\n\nvar deleteCharBackward = function deleteCharBackward(view) {\n  return deleteByChar(view, false, false);\n};\n/**\nDelete the selection or the character after the cursor.\n*/\n\n\nvar deleteCharForward = function deleteCharForward(view) {\n  return deleteByChar(view, true, false);\n};\n\nvar deleteByGroup = function deleteByGroup(target, forward) {\n  return deleteBy(target, function (start) {\n    var pos = start,\n        state = target.state,\n        line = state.doc.lineAt(pos);\n    var categorize = state.charCategorizer(pos);\n\n    for (var cat = null;;) {\n      if (pos == (forward ? line.to : line.from)) {\n        if (pos == start && line.number != (forward ? state.doc.lines : 1)) pos += forward ? 1 : -1;\n        break;\n      }\n\n      var next = findClusterBreak(line.text, pos - line.from, forward) + line.from;\n      var nextChar = line.text.slice(Math.min(pos, next) - line.from, Math.max(pos, next) - line.from);\n      var nextCat = categorize(nextChar);\n      if (cat != null && nextCat != cat) break;\n      if (nextChar != \" \" || pos != start) cat = nextCat;\n      pos = next;\n    }\n\n    return pos;\n  });\n};\n/**\nDelete the selection or backward until the end of the next\n[group](https://codemirror.net/6/docs/ref/#view.EditorView.moveByGroup), only skipping groups of\nwhitespace when they consist of a single space.\n*/\n\n\nvar deleteGroupBackward = function deleteGroupBackward(target) {\n  return deleteByGroup(target, false);\n};\n/**\nDelete the selection or forward until the end of the next group.\n*/\n\n\nvar deleteGroupForward = function deleteGroupForward(target) {\n  return deleteByGroup(target, true);\n};\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe end of the line. If the cursor is directly at the end of the\nline, delete the line break after it.\n*/\n\n\nvar deleteToLineEnd = function deleteToLineEnd(view) {\n  return deleteBy(view, function (pos) {\n    var lineEnd = view.visualLineAt(pos).to;\n    if (pos < lineEnd) return lineEnd;\n    return Math.min(view.state.doc.length, pos + 1);\n  });\n};\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe start of the line. If the cursor is directly at the start of the\nline, delete the line break before it.\n*/\n\n\nvar deleteToLineStart = function deleteToLineStart(view) {\n  return deleteBy(view, function (pos) {\n    var lineStart = view.visualLineAt(pos).from;\n    if (pos > lineStart) return lineStart;\n    return Math.max(0, pos - 1);\n  });\n};\n/**\nDelete all whitespace directly before a line end from the\ndocument.\n*/\n\n\nvar deleteTrailingWhitespace = function deleteTrailingWhitespace(_ref14) {\n  var state = _ref14.state,\n      dispatch = _ref14.dispatch;\n  var changes = [];\n\n  for (var pos = 0, prev = \"\", iter = state.doc.iter();;) {\n    iter.next();\n\n    if (iter.lineBreak || iter.done) {\n      var trailing = prev.search(/\\s+$/);\n      if (trailing > -1) changes.push({\n        from: pos - (prev.length - trailing),\n        to: pos\n      });\n      if (iter.done) break;\n      prev = \"\";\n    } else {\n      prev = iter.value;\n    }\n\n    pos += iter.value.length;\n  }\n\n  if (!changes.length) return false;\n  dispatch(state.update({\n    changes: changes\n  }));\n  return true;\n};\n/**\nReplace each selection range with a line break, leaving the cursor\non the line before the break.\n*/\n\n\nvar splitLine = function splitLine(_ref15) {\n  var state = _ref15.state,\n      dispatch = _ref15.dispatch;\n  var changes = state.changeByRange(function (range) {\n    return {\n      changes: {\n        from: range.from,\n        to: range.to,\n        insert: Text.of([\"\", \"\"])\n      },\n      range: EditorSelection.cursor(range.from)\n    };\n  });\n  dispatch(state.update(changes, {\n    scrollIntoView: true,\n    annotations: Transaction.userEvent.of(\"input\")\n  }));\n  return true;\n};\n/**\nFlip the characters before and after the cursor(s).\n*/\n\n\nvar transposeChars = function transposeChars(_ref16) {\n  var state = _ref16.state,\n      dispatch = _ref16.dispatch;\n  var changes = state.changeByRange(function (range) {\n    if (!range.empty || range.from == 0 || range.from == state.doc.length) return {\n      range: range\n    };\n    var pos = range.from,\n        line = state.doc.lineAt(pos);\n    var from = pos == line.from ? pos - 1 : findClusterBreak(line.text, pos - line.from, false) + line.from;\n    var to = pos == line.to ? pos + 1 : findClusterBreak(line.text, pos - line.from, true) + line.from;\n    return {\n      changes: {\n        from: from,\n        to: to,\n        insert: state.doc.slice(pos, to).append(state.doc.slice(from, pos))\n      },\n      range: EditorSelection.cursor(to)\n    };\n  });\n  if (changes.changes.empty) return false;\n  dispatch(state.update(changes, {\n    scrollIntoView: true\n  }));\n  return true;\n};\n\nfunction selectedLineBlocks(state) {\n  var blocks = [],\n      upto = -1;\n\n  var _iterator = _createForOfIteratorHelper(state.selection.ranges),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var range = _step.value;\n      var startLine = state.doc.lineAt(range.from),\n          endLine = state.doc.lineAt(range.to);\n      if (upto == startLine.number) blocks[blocks.length - 1].to = endLine.to;else blocks.push({\n        from: startLine.from,\n        to: endLine.to\n      });\n      upto = endLine.number;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return blocks;\n}\n\nfunction moveLine(state, dispatch, forward) {\n  var changes = [];\n\n  var _iterator2 = _createForOfIteratorHelper(selectedLineBlocks(state)),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var block = _step2.value;\n      if (forward ? block.to == state.doc.length : block.from == 0) continue;\n      var nextLine = state.doc.lineAt(forward ? block.to + 1 : block.from - 1);\n      if (forward) changes.push({\n        from: block.to,\n        to: nextLine.to\n      }, {\n        from: block.from,\n        insert: nextLine.text + state.lineBreak\n      });else changes.push({\n        from: nextLine.from,\n        to: block.from\n      }, {\n        from: block.to,\n        insert: state.lineBreak + nextLine.text\n      });\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  if (!changes.length) return false;\n  dispatch(state.update({\n    changes: changes,\n    scrollIntoView: true\n  }));\n  return true;\n}\n/**\nMove the selected lines up one line.\n*/\n\n\nvar moveLineUp = function moveLineUp(_ref17) {\n  var state = _ref17.state,\n      dispatch = _ref17.dispatch;\n  return moveLine(state, dispatch, false);\n};\n/**\nMove the selected lines down one line.\n*/\n\n\nvar moveLineDown = function moveLineDown(_ref18) {\n  var state = _ref18.state,\n      dispatch = _ref18.dispatch;\n  return moveLine(state, dispatch, true);\n};\n\nfunction copyLine(state, dispatch, forward) {\n  var changes = [];\n\n  var _iterator3 = _createForOfIteratorHelper(selectedLineBlocks(state)),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var block = _step3.value;\n      if (forward) changes.push({\n        from: block.from,\n        insert: state.doc.slice(block.from, block.to) + state.lineBreak\n      });else changes.push({\n        from: block.to,\n        insert: state.lineBreak + state.doc.slice(block.from, block.to)\n      });\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  dispatch(state.update({\n    changes: changes,\n    scrollIntoView: true\n  }));\n  return true;\n}\n/**\nCreate a copy of the selected lines. Keep the selection in the top copy.\n*/\n\n\nvar copyLineUp = function copyLineUp(_ref19) {\n  var state = _ref19.state,\n      dispatch = _ref19.dispatch;\n  return copyLine(state, dispatch, false);\n};\n/**\nCreate a copy of the selected lines. Keep the selection in the bottom copy.\n*/\n\n\nvar copyLineDown = function copyLineDown(_ref20) {\n  var state = _ref20.state,\n      dispatch = _ref20.dispatch;\n  return copyLine(state, dispatch, true);\n};\n/**\nDelete selected lines.\n*/\n\n\nvar deleteLine = function deleteLine(view) {\n  var state = view.state,\n      changes = state.changes(selectedLineBlocks(state).map(function (_ref21) {\n    var from = _ref21.from,\n        to = _ref21.to;\n    if (from > 0) from--;else if (to < state.doc.length) to++;\n    return {\n      from: from,\n      to: to\n    };\n  }));\n  var selection = updateSel(state.selection, function (range) {\n    return view.moveVertically(range, true);\n  }).map(changes);\n  view.dispatch({\n    changes: changes,\n    selection: selection,\n    scrollIntoView: true\n  });\n  return true;\n};\n/**\nReplace the selection with a newline.\n*/\n\n\nvar insertNewline = function insertNewline(_ref22) {\n  var state = _ref22.state,\n      dispatch = _ref22.dispatch;\n  dispatch(state.update(state.replaceSelection(state.lineBreak), {\n    scrollIntoView: true\n  }));\n  return true;\n};\n\nfunction isBetweenBrackets(state, pos) {\n  if (/\\(\\)|\\[\\]|\\{\\}/.test(state.sliceDoc(pos - 1, pos + 1))) return {\n    from: pos,\n    to: pos\n  };\n  var context = syntaxTree(state).resolve(pos);\n  var before = context.childBefore(pos),\n      after = context.childAfter(pos),\n      closedBy;\n  if (before && after && before.to <= pos && after.from >= pos && (closedBy = before.type.prop(NodeProp.closedBy)) && closedBy.indexOf(after.name) > -1 && state.doc.lineAt(before.to).from == state.doc.lineAt(after.from).from) return {\n    from: before.to,\n    to: after.from\n  };\n  return null;\n}\n/**\nReplace the selection with a newline and indent the newly created\nline(s). If the current line consists only of whitespace, this\nwill also delete that whitespace. When the cursor is between\nmatching brackets, an additional newline will be inserted after\nthe cursor.\n*/\n\n\nvar insertNewlineAndIndent = function insertNewlineAndIndent(_ref23) {\n  var state = _ref23.state,\n      dispatch = _ref23.dispatch;\n  var changes = state.changeByRange(function (_ref24) {\n    var from = _ref24.from,\n        to = _ref24.to;\n    var explode = from == to && isBetweenBrackets(state, from);\n    var cx = new IndentContext(state, {\n      simulateBreak: from,\n      simulateDoubleBreak: !!explode\n    });\n    var indent = getIndentation(cx, from);\n    if (indent == null) indent = /^\\s*/.exec(state.doc.lineAt(from).text)[0].length;\n    var line = state.doc.lineAt(from);\n\n    while (to < line.to && /\\s/.test(line.text.slice(to - line.from, to + 1 - line.from))) {\n      to++;\n    }\n\n    if (explode) {\n      from = explode.from;\n      to = explode.to;\n    } else if (from > line.from && from < line.from + 100 && !/\\S/.test(line.text.slice(0, from))) from = line.from;\n\n    var insert = [\"\", indentString(state, indent)];\n    if (explode) insert.push(indentString(state, cx.lineIndent(line)));\n    return {\n      changes: {\n        from: from,\n        to: to,\n        insert: Text.of(insert)\n      },\n      range: EditorSelection.cursor(from + 1 + insert[1].length)\n    };\n  });\n  dispatch(state.update(changes, {\n    scrollIntoView: true\n  }));\n  return true;\n};\n\nfunction changeBySelectedLine(state, f) {\n  var atLine = -1;\n  return state.changeByRange(function (range) {\n    var changes = [];\n\n    for (var pos = range.from; pos <= range.to;) {\n      var line = state.doc.lineAt(pos);\n\n      if (line.number > atLine && (range.empty || range.to > line.from)) {\n        f(line, changes, range);\n        atLine = line.number;\n      }\n\n      pos = line.to + 1;\n    }\n\n    var changeSet = state.changes(changes);\n    return {\n      changes: changes,\n      range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1))\n    };\n  });\n}\n/**\nAuto-indent the selected lines. This uses the [indentation service\nfacet](https://codemirror.net/6/docs/ref/#language.indentService) as source for auto-indent\ninformation.\n*/\n\n\nvar indentSelection = function indentSelection(_ref25) {\n  var state = _ref25.state,\n      dispatch = _ref25.dispatch;\n  var updated = Object.create(null);\n  var context = new IndentContext(state, {\n    overrideIndentation: function overrideIndentation(start) {\n      var found = updated[start];\n      return found == null ? -1 : found;\n    }\n  });\n  var changes = changeBySelectedLine(state, function (line, changes, range) {\n    var indent = getIndentation(context, line.from);\n    if (indent == null) return;\n    var cur = /^\\s*/.exec(line.text)[0];\n    var norm = indentString(state, indent);\n\n    if (cur != norm || range.from < line.from + cur.length) {\n      updated[line.from] = indent;\n      changes.push({\n        from: line.from,\n        to: line.from + cur.length,\n        insert: norm\n      });\n    }\n  });\n  if (!changes.changes.empty) dispatch(state.update(changes));\n  return true;\n};\n/**\nAdd a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation to all selected\nlines.\n*/\n\n\nvar indentMore = function indentMore(_ref26) {\n  var state = _ref26.state,\n      dispatch = _ref26.dispatch;\n  dispatch(state.update(changeBySelectedLine(state, function (line, changes) {\n    changes.push({\n      from: line.from,\n      insert: state.facet(indentUnit)\n    });\n  })));\n  return true;\n};\n/**\nRemove a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation from all\nselected lines.\n*/\n\n\nvar indentLess = function indentLess(_ref27) {\n  var state = _ref27.state,\n      dispatch = _ref27.dispatch;\n  dispatch(state.update(changeBySelectedLine(state, function (line, changes) {\n    var space = /^\\s*/.exec(line.text)[0];\n    if (!space) return;\n    var col = countColumn(space, 0, state.tabSize),\n        keep = 0;\n    var insert = indentString(state, Math.max(0, col - getIndentUnit(state)));\n\n    while (keep < space.length && keep < insert.length && space.charCodeAt(keep) == insert.charCodeAt(keep)) {\n      keep++;\n    }\n\n    changes.push({\n      from: line.from + keep,\n      to: line.from + space.length,\n      insert: insert.slice(keep)\n    });\n  })));\n  return true;\n};\n/**\nInsert a tab character at the cursor or, if something is selected,\nuse [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) to indent the entire\nselection.\n*/\n\n\nvar insertTab = function insertTab(_ref28) {\n  var state = _ref28.state,\n      dispatch = _ref28.dispatch;\n  if (state.selection.ranges.some(function (r) {\n    return !r.empty;\n  })) return indentMore({\n    state: state,\n    dispatch: dispatch\n  });\n  dispatch(state.update(state.replaceSelection(\"\\t\"), {\n    scrollIntoView: true,\n    annotations: Transaction.userEvent.of(\"input\")\n  }));\n  return true;\n};\n/**\nArray of key bindings containing the Emacs-style bindings that are\navailable on macOS by default.\n\n - Ctrl-b: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - Ctrl-f: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-p: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - Ctrl-n: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Ctrl-a: [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Ctrl-e: [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - Ctrl-d: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-h: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Ctrl-k: [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd)\n - Alt-d: [`deleteGroupForward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupForward)\n - Ctrl-Alt-h: [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-o: [`splitLine`](https://codemirror.net/6/docs/ref/#commands.splitLine)\n - Ctrl-t: [`transposeChars`](https://codemirror.net/6/docs/ref/#commands.transposeChars)\n - Alt-f: [`cursorGroupForward`](https://codemirror.net/6/docs/ref/#commands.cursorGroupForward) ([`selectGroupForward`](https://codemirror.net/6/docs/ref/#commands.selectGroupForward) with Shift)\n - Alt-b: [`cursorGroupBackward`](https://codemirror.net/6/docs/ref/#commands.cursorGroupBackward) ([`selectGroupBackward`](https://codemirror.net/6/docs/ref/#commands.selectGroupBackward) with Shift)\n - Alt-<: [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart)\n - Alt->: [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd)\n - Ctrl-v: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown)\n - Alt-v: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp)\n*/\n\n\nvar emacsStyleKeymap = [{\n  key: \"Ctrl-b\",\n  run: cursorCharLeft,\n  shift: selectCharLeft,\n  preventDefault: true\n}, {\n  key: \"Ctrl-f\",\n  run: cursorCharRight,\n  shift: selectCharRight\n}, {\n  key: \"Ctrl-p\",\n  run: cursorLineUp,\n  shift: selectLineUp\n}, {\n  key: \"Ctrl-n\",\n  run: cursorLineDown,\n  shift: selectLineDown\n}, {\n  key: \"Ctrl-a\",\n  run: cursorLineStart,\n  shift: selectLineStart\n}, {\n  key: \"Ctrl-e\",\n  run: cursorLineEnd,\n  shift: selectLineEnd\n}, {\n  key: \"Ctrl-d\",\n  run: deleteCharForward\n}, {\n  key: \"Ctrl-h\",\n  run: deleteCharBackward\n}, {\n  key: \"Ctrl-k\",\n  run: deleteToLineEnd\n}, {\n  key: \"Alt-d\",\n  run: deleteGroupForward\n}, {\n  key: \"Ctrl-Alt-h\",\n  run: deleteGroupBackward\n}, {\n  key: \"Ctrl-o\",\n  run: splitLine\n}, {\n  key: \"Ctrl-t\",\n  run: transposeChars\n}, {\n  key: \"Alt-f\",\n  run: cursorGroupForward,\n  shift: selectGroupForward\n}, {\n  key: \"Alt-b\",\n  run: cursorGroupBackward,\n  shift: selectGroupBackward\n}, {\n  key: \"Alt-<\",\n  run: cursorDocStart\n}, {\n  key: \"Alt->\",\n  run: cursorDocEnd\n}, {\n  key: \"Ctrl-v\",\n  run: cursorPageDown\n}, {\n  key: \"Alt-v\",\n  run: cursorPageUp\n}];\n/**\nAn array of key bindings closely sticking to platform-standard or\nwidely used bindings. (This includes the bindings from\n[`emacsStyleKeymap`](https://codemirror.net/6/docs/ref/#commands.emacsStyleKeymap), with their `key`\nproperty changed to `mac`.)\n\n - ArrowLeft: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - ArrowRight: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-ArrowLeft (Alt-ArrowLeft on macOS): [`cursorGroupLeft`](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) ([`selectGroupLeft`](https://codemirror.net/6/docs/ref/#commands.selectGroupLeft) with Shift)\n - Ctrl-ArrowRight (Alt-ArrowRight on macOS): [`cursorGroupRight`](https://codemirror.net/6/docs/ref/#commands.cursorGroupRight) ([`selectGroupRight`](https://codemirror.net/6/docs/ref/#commands.selectGroupRight) with Shift)\n - Cmd-ArrowLeft (on macOS): [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Cmd-ArrowRight (on macOS): [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - ArrowUp: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - ArrowDown: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Cmd-ArrowUp (on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Cmd-ArrowDown (on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Ctrl-ArrowUp (on macOS): [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - Ctrl-ArrowDown (on macOS): [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - PageUp: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - PageDown: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - Home: [`cursorLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryBackward) ([`selectLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryBackward) with Shift)\n - End: [`cursorLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryForward) ([`selectLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryForward) with Shift)\n - Ctrl-Home (Cmd-Home on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Ctrl-End (Cmd-Home on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Enter: [`insertNewlineAndIndent`](https://codemirror.net/6/docs/ref/#commands.insertNewlineAndIndent)\n - Ctrl-a (Cmd-a on macOS): [`selectAll`](https://codemirror.net/6/docs/ref/#commands.selectAll)\n - Backspace: [`deleteCodePointBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCodePointBackward)\n - Delete: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-Backspace (Alt-Backspace on macOS): [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-Delete (Alt-Delete on macOS): [`deleteGroupForward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupForward)\n - Cmd-Backspace (macOS): [`deleteToLineStart`](https://codemirror.net/6/docs/ref/#commands.deleteToLineStart).\n - Cmd-Delete (macOS): [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd).\n*/\n\nvar standardKeymap = /*@__PURE__*/[{\n  key: \"ArrowLeft\",\n  run: cursorCharLeft,\n  shift: selectCharLeft\n}, {\n  key: \"Mod-ArrowLeft\",\n  mac: \"Alt-ArrowLeft\",\n  run: cursorGroupLeft,\n  shift: selectGroupLeft\n}, {\n  mac: \"Cmd-ArrowLeft\",\n  run: cursorLineBoundaryBackward,\n  shift: selectLineBoundaryBackward\n}, {\n  key: \"ArrowRight\",\n  run: cursorCharRight,\n  shift: selectCharRight\n}, {\n  key: \"Mod-ArrowRight\",\n  mac: \"Alt-ArrowRight\",\n  run: cursorGroupRight,\n  shift: selectGroupRight\n}, {\n  mac: \"Cmd-ArrowRight\",\n  run: cursorLineBoundaryForward,\n  shift: selectLineBoundaryForward\n}, {\n  key: \"ArrowUp\",\n  run: cursorLineUp,\n  shift: selectLineUp\n}, {\n  mac: \"Cmd-ArrowUp\",\n  run: cursorDocStart,\n  shift: selectDocStart\n}, {\n  mac: \"Ctrl-ArrowUp\",\n  run: cursorPageUp,\n  shift: selectPageUp\n}, {\n  key: \"ArrowDown\",\n  run: cursorLineDown,\n  shift: selectLineDown\n}, {\n  mac: \"Cmd-ArrowDown\",\n  run: cursorDocEnd,\n  shift: selectDocEnd\n}, {\n  mac: \"Ctrl-ArrowDown\",\n  run: cursorPageDown,\n  shift: selectPageDown\n}, {\n  key: \"PageUp\",\n  run: cursorPageUp,\n  shift: selectPageUp\n}, {\n  key: \"PageDown\",\n  run: cursorPageDown,\n  shift: selectPageDown\n}, {\n  key: \"Home\",\n  run: cursorLineBoundaryBackward,\n  shift: selectLineBoundaryBackward\n}, {\n  key: \"Mod-Home\",\n  run: cursorDocStart,\n  shift: selectDocStart\n}, {\n  key: \"End\",\n  run: cursorLineBoundaryForward,\n  shift: selectLineBoundaryForward\n}, {\n  key: \"Mod-End\",\n  run: cursorDocEnd,\n  shift: selectDocEnd\n}, {\n  key: \"Enter\",\n  run: insertNewlineAndIndent\n}, {\n  key: \"Mod-a\",\n  run: selectAll\n}, {\n  key: \"Backspace\",\n  run: deleteCodePointBackward,\n  shift: deleteCodePointBackward\n}, {\n  key: \"Delete\",\n  run: deleteCharForward,\n  shift: deleteCharForward\n}, {\n  key: \"Mod-Backspace\",\n  mac: \"Alt-Backspace\",\n  run: deleteGroupBackward\n}, {\n  key: \"Mod-Delete\",\n  mac: \"Alt-Delete\",\n  run: deleteGroupForward\n}, {\n  mac: \"Mod-Backspace\",\n  run: deleteToLineStart\n}, {\n  mac: \"Mod-Delete\",\n  run: deleteToLineEnd\n}].concat( /*@__PURE__*/emacsStyleKeymap.map(function (b) {\n  return {\n    mac: b.key,\n    run: b.run,\n    shift: b.shift\n  };\n}));\n/**\nThe default keymap. Includes all bindings from\n[`standardKeymap`](https://codemirror.net/6/docs/ref/#commands.standardKeymap) plus the following:\n\n- Alt-ArrowLeft (Ctrl-ArrowLeft on macOS): [`cursorSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxLeft) ([`selectSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxLeft) with Shift)\n- Alt-ArrowRight (Ctrl-ArrowRight on macOS): [`cursorSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxRight) ([`selectSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxRight) with Shift)\n- Alt-ArrowUp: [`moveLineUp`](https://codemirror.net/6/docs/ref/#commands.moveLineUp)\n- Alt-ArrowDown: [`moveLineDown`](https://codemirror.net/6/docs/ref/#commands.moveLineDown)\n- Shift-Alt-ArrowUp: [`copyLineUp`](https://codemirror.net/6/docs/ref/#commands.copyLineUp)\n- Shift-Alt-ArrowDown: [`copyLineDown`](https://codemirror.net/6/docs/ref/#commands.copyLineDown)\n- Escape: [`simplifySelection`](https://codemirror.net/6/docs/ref/#commands.simplifySelection)\n- Alt-l (Ctrl-l on macOS): [`selectLine`](https://codemirror.net/6/docs/ref/#commands.selectLine)\n- Ctrl-i (Cmd-i on macOS): [`selectParentSyntax`](https://codemirror.net/6/docs/ref/#commands.selectParentSyntax)\n- Ctrl-[ (Cmd-[ on macOS): [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess)\n- Ctrl-] (Cmd-] on macOS): [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore)\n- Ctrl-Alt-\\\\ (Cmd-Alt-\\\\ on macOS): [`indentSelection`](https://codemirror.net/6/docs/ref/#commands.indentSelection)\n- Shift-Ctrl-k (Shift-Cmd-k on macOS): [`deleteLine`](https://codemirror.net/6/docs/ref/#commands.deleteLine)\n- Shift-Ctrl-\\\\ (Shift-Cmd-\\\\ on macOS): [`cursorMatchingBracket`](https://codemirror.net/6/docs/ref/#commands.cursorMatchingBracket)\n*/\n\nvar defaultKeymap = /*@__PURE__*/[{\n  key: \"Alt-ArrowLeft\",\n  mac: \"Ctrl-ArrowLeft\",\n  run: cursorSyntaxLeft,\n  shift: selectSyntaxLeft\n}, {\n  key: \"Alt-ArrowRight\",\n  mac: \"Ctrl-ArrowRight\",\n  run: cursorSyntaxRight,\n  shift: selectSyntaxRight\n}, {\n  key: \"Alt-ArrowUp\",\n  run: moveLineUp\n}, {\n  key: \"Shift-Alt-ArrowUp\",\n  run: copyLineUp\n}, {\n  key: \"Alt-ArrowDown\",\n  run: moveLineDown\n}, {\n  key: \"Shift-Alt-ArrowDown\",\n  run: copyLineDown\n}, {\n  key: \"Escape\",\n  run: simplifySelection\n}, {\n  key: \"Alt-l\",\n  mac: \"Ctrl-l\",\n  run: selectLine\n}, {\n  key: \"Mod-i\",\n  run: selectParentSyntax,\n  preventDefault: true\n}, {\n  key: \"Mod-[\",\n  run: indentLess\n}, {\n  key: \"Mod-]\",\n  run: indentMore\n}, {\n  key: \"Mod-Alt-\\\\\",\n  run: indentSelection\n}, {\n  key: \"Shift-Mod-k\",\n  run: deleteLine\n}, {\n  key: \"Shift-Mod-\\\\\",\n  run: cursorMatchingBracket\n}].concat(standardKeymap);\n/**\nA binding that binds Tab to [`insertTab`](https://codemirror.net/6/docs/ref/#commands.insertTab) and\nShift-Tab to [`indentSelection`](https://codemirror.net/6/docs/ref/#commands.indentSelection).\nPlease see the [Tab example](../../examples/tab/) before using\nthis.\n*/\n\nvar defaultTabBinding = {\n  key: \"Tab\",\n  run: insertTab,\n  shift: indentSelection\n};\nexport { copyLineDown, copyLineUp, cursorCharBackward, cursorCharForward, cursorCharLeft, cursorCharRight, cursorDocEnd, cursorDocStart, cursorGroupBackward, cursorGroupForward, cursorGroupLeft, cursorGroupRight, cursorLineBoundaryBackward, cursorLineBoundaryForward, cursorLineDown, cursorLineEnd, cursorLineStart, cursorLineUp, cursorMatchingBracket, cursorPageDown, cursorPageUp, cursorSyntaxLeft, cursorSyntaxRight, defaultKeymap, defaultTabBinding, deleteCharBackward, deleteCharForward, deleteCodePointBackward, deleteCodePointForward, deleteGroupBackward, deleteGroupForward, deleteLine, deleteToLineEnd, deleteToLineStart, deleteTrailingWhitespace, emacsStyleKeymap, indentLess, indentMore, indentSelection, insertNewline, insertNewlineAndIndent, insertTab, moveLineDown, moveLineUp, selectAll, selectCharBackward, selectCharForward, selectCharLeft, selectCharRight, selectDocEnd, selectDocStart, selectGroupBackward, selectGroupForward, selectGroupLeft, selectGroupRight, selectLine, selectLineBoundaryBackward, selectLineBoundaryForward, selectLineDown, selectLineEnd, selectLineStart, selectLineUp, selectMatchingBracket, selectPageDown, selectPageUp, selectParentSyntax, selectSyntaxLeft, selectSyntaxRight, simplifySelection, splitLine, standardKeymap, transposeChars };","map":{"version":3,"sources":["/usr/local/google/home/freinartz/repos/src/github.com/GoogleCloudPlatform/prometheus-clean/web/ui/react-app/node_modules/@codemirror/commands/dist/index.js"],"names":["Transaction","EditorSelection","Text","findClusterBreak","countColumn","codePointSize","codePointAt","Direction","matchBrackets","IndentContext","getIndentation","indentString","indentUnit","getIndentUnit","syntaxTree","NodeProp","updateSel","sel","by","create","ranges","map","mainIndex","setSel","state","selection","update","scrollIntoView","annotations","userEvent","of","moveSel","how","dispatch","eq","rangeEnd","range","forward","cursor","to","from","cursorByChar","view","empty","moveByChar","cursorCharLeft","textDirection","LTR","cursorCharRight","cursorCharForward","cursorCharBackward","cursorByGroup","moveByGroup","cursorGroupLeft","cursorGroupRight","cursorGroupForward","cursorGroupBackward","interestingNode","node","bracketProp","type","prop","len","test","sliceDoc","firstChild","moveBySyntax","start","pos","resolve","head","closedBy","openedBy","at","next","childAfter","childBefore","bracket","match","newPos","matched","end","cursorSyntaxLeft","cursorSyntaxRight","cursorByLine","moveVertically","cursorLineUp","cursorLineDown","cursorByPage","dom","clientHeight","cursorPageUp","cursorPageDown","moveByLineBoundary","line","visualLineAt","moved","moveToLineBoundary","length","space","exec","Math","min","cursorLineBoundaryForward","cursorLineBoundaryBackward","cursorLineStart","cursorLineEnd","toMatchingBracket","extend","found","matching","doc","anchor","cursorMatchingBracket","selectMatchingBracket","extendSel","goalColumn","selectByChar","selectCharLeft","selectCharRight","selectCharForward","selectCharBackward","selectByGroup","selectGroupLeft","selectGroupRight","selectGroupForward","selectGroupBackward","selectSyntaxLeft","selectSyntaxRight","selectByLine","selectLineUp","selectLineDown","selectByPage","selectPageUp","selectPageDown","selectLineBoundaryForward","selectLineBoundaryBackward","selectLineStart","selectLineEnd","cursorDocStart","cursorDocEnd","selectDocStart","main","selectDocEnd","selectAll","selectLine","selectedLineBlocks","selectParentSyntax","_a","context","parent","simplifySelection","cur","deleteBy","changes","changeByRange","towards","max","deleteByChar","target","codePoint","lineAt","before","text","slice","col","tabSize","drop","i","targetPos","size","number","lines","deleteCodePointBackward","deleteCodePointForward","deleteCharBackward","deleteCharForward","deleteByGroup","categorize","charCategorizer","cat","nextChar","nextCat","deleteGroupBackward","deleteGroupForward","deleteToLineEnd","lineEnd","deleteToLineStart","lineStart","deleteTrailingWhitespace","prev","iter","lineBreak","done","trailing","search","push","value","splitLine","insert","transposeChars","append","blocks","upto","startLine","endLine","moveLine","block","nextLine","moveLineUp","moveLineDown","copyLine","copyLineUp","copyLineDown","deleteLine","insertNewline","replaceSelection","isBetweenBrackets","after","indexOf","name","insertNewlineAndIndent","explode","cx","simulateBreak","simulateDoubleBreak","indent","lineIndent","changeBySelectedLine","f","atLine","changeSet","mapPos","indentSelection","updated","Object","overrideIndentation","norm","indentMore","facet","indentLess","keep","charCodeAt","insertTab","some","r","emacsStyleKeymap","key","run","shift","preventDefault","standardKeymap","mac","concat","b","defaultKeymap","defaultTabBinding"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,eAAtB,QAA6C,mBAA7C;AACA,SAASC,IAAT,EAAeC,gBAAf,EAAiCC,WAAjC,EAA8CC,aAA9C,EAA6DC,WAA7D,QAAgF,kBAAhF;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,aAAT,EAAwBC,cAAxB,EAAwCC,YAAxC,EAAsDC,UAAtD,EAAkEC,aAAlE,EAAiFC,UAAjF,QAAmG,sBAAnG;AACA,SAASC,QAAT,QAAyB,YAAzB;;AAEA,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,EAAxB,EAA4B;AACxB,SAAOjB,eAAe,CAACkB,MAAhB,CAAuBF,GAAG,CAACG,MAAJ,CAAWC,GAAX,CAAeH,EAAf,CAAvB,EAA2CD,GAAG,CAACK,SAA/C,CAAP;AACH;;AACD,SAASC,MAAT,CAAgBC,KAAhB,EAAuBC,SAAvB,EAAkC;AAC9B,SAAOD,KAAK,CAACE,MAAN,CAAa;AAAED,IAAAA,SAAS,EAATA,SAAF;AAAaE,IAAAA,cAAc,EAAE,IAA7B;AAAmCC,IAAAA,WAAW,EAAE5B,WAAW,CAAC6B,SAAZ,CAAsBC,EAAtB,CAAyB,mBAAzB;AAAhD,GAAb,CAAP;AACH;;AACD,SAASC,OAAT,OAAsCC,GAAtC,EAA2C;AAAA,MAAxBR,KAAwB,QAAxBA,KAAwB;AAAA,MAAjBS,QAAiB,QAAjBA,QAAiB;AACvC,MAAIR,SAAS,GAAGT,SAAS,CAACQ,KAAK,CAACC,SAAP,EAAkBO,GAAlB,CAAzB;AACA,MAAIP,SAAS,CAACS,EAAV,CAAaV,KAAK,CAACC,SAAnB,CAAJ,EACI,OAAO,KAAP;AACJQ,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQC,SAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH;;AACD,SAASU,QAAT,CAAkBC,KAAlB,EAAyBC,OAAzB,EAAkC;AAC9B,SAAOpC,eAAe,CAACqC,MAAhB,CAAuBD,OAAO,GAAGD,KAAK,CAACG,EAAT,GAAcH,KAAK,CAACI,IAAlD,CAAP;AACH;;AACD,SAASC,YAAT,CAAsBC,IAAtB,EAA4BL,OAA5B,EAAqC;AACjC,SAAON,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIA,KAAK,CAACO,KAAN,GAAcD,IAAI,CAACE,UAAL,CAAgBR,KAAhB,EAAuBC,OAAvB,CAAd,GAAgDF,QAAQ,CAACC,KAAD,EAAQC,OAAR,CAA5D;AAAA,GAAZ,CAAd;AACH;AACD;AACA;AACA;AACA;;;AACA,IAAMQ,cAAc,GAAG,SAAjBA,cAAiB,CAAAH,IAAI;AAAA,SAAID,YAAY,CAACC,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAhB;AAAA,CAA3B;AACA;AACA;AACA;;;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAN,IAAI;AAAA,SAAID,YAAY,CAACC,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAhB;AAAA,CAA5B;AACA;AACA;AACA;;;AACA,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAP,IAAI;AAAA,SAAID,YAAY,CAACC,IAAD,EAAO,IAAP,CAAhB;AAAA,CAA9B;AACA;AACA;AACA;;;AACA,IAAMQ,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAR,IAAI;AAAA,SAAID,YAAY,CAACC,IAAD,EAAO,KAAP,CAAhB;AAAA,CAA/B;;AACA,SAASS,aAAT,CAAuBT,IAAvB,EAA6BL,OAA7B,EAAsC;AAClC,SAAON,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIA,KAAK,CAACO,KAAN,GAAcD,IAAI,CAACU,WAAL,CAAiBhB,KAAjB,EAAwBC,OAAxB,CAAd,GAAiDF,QAAQ,CAACC,KAAD,EAAQC,OAAR,CAA7D;AAAA,GAAZ,CAAd;AACH;AACD;AACA;AACA;AACA;;;AACA,IAAMgB,eAAe,GAAG,SAAlBA,eAAkB,CAAAX,IAAI;AAAA,SAAIS,aAAa,CAACT,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAjB;AAAA,CAA5B;AACA;AACA;AACA;;;AACA,IAAMO,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAZ,IAAI;AAAA,SAAIS,aAAa,CAACT,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAjB;AAAA,CAA7B;AACA;AACA;AACA;;;AACA,IAAMQ,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAb,IAAI;AAAA,SAAIS,aAAa,CAACT,IAAD,EAAO,IAAP,CAAjB;AAAA,CAA/B;AACA;AACA;AACA;;;AACA,IAAMc,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAd,IAAI;AAAA,SAAIS,aAAa,CAACT,IAAD,EAAO,KAAP,CAAjB;AAAA,CAAhC;;AACA,SAASe,eAAT,CAAyBjC,KAAzB,EAAgCkC,IAAhC,EAAsCC,WAAtC,EAAmD;AAC/C,MAAID,IAAI,CAACE,IAAL,CAAUC,IAAV,CAAeF,WAAf,CAAJ,EACI,OAAO,IAAP;AACJ,MAAIG,GAAG,GAAGJ,IAAI,CAACnB,EAAL,GAAUmB,IAAI,CAAClB,IAAzB;AACA,SAAOsB,GAAG,KAAKA,GAAG,GAAG,CAAN,IAAW,YAAYC,IAAZ,CAAiBvC,KAAK,CAACwC,QAAN,CAAeN,IAAI,CAAClB,IAApB,EAA0BkB,IAAI,CAACnB,EAA/B,CAAjB,CAAhB,CAAH,IAA4EmB,IAAI,CAACO,UAAxF;AACH;;AACD,SAASC,YAAT,CAAsB1C,KAAtB,EAA6B2C,KAA7B,EAAoC9B,OAApC,EAA6C;AACzC,MAAI+B,GAAG,GAAGtD,UAAU,CAACU,KAAD,CAAV,CAAkB6C,OAAlB,CAA0BF,KAAK,CAACG,IAAhC,CAAV;AACA,MAAIX,WAAW,GAAGtB,OAAO,GAAGtB,QAAQ,CAACwD,QAAZ,GAAuBxD,QAAQ,CAACyD,QAAzD,CAFyC,CAGzC;AACA;;AACA,OAAK,IAAIC,EAAE,GAAGN,KAAK,CAACG,IAApB,IAA4B;AACxB,QAAII,IAAI,GAAGrC,OAAO,GAAG+B,GAAG,CAACO,UAAJ,CAAeF,EAAf,CAAH,GAAwBL,GAAG,CAACQ,WAAJ,CAAgBH,EAAhB,CAA1C;AACA,QAAI,CAACC,IAAL,EACI;AACJ,QAAIjB,eAAe,CAACjC,KAAD,EAAQkD,IAAR,EAAcf,WAAd,CAAnB,EACIS,GAAG,GAAGM,IAAN,CADJ,KAGID,EAAE,GAAGpC,OAAO,GAAGqC,IAAI,CAACnC,EAAR,GAAamC,IAAI,CAAClC,IAA9B;AACP;;AACD,MAAIqC,OAAO,GAAGT,GAAG,CAACR,IAAJ,CAASC,IAAT,CAAcF,WAAd,CAAd;AAAA,MAA0CmB,KAA1C;AAAA,MAAiDC,MAAjD;AACA,MAAIF,OAAO,KAAKC,KAAK,GAAGzC,OAAO,GAAG7B,aAAa,CAACgB,KAAD,EAAQ4C,GAAG,CAAC5B,IAAZ,EAAkB,CAAlB,CAAhB,GAAuChC,aAAa,CAACgB,KAAD,EAAQ4C,GAAG,CAAC7B,EAAZ,EAAgB,CAAC,CAAjB,CAAxE,CAAP,IAAuGuC,KAAK,CAACE,OAAjH,EACID,MAAM,GAAG1C,OAAO,GAAGyC,KAAK,CAACG,GAAN,CAAU1C,EAAb,GAAkBuC,KAAK,CAACG,GAAN,CAAUzC,IAA5C,CADJ,KAGIuC,MAAM,GAAG1C,OAAO,GAAG+B,GAAG,CAAC7B,EAAP,GAAY6B,GAAG,CAAC5B,IAAhC;AACJ,SAAOvC,eAAe,CAACqC,MAAhB,CAAuByC,MAAvB,EAA+B1C,OAAO,GAAG,CAAC,CAAJ,GAAQ,CAA9C,CAAP;AACH;AACD;AACA;AACA;;;AACA,IAAM6C,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAxC,IAAI;AAAA,SAAIX,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAI8B,YAAY,CAACxB,IAAI,CAAClB,KAAN,EAAaY,KAAb,EAAoBM,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAApD,CAAhB;AAAA,GAAZ,CAAX;AAAA,CAA7B;AACA;AACA;AACA;;;AACA,IAAMoC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAzC,IAAI;AAAA,SAAIX,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAI8B,YAAY,CAACxB,IAAI,CAAClB,KAAN,EAAaY,KAAb,EAAoBM,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAApD,CAAhB;AAAA,GAAZ,CAAX;AAAA,CAA9B;;AACA,SAASqC,YAAT,CAAsB1C,IAAtB,EAA4BL,OAA5B,EAAqC;AACjC,SAAON,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIA,KAAK,CAACO,KAAN,GAAcD,IAAI,CAAC2C,cAAL,CAAoBjD,KAApB,EAA2BC,OAA3B,CAAd,GAAoDF,QAAQ,CAACC,KAAD,EAAQC,OAAR,CAAhE;AAAA,GAAZ,CAAd;AACH;AACD;AACA;AACA;;;AACA,IAAMiD,YAAY,GAAG,SAAfA,YAAe,CAAA5C,IAAI;AAAA,SAAI0C,YAAY,CAAC1C,IAAD,EAAO,KAAP,CAAhB;AAAA,CAAzB;AACA;AACA;AACA;;;AACA,IAAM6C,cAAc,GAAG,SAAjBA,cAAiB,CAAA7C,IAAI;AAAA,SAAI0C,YAAY,CAAC1C,IAAD,EAAO,IAAP,CAAhB;AAAA,CAA3B;;AACA,SAAS8C,YAAT,CAAsB9C,IAAtB,EAA4BL,OAA5B,EAAqC;AACjC,SAAON,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIA,KAAK,CAACO,KAAN,GAAcD,IAAI,CAAC2C,cAAL,CAAoBjD,KAApB,EAA2BC,OAA3B,EAAoCK,IAAI,CAAC+C,GAAL,CAASC,YAA7C,CAAd,GAA2EvD,QAAQ,CAACC,KAAD,EAAQC,OAAR,CAAvF;AAAA,GAAZ,CAAd;AACH;AACD;AACA;AACA;;;AACA,IAAMsD,YAAY,GAAG,SAAfA,YAAe,CAAAjD,IAAI;AAAA,SAAI8C,YAAY,CAAC9C,IAAD,EAAO,KAAP,CAAhB;AAAA,CAAzB;AACA;AACA;AACA;;;AACA,IAAMkD,cAAc,GAAG,SAAjBA,cAAiB,CAAAlD,IAAI;AAAA,SAAI8C,YAAY,CAAC9C,IAAD,EAAO,IAAP,CAAhB;AAAA,CAA3B;;AACA,SAASmD,kBAAT,CAA4BnD,IAA5B,EAAkCyB,KAAlC,EAAyC9B,OAAzC,EAAkD;AAC9C,MAAIyD,IAAI,GAAGpD,IAAI,CAACqD,YAAL,CAAkB5B,KAAK,CAACG,IAAxB,CAAX;AAAA,MAA0C0B,KAAK,GAAGtD,IAAI,CAACuD,kBAAL,CAAwB9B,KAAxB,EAA+B9B,OAA/B,CAAlD;AACA,MAAI2D,KAAK,CAAC1B,IAAN,IAAcH,KAAK,CAACG,IAApB,IAA4B0B,KAAK,CAAC1B,IAAN,KAAejC,OAAO,GAAGyD,IAAI,CAACvD,EAAR,GAAauD,IAAI,CAACtD,IAAxC,CAAhC,EACIwD,KAAK,GAAGtD,IAAI,CAACuD,kBAAL,CAAwB9B,KAAxB,EAA+B9B,OAA/B,EAAwC,KAAxC,CAAR;;AACJ,MAAI,CAACA,OAAD,IAAY2D,KAAK,CAAC1B,IAAN,IAAcwB,IAAI,CAACtD,IAA/B,IAAuCsD,IAAI,CAACI,MAAhD,EAAwD;AACpD,QAAIC,KAAK,GAAG,OAAOC,IAAP,CAAY1D,IAAI,CAAClB,KAAL,CAAWwC,QAAX,CAAoB8B,IAAI,CAACtD,IAAzB,EAA+B6D,IAAI,CAACC,GAAL,CAASR,IAAI,CAACtD,IAAL,GAAY,GAArB,EAA0BsD,IAAI,CAACvD,EAA/B,CAA/B,CAAZ,EAAgF,CAAhF,EAAmF2D,MAA/F;AACA,QAAIC,KAAK,IAAIhC,KAAK,CAACG,IAAN,IAAcwB,IAAI,CAACtD,IAAL,GAAY2D,KAAvC,EACIH,KAAK,GAAG/F,eAAe,CAACqC,MAAhB,CAAuBwD,IAAI,CAACtD,IAAL,GAAY2D,KAAnC,CAAR;AACP;;AACD,SAAOH,KAAP;AACH;AACD;AACA;AACA;AACA;;;AACA,IAAMO,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAA7D,IAAI;AAAA,SAAIX,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIyD,kBAAkB,CAACnD,IAAD,EAAON,KAAP,EAAc,IAAd,CAAtB;AAAA,GAAZ,CAAX;AAAA,CAAtC;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMoE,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAA9D,IAAI;AAAA,SAAIX,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIyD,kBAAkB,CAACnD,IAAD,EAAON,KAAP,EAAc,KAAd,CAAtB;AAAA,GAAZ,CAAX;AAAA,CAAvC;AACA;AACA;AACA;;;AACA,IAAMqE,eAAe,GAAG,SAAlBA,eAAkB,CAAA/D,IAAI;AAAA,SAAIX,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAInC,eAAe,CAACqC,MAAhB,CAAuBI,IAAI,CAACqD,YAAL,CAAkB3D,KAAK,CAACkC,IAAxB,EAA8B9B,IAArD,EAA2D,CAA3D,CAAJ;AAAA,GAAZ,CAAX;AAAA,CAA5B;AACA;AACA;AACA;;;AACA,IAAMkE,aAAa,GAAG,SAAhBA,aAAgB,CAAAhE,IAAI;AAAA,SAAIX,OAAO,CAACW,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAInC,eAAe,CAACqC,MAAhB,CAAuBI,IAAI,CAACqD,YAAL,CAAkB3D,KAAK,CAACkC,IAAxB,EAA8B/B,EAArD,EAAyD,CAAC,CAA1D,CAAJ;AAAA,GAAZ,CAAX;AAAA,CAA1B;;AACA,SAASoE,iBAAT,CAA2BnF,KAA3B,EAAkCS,QAAlC,EAA4C2E,MAA5C,EAAoD;AAChD,MAAIC,KAAK,GAAG,KAAZ;AAAA,MAAmBpF,SAAS,GAAGT,SAAS,CAACQ,KAAK,CAACC,SAAP,EAAkB,UAAAW,KAAK,EAAI;AAC/D,QAAI0E,QAAQ,GAAGtG,aAAa,CAACgB,KAAD,EAAQY,KAAK,CAACkC,IAAd,EAAoB,CAAC,CAArB,CAAb,IACR9D,aAAa,CAACgB,KAAD,EAAQY,KAAK,CAACkC,IAAd,EAAoB,CAApB,CADL,IAEPlC,KAAK,CAACkC,IAAN,GAAa,CAAb,IAAkB9D,aAAa,CAACgB,KAAD,EAAQY,KAAK,CAACkC,IAAN,GAAa,CAArB,EAAwB,CAAxB,CAFxB,IAGPlC,KAAK,CAACkC,IAAN,GAAa9C,KAAK,CAACuF,GAAN,CAAUb,MAAvB,IAAiC1F,aAAa,CAACgB,KAAD,EAAQY,KAAK,CAACkC,IAAN,GAAa,CAArB,EAAwB,CAAC,CAAzB,CAHtD;AAIA,QAAI,CAACwC,QAAD,IAAa,CAACA,QAAQ,CAAC7B,GAA3B,EACI,OAAO7C,KAAP;AACJyE,IAAAA,KAAK,GAAG,IAAR;AACA,QAAIvC,IAAI,GAAGwC,QAAQ,CAAC3C,KAAT,CAAe3B,IAAf,IAAuBJ,KAAK,CAACkC,IAA7B,GAAoCwC,QAAQ,CAAC7B,GAAT,CAAa1C,EAAjD,GAAsDuE,QAAQ,CAAC7B,GAAT,CAAazC,IAA9E;AACA,WAAOoE,MAAM,GAAG3G,eAAe,CAACmC,KAAhB,CAAsBA,KAAK,CAAC4E,MAA5B,EAAoC1C,IAApC,CAAH,GAA+CrE,eAAe,CAACqC,MAAhB,CAAuBgC,IAAvB,CAA5D;AACH,GAVuC,CAAxC;AAWA,MAAI,CAACuC,KAAL,EACI,OAAO,KAAP;AACJ5E,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQC,SAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH;AACD;AACA;AACA;AACA;;;AACA,IAAMwF,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,MAAGzF,KAAH,SAAGA,KAAH;AAAA,MAAUS,QAAV,SAAUA,QAAV;AAAA,SAAyB0E,iBAAiB,CAACnF,KAAD,EAAQS,QAAR,EAAkB,KAAlB,CAA1C;AAAA,CAA9B;AACA;AACA;AACA;AACA;;;AACA,IAAMiF,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,MAAG1F,KAAH,SAAGA,KAAH;AAAA,MAAUS,QAAV,SAAUA,QAAV;AAAA,SAAyB0E,iBAAiB,CAACnF,KAAD,EAAQS,QAAR,EAAkB,IAAlB,CAA1C;AAAA,CAA9B;;AACA,SAASkF,SAAT,CAAmBzE,IAAnB,EAAyBV,GAAzB,EAA8B;AAC1B,MAAIP,SAAS,GAAGT,SAAS,CAAC0B,IAAI,CAAClB,KAAL,CAAWC,SAAZ,EAAuB,UAAAW,KAAK,EAAI;AACrD,QAAIkC,IAAI,GAAGtC,GAAG,CAACI,KAAD,CAAd;AACA,WAAOnC,eAAe,CAACmC,KAAhB,CAAsBA,KAAK,CAAC4E,MAA5B,EAAoC1C,IAAI,CAACA,IAAzC,EAA+CA,IAAI,CAAC8C,UAApD,CAAP;AACH,GAHwB,CAAzB;AAIA,MAAI3F,SAAS,CAACS,EAAV,CAAaQ,IAAI,CAAClB,KAAL,CAAWC,SAAxB,CAAJ,EACI,OAAO,KAAP;AACJiB,EAAAA,IAAI,CAACT,QAAL,CAAcV,MAAM,CAACmB,IAAI,CAAClB,KAAN,EAAaC,SAAb,CAApB;AACA,SAAO,IAAP;AACH;;AACD,SAAS4F,YAAT,CAAsB3E,IAAtB,EAA4BL,OAA5B,EAAqC;AACjC,SAAO8E,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIM,IAAI,CAACE,UAAL,CAAgBR,KAAhB,EAAuBC,OAAvB,CAAJ;AAAA,GAAZ,CAAhB;AACH;AACD;AACA;AACA;AACA;;;AACA,IAAMiF,cAAc,GAAG,SAAjBA,cAAiB,CAAA5E,IAAI;AAAA,SAAI2E,YAAY,CAAC3E,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAhB;AAAA,CAA3B;AACA;AACA;AACA;;;AACA,IAAMwE,eAAe,GAAG,SAAlBA,eAAkB,CAAA7E,IAAI;AAAA,SAAI2E,YAAY,CAAC3E,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAhB;AAAA,CAA5B;AACA;AACA;AACA;;;AACA,IAAMyE,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA9E,IAAI;AAAA,SAAI2E,YAAY,CAAC3E,IAAD,EAAO,IAAP,CAAhB;AAAA,CAA9B;AACA;AACA;AACA;;;AACA,IAAM+E,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA/E,IAAI;AAAA,SAAI2E,YAAY,CAAC3E,IAAD,EAAO,KAAP,CAAhB;AAAA,CAA/B;;AACA,SAASgF,aAAT,CAAuBhF,IAAvB,EAA6BL,OAA7B,EAAsC;AAClC,SAAO8E,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIM,IAAI,CAACU,WAAL,CAAiBhB,KAAjB,EAAwBC,OAAxB,CAAJ;AAAA,GAAZ,CAAhB;AACH;AACD;AACA;AACA;AACA;;;AACA,IAAMsF,eAAe,GAAG,SAAlBA,eAAkB,CAAAjF,IAAI;AAAA,SAAIgF,aAAa,CAAChF,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAjB;AAAA,CAA5B;AACA;AACA;AACA;;;AACA,IAAM6E,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAlF,IAAI;AAAA,SAAIgF,aAAa,CAAChF,IAAD,EAAOA,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAAvC,CAAjB;AAAA,CAA7B;AACA;AACA;AACA;;;AACA,IAAM8E,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAnF,IAAI;AAAA,SAAIgF,aAAa,CAAChF,IAAD,EAAO,IAAP,CAAjB;AAAA,CAA/B;AACA;AACA;AACA;;;AACA,IAAMoF,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAApF,IAAI;AAAA,SAAIgF,aAAa,CAAChF,IAAD,EAAO,KAAP,CAAjB;AAAA,CAAhC;AACA;AACA;AACA;;;AACA,IAAMqF,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAArF,IAAI;AAAA,SAAIyE,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAI8B,YAAY,CAACxB,IAAI,CAAClB,KAAN,EAAaY,KAAb,EAAoBM,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAApD,CAAhB;AAAA,GAAZ,CAAb;AAAA,CAA7B;AACA;AACA;AACA;;;AACA,IAAMiF,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAtF,IAAI;AAAA,SAAIyE,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAI8B,YAAY,CAACxB,IAAI,CAAClB,KAAN,EAAaY,KAAb,EAAoBM,IAAI,CAACI,aAAL,IAAsBvC,SAAS,CAACwC,GAApD,CAAhB;AAAA,GAAZ,CAAb;AAAA,CAA9B;;AACA,SAASkF,YAAT,CAAsBvF,IAAtB,EAA4BL,OAA5B,EAAqC;AACjC,SAAO8E,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIM,IAAI,CAAC2C,cAAL,CAAoBjD,KAApB,EAA2BC,OAA3B,CAAJ;AAAA,GAAZ,CAAhB;AACH;AACD;AACA;AACA;;;AACA,IAAM6F,YAAY,GAAG,SAAfA,YAAe,CAAAxF,IAAI;AAAA,SAAIuF,YAAY,CAACvF,IAAD,EAAO,KAAP,CAAhB;AAAA,CAAzB;AACA;AACA;AACA;;;AACA,IAAMyF,cAAc,GAAG,SAAjBA,cAAiB,CAAAzF,IAAI;AAAA,SAAIuF,YAAY,CAACvF,IAAD,EAAO,IAAP,CAAhB;AAAA,CAA3B;;AACA,SAAS0F,YAAT,CAAsB1F,IAAtB,EAA4BL,OAA5B,EAAqC;AACjC,SAAO8E,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIM,IAAI,CAAC2C,cAAL,CAAoBjD,KAApB,EAA2BC,OAA3B,EAAoCK,IAAI,CAAC+C,GAAL,CAASC,YAA7C,CAAJ;AAAA,GAAZ,CAAhB;AACH;AACD;AACA;AACA;;;AACA,IAAM2C,YAAY,GAAG,SAAfA,YAAe,CAAA3F,IAAI;AAAA,SAAI0F,YAAY,CAAC1F,IAAD,EAAO,KAAP,CAAhB;AAAA,CAAzB;AACA;AACA;AACA;;;AACA,IAAM4F,cAAc,GAAG,SAAjBA,cAAiB,CAAA5F,IAAI;AAAA,SAAI0F,YAAY,CAAC1F,IAAD,EAAO,IAAP,CAAhB;AAAA,CAA3B;AACA;AACA;AACA;;;AACA,IAAM6F,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAA7F,IAAI;AAAA,SAAIyE,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIyD,kBAAkB,CAACnD,IAAD,EAAON,KAAP,EAAc,IAAd,CAAtB;AAAA,GAAZ,CAAb;AAAA,CAAtC;AACA;AACA;AACA;;;AACA,IAAMoG,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAA9F,IAAI;AAAA,SAAIyE,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAIyD,kBAAkB,CAACnD,IAAD,EAAON,KAAP,EAAc,KAAd,CAAtB;AAAA,GAAZ,CAAb;AAAA,CAAvC;AACA;AACA;AACA;;;AACA,IAAMqG,eAAe,GAAG,SAAlBA,eAAkB,CAAA/F,IAAI;AAAA,SAAIyE,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAInC,eAAe,CAACqC,MAAhB,CAAuBI,IAAI,CAACqD,YAAL,CAAkB3D,KAAK,CAACkC,IAAxB,EAA8B9B,IAArD,CAAJ;AAAA,GAAZ,CAAb;AAAA,CAA5B;AACA;AACA;AACA;;;AACA,IAAMkG,aAAa,GAAG,SAAhBA,aAAgB,CAAAhG,IAAI;AAAA,SAAIyE,SAAS,CAACzE,IAAD,EAAO,UAAAN,KAAK;AAAA,WAAInC,eAAe,CAACqC,MAAhB,CAAuBI,IAAI,CAACqD,YAAL,CAAkB3D,KAAK,CAACkC,IAAxB,EAA8B/B,EAArD,CAAJ;AAAA,GAAZ,CAAb;AAAA,CAA1B;AACA;AACA;AACA;;;AACA,IAAMoG,cAAc,GAAG,SAAjBA,cAAiB,QAAyB;AAAA,MAAtBnH,KAAsB,SAAtBA,KAAsB;AAAA,MAAfS,QAAe,SAAfA,QAAe;AAC5CA,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQ;AAAEwF,IAAAA,MAAM,EAAE;AAAV,GAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH,CAHD;AAIA;AACA;AACA;;;AACA,IAAM4B,YAAY,GAAG,SAAfA,YAAe,QAAyB;AAAA,MAAtBpH,KAAsB,SAAtBA,KAAsB;AAAA,MAAfS,QAAe,SAAfA,QAAe;AAC1CA,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQ;AAAEwF,IAAAA,MAAM,EAAExF,KAAK,CAACuF,GAAN,CAAUb;AAApB,GAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH,CAHD;AAIA;AACA;AACA;;;AACA,IAAM2C,cAAc,GAAG,SAAjBA,cAAiB,QAAyB;AAAA,MAAtBrH,KAAsB,SAAtBA,KAAsB;AAAA,MAAfS,QAAe,SAAfA,QAAe;AAC5CA,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQ;AAAEwF,IAAAA,MAAM,EAAExF,KAAK,CAACC,SAAN,CAAgBqH,IAAhB,CAAqB9B,MAA/B;AAAuC1C,IAAAA,IAAI,EAAE;AAA7C,GAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH,CAHD;AAIA;AACA;AACA;;;AACA,IAAMyE,YAAY,GAAG,SAAfA,YAAe,QAAyB;AAAA,MAAtBvH,KAAsB,SAAtBA,KAAsB;AAAA,MAAfS,QAAe,SAAfA,QAAe;AAC1CA,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQ;AAAEwF,IAAAA,MAAM,EAAExF,KAAK,CAACC,SAAN,CAAgBqH,IAAhB,CAAqB9B,MAA/B;AAAuC1C,IAAAA,IAAI,EAAE9C,KAAK,CAACuF,GAAN,CAAUb;AAAvD,GAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH,CAHD;AAIA;AACA;AACA;;;AACA,IAAM8C,SAAS,GAAG,SAAZA,SAAY,QAAyB;AAAA,MAAtBxH,KAAsB,SAAtBA,KAAsB;AAAA,MAAfS,QAAe,SAAfA,QAAe;AACvCA,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAa;AAAED,IAAAA,SAAS,EAAE;AAAEuF,MAAAA,MAAM,EAAE,CAAV;AAAa1C,MAAAA,IAAI,EAAE9C,KAAK,CAACuF,GAAN,CAAUb;AAA7B,KAAb;AAAoDtE,IAAAA,WAAW,EAAE5B,WAAW,CAAC6B,SAAZ,CAAsBC,EAAtB,CAAyB,mBAAzB;AAAjE,GAAb,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CAHD;AAIA;AACA;AACA;;;AACA,IAAMmH,UAAU,GAAG,SAAbA,UAAa,QAAyB;AAAA,MAAtBzH,KAAsB,SAAtBA,KAAsB;AAAA,MAAfS,QAAe,SAAfA,QAAe;AACxC,MAAIb,MAAM,GAAG8H,kBAAkB,CAAC1H,KAAD,CAAlB,CAA0BH,GAA1B,CAA8B;AAAA,QAAGmB,IAAH,UAAGA,IAAH;AAAA,QAASD,EAAT,UAASA,EAAT;AAAA,WAAkBtC,eAAe,CAACmC,KAAhB,CAAsBI,IAAtB,EAA4B6D,IAAI,CAACC,GAAL,CAAS/D,EAAE,GAAG,CAAd,EAAiBf,KAAK,CAACuF,GAAN,CAAUb,MAA3B,CAA5B,CAAlB;AAAA,GAA9B,CAAb;AACAjE,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAa;AAAED,IAAAA,SAAS,EAAExB,eAAe,CAACkB,MAAhB,CAAuBC,MAAvB,CAAb;AAA6CQ,IAAAA,WAAW,EAAE5B,WAAW,CAAC6B,SAAZ,CAAsBC,EAAtB,CAAyB,mBAAzB;AAA1D,GAAb,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CAJD;AAKA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMqH,kBAAkB,GAAG,SAArBA,kBAAqB,SAAyB;AAAA,MAAtB3H,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AAChD,MAAIR,SAAS,GAAGT,SAAS,CAACQ,KAAK,CAACC,SAAP,EAAkB,UAAAW,KAAK,EAAI;AAChD,QAAIgH,EAAJ;;AACA,QAAIC,OAAO,GAAGvI,UAAU,CAACU,KAAD,CAAV,CAAkB6C,OAAlB,CAA0BjC,KAAK,CAACkC,IAAhC,EAAsC,CAAtC,CAAd;;AACA,WAAO,EAAG+E,OAAO,CAAC7G,IAAR,GAAeJ,KAAK,CAACI,IAArB,IAA6B6G,OAAO,CAAC9G,EAAR,IAAcH,KAAK,CAACG,EAAlD,IACJ8G,OAAO,CAAC9G,EAAR,GAAaH,KAAK,CAACG,EAAnB,IAAyB8G,OAAO,CAAC7G,IAAR,IAAgBJ,KAAK,CAACI,IAD3C,IAEL,EAAE,CAAC4G,EAAE,GAAGC,OAAO,CAACC,MAAd,MAA0B,IAA1B,IAAkCF,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACE,MAAhE,CAFG,CAAP;AAGID,MAAAA,OAAO,GAAGA,OAAO,CAACC,MAAlB;AAHJ;;AAIA,WAAOrJ,eAAe,CAACmC,KAAhB,CAAsBiH,OAAO,CAAC9G,EAA9B,EAAkC8G,OAAO,CAAC7G,IAA1C,CAAP;AACH,GARwB,CAAzB;AASAP,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQC,SAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH,CAZD;AAaA;AACA;AACA;AACA;AACA;;;AACA,IAAM8H,iBAAiB,GAAG,SAApBA,iBAAoB,SAAyB;AAAA,MAAtB/H,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AAC/C,MAAIuH,GAAG,GAAGhI,KAAK,CAACC,SAAhB;AAAA,MAA2BA,SAAS,GAAG,IAAvC;AACA,MAAI+H,GAAG,CAACpI,MAAJ,CAAW8E,MAAX,GAAoB,CAAxB,EACIzE,SAAS,GAAGxB,eAAe,CAACkB,MAAhB,CAAuB,CAACqI,GAAG,CAACV,IAAL,CAAvB,CAAZ,CADJ,KAEK,IAAI,CAACU,GAAG,CAACV,IAAJ,CAASnG,KAAd,EACDlB,SAAS,GAAGxB,eAAe,CAACkB,MAAhB,CAAuB,CAAClB,eAAe,CAACqC,MAAhB,CAAuBkH,GAAG,CAACV,IAAJ,CAASxE,IAAhC,CAAD,CAAvB,CAAZ;AACJ,MAAI,CAAC7C,SAAL,EACI,OAAO,KAAP;AACJQ,EAAAA,QAAQ,CAACV,MAAM,CAACC,KAAD,EAAQC,SAAR,CAAP,CAAR;AACA,SAAO,IAAP;AACH,CAVD;;AAWA,SAASgI,QAAT,SAAuCvI,EAAvC,EAA2C;AAAA,MAAvBM,KAAuB,UAAvBA,KAAuB;AAAA,MAAhBS,QAAgB,UAAhBA,QAAgB;AACvC,MAAIyH,OAAO,GAAGlI,KAAK,CAACmI,aAAN,CAAoB,UAAAvH,KAAK,EAAI;AACvC,QAAMI,IAAN,GAAmBJ,KAAnB,CAAMI,IAAN;AAAA,QAAYD,EAAZ,GAAmBH,KAAnB,CAAYG,EAAZ;;AACA,QAAIC,IAAI,IAAID,EAAZ,EAAgB;AACZ,UAAIqH,OAAO,GAAG1I,EAAE,CAACsB,IAAD,CAAhB;AACAA,MAAAA,IAAI,GAAG6D,IAAI,CAACC,GAAL,CAAS9D,IAAT,EAAeoH,OAAf,CAAP;AACArH,MAAAA,EAAE,GAAG8D,IAAI,CAACwD,GAAL,CAAStH,EAAT,EAAaqH,OAAb,CAAL;AACH;;AACD,WAAOpH,IAAI,IAAID,EAAR,GAAa;AAAEH,MAAAA,KAAK,EAALA;AAAF,KAAb,GAAyB;AAAEsH,MAAAA,OAAO,EAAE;AAAElH,QAAAA,IAAI,EAAJA,IAAF;AAAQD,QAAAA,EAAE,EAAFA;AAAR,OAAX;AAAyBH,MAAAA,KAAK,EAAEnC,eAAe,CAACqC,MAAhB,CAAuBE,IAAvB;AAAhC,KAAhC;AACH,GARa,CAAd;AASA,MAAIkH,OAAO,CAACA,OAAR,CAAgB/G,KAApB,EACI,OAAO,KAAP;AACJV,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAagI,OAAb,EAAsB;AAAE/H,IAAAA,cAAc,EAAE,IAAlB;AAAwBC,IAAAA,WAAW,EAAE5B,WAAW,CAAC6B,SAAZ,CAAsBC,EAAtB,CAAyB,QAAzB;AAArC,GAAtB,CAAD,CAAR;AACA,SAAO,IAAP;AACH;;AACD,IAAMgI,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD,EAAS1H,OAAT,EAAkB2H,SAAlB;AAAA,SAAgCP,QAAQ,CAACM,MAAD,EAAS,UAAA3F,GAAG,EAAI;AACrE,QAAE5C,KAAF,GAAYuI,MAAZ,CAAEvI,KAAF;AAAA,QAAoBsE,IAApB,GAA2BtE,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiB7F,GAAjB,CAA3B;AAAA,QAAkD8F,MAAlD;;AACJ,QAAI,CAAC7H,OAAD,IAAY+B,GAAG,GAAG0B,IAAI,CAACtD,IAAvB,IAA+B4B,GAAG,GAAG0B,IAAI,CAACtD,IAAL,GAAY,GAAjD,IACA,CAAC,SAASuB,IAAT,CAAcmG,MAAM,GAAGpE,IAAI,CAACqE,IAAL,CAAUC,KAAV,CAAgB,CAAhB,EAAmBhG,GAAG,GAAG0B,IAAI,CAACtD,IAA9B,CAAvB,CADL,EACkE;AAC9D,UAAI0H,MAAM,CAACA,MAAM,CAAChE,MAAP,GAAgB,CAAjB,CAAN,IAA6B,IAAjC,EACI,OAAO9B,GAAG,GAAG,CAAb;AACJ,UAAIiG,GAAG,GAAGjK,WAAW,CAAC8J,MAAD,EAAS,CAAT,EAAY1I,KAAK,CAAC8I,OAAlB,CAArB;AAAA,UAAiDC,IAAI,GAAGF,GAAG,GAAGxJ,aAAa,CAACW,KAAD,CAAnB,IAA8BX,aAAa,CAACW,KAAD,CAAnG;;AACA,WAAK,IAAIgJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAJ,IAAYL,MAAM,CAACA,MAAM,CAAChE,MAAP,GAAgB,CAAhB,GAAoBsE,CAArB,CAAN,IAAiC,GAA7D,EAAkEA,CAAC,EAAnE;AACIpG,QAAAA,GAAG;AADP;;AAEA,aAAOA,GAAP;AACH;;AACD,QAAIqG,SAAJ;;AACA,QAAIT,SAAJ,EAAe;AACX,UAAItF,IAAI,GAAGoB,IAAI,CAACqE,IAAL,CAAUC,KAAV,CAAgBhG,GAAG,GAAG0B,IAAI,CAACtD,IAAX,IAAmBH,OAAO,GAAG,CAAH,GAAO,CAAC,CAAlC,CAAhB,EAAsD+B,GAAG,GAAG0B,IAAI,CAACtD,IAAX,IAAmBH,OAAO,GAAG,CAAH,GAAO,CAAjC,CAAtD,CAAX;AACA,UAAIqI,IAAI,GAAGhG,IAAI,GAAGrE,aAAa,CAACC,WAAW,CAACoE,IAAD,EAAO,CAAP,CAAZ,CAAhB,GAAyC,CAAxD;AACA+F,MAAAA,SAAS,GAAGpI,OAAO,GAAGgE,IAAI,CAACC,GAAL,CAAS9E,KAAK,CAACuF,GAAN,CAAUb,MAAnB,EAA2B9B,GAAG,GAAGsG,IAAjC,CAAH,GAA4CrE,IAAI,CAACwD,GAAL,CAAS,CAAT,EAAYzF,GAAG,GAAGsG,IAAlB,CAA/D;AACH,KAJD,MAKK;AACDD,MAAAA,SAAS,GAAGtK,gBAAgB,CAAC2F,IAAI,CAACqE,IAAN,EAAY/F,GAAG,GAAG0B,IAAI,CAACtD,IAAvB,EAA6BH,OAA7B,CAAhB,GAAwDyD,IAAI,CAACtD,IAAzE;AACH;;AACD,QAAIiI,SAAS,IAAIrG,GAAb,IAAoB0B,IAAI,CAAC6E,MAAL,KAAgBtI,OAAO,GAAGb,KAAK,CAACuF,GAAN,CAAU6D,KAAb,GAAqB,CAA5C,CAAxB,EACIH,SAAS,IAAIpI,OAAO,GAAG,CAAH,GAAO,CAAC,CAA5B;AACJ,WAAOoI,SAAP;AACH,GAvB4D,CAAxC;AAAA,CAArB;AAwBA;AACA;AACA;AACA;;;AACA,IAAMI,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAnI,IAAI;AAAA,SAAIoH,YAAY,CAACpH,IAAD,EAAO,KAAP,EAAc,IAAd,CAAhB;AAAA,CAApC;AACA;AACA;AACA;AACA;;;AACA,IAAMoI,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAApI,IAAI;AAAA,SAAIoH,YAAY,CAACpH,IAAD,EAAO,IAAP,EAAa,IAAb,CAAhB;AAAA,CAAnC;AACA;AACA;AACA;AACA;;;AACA,IAAMqI,kBAAkB,GAAG,SAArBA,kBAAqB,CAAArI,IAAI;AAAA,SAAIoH,YAAY,CAACpH,IAAD,EAAO,KAAP,EAAc,KAAd,CAAhB;AAAA,CAA/B;AACA;AACA;AACA;;;AACA,IAAMsI,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAtI,IAAI;AAAA,SAAIoH,YAAY,CAACpH,IAAD,EAAO,IAAP,EAAa,KAAb,CAAhB;AAAA,CAA9B;;AACA,IAAMuI,aAAa,GAAG,SAAhBA,aAAgB,CAAClB,MAAD,EAAS1H,OAAT;AAAA,SAAqBoH,QAAQ,CAACM,MAAD,EAAS,UAAA5F,KAAK,EAAI;AAC7D,QAAAC,GAAG,GAAGD,KAAN;AAAA,QAAe3C,KAAf,GAAyBuI,MAAzB,CAAevI,KAAf;AAAA,QAAiCsE,IAAjC,GAAwCtE,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiB7F,GAAjB,CAAxC;AACJ,QAAI8G,UAAU,GAAG1J,KAAK,CAAC2J,eAAN,CAAsB/G,GAAtB,CAAjB;;AACA,SAAK,IAAIgH,GAAG,GAAG,IAAf,IAAuB;AACnB,UAAIhH,GAAG,KAAK/B,OAAO,GAAGyD,IAAI,CAACvD,EAAR,GAAauD,IAAI,CAACtD,IAA9B,CAAP,EAA4C;AACxC,YAAI4B,GAAG,IAAID,KAAP,IAAgB2B,IAAI,CAAC6E,MAAL,KAAgBtI,OAAO,GAAGb,KAAK,CAACuF,GAAN,CAAU6D,KAAb,GAAqB,CAA5C,CAApB,EACIxG,GAAG,IAAI/B,OAAO,GAAG,CAAH,GAAO,CAAC,CAAtB;AACJ;AACH;;AACD,UAAIqC,IAAI,GAAGvE,gBAAgB,CAAC2F,IAAI,CAACqE,IAAN,EAAY/F,GAAG,GAAG0B,IAAI,CAACtD,IAAvB,EAA6BH,OAA7B,CAAhB,GAAwDyD,IAAI,CAACtD,IAAxE;AACA,UAAI6I,QAAQ,GAAGvF,IAAI,CAACqE,IAAL,CAAUC,KAAV,CAAgB/D,IAAI,CAACC,GAAL,CAASlC,GAAT,EAAcM,IAAd,IAAsBoB,IAAI,CAACtD,IAA3C,EAAiD6D,IAAI,CAACwD,GAAL,CAASzF,GAAT,EAAcM,IAAd,IAAsBoB,IAAI,CAACtD,IAA5E,CAAf;AACA,UAAI8I,OAAO,GAAGJ,UAAU,CAACG,QAAD,CAAxB;AACA,UAAID,GAAG,IAAI,IAAP,IAAeE,OAAO,IAAIF,GAA9B,EACI;AACJ,UAAIC,QAAQ,IAAI,GAAZ,IAAmBjH,GAAG,IAAID,KAA9B,EACIiH,GAAG,GAAGE,OAAN;AACJlH,MAAAA,GAAG,GAAGM,IAAN;AACH;;AACD,WAAON,GAAP;AACH,GAnBkD,CAA7B;AAAA,CAAtB;AAoBA;AACA;AACA;AACA;AACA;;;AACA,IAAMmH,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAxB,MAAM;AAAA,SAAIkB,aAAa,CAAClB,MAAD,EAAS,KAAT,CAAjB;AAAA,CAAlC;AACA;AACA;AACA;;;AACA,IAAMyB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAzB,MAAM;AAAA,SAAIkB,aAAa,CAAClB,MAAD,EAAS,IAAT,CAAjB;AAAA,CAAjC;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAM0B,eAAe,GAAG,SAAlBA,eAAkB,CAAA/I,IAAI;AAAA,SAAI+G,QAAQ,CAAC/G,IAAD,EAAO,UAAA0B,GAAG,EAAI;AAClD,QAAIsH,OAAO,GAAGhJ,IAAI,CAACqD,YAAL,CAAkB3B,GAAlB,EAAuB7B,EAArC;AACA,QAAI6B,GAAG,GAAGsH,OAAV,EACI,OAAOA,OAAP;AACJ,WAAOrF,IAAI,CAACC,GAAL,CAAS5D,IAAI,CAAClB,KAAL,CAAWuF,GAAX,CAAeb,MAAxB,EAAgC9B,GAAG,GAAG,CAAtC,CAAP;AACH,GALuC,CAAZ;AAAA,CAA5B;AAMA;AACA;AACA;AACA;AACA;;;AACA,IAAMuH,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAjJ,IAAI;AAAA,SAAI+G,QAAQ,CAAC/G,IAAD,EAAO,UAAA0B,GAAG,EAAI;AACpD,QAAIwH,SAAS,GAAGlJ,IAAI,CAACqD,YAAL,CAAkB3B,GAAlB,EAAuB5B,IAAvC;AACA,QAAI4B,GAAG,GAAGwH,SAAV,EACI,OAAOA,SAAP;AACJ,WAAOvF,IAAI,CAACwD,GAAL,CAAS,CAAT,EAAYzF,GAAG,GAAG,CAAlB,CAAP;AACH,GALyC,CAAZ;AAAA,CAA9B;AAMA;AACA;AACA;AACA;;;AACA,IAAMyH,wBAAwB,GAAG,SAA3BA,wBAA2B,SAAyB;AAAA,MAAtBrK,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AACtD,MAAIyH,OAAO,GAAG,EAAd;;AACA,OAAK,IAAItF,GAAG,GAAG,CAAV,EAAa0H,IAAI,GAAG,EAApB,EAAwBC,IAAI,GAAGvK,KAAK,CAACuF,GAAN,CAAUgF,IAAV,EAApC,IAAwD;AACpDA,IAAAA,IAAI,CAACrH,IAAL;;AACA,QAAIqH,IAAI,CAACC,SAAL,IAAkBD,IAAI,CAACE,IAA3B,EAAiC;AAC7B,UAAIC,QAAQ,GAAGJ,IAAI,CAACK,MAAL,CAAY,MAAZ,CAAf;AACA,UAAID,QAAQ,GAAG,CAAC,CAAhB,EACIxC,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,QAAAA,IAAI,EAAE4B,GAAG,IAAI0H,IAAI,CAAC5F,MAAL,GAAcgG,QAAlB,CAAX;AAAwC3J,QAAAA,EAAE,EAAE6B;AAA5C,OAAb;AACJ,UAAI2H,IAAI,CAACE,IAAT,EACI;AACJH,MAAAA,IAAI,GAAG,EAAP;AACH,KAPD,MAQK;AACDA,MAAAA,IAAI,GAAGC,IAAI,CAACM,KAAZ;AACH;;AACDjI,IAAAA,GAAG,IAAI2H,IAAI,CAACM,KAAL,CAAWnG,MAAlB;AACH;;AACD,MAAI,CAACwD,OAAO,CAACxD,MAAb,EACI,OAAO,KAAP;AACJjE,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAa;AAAEgI,IAAAA,OAAO,EAAPA;AAAF,GAAb,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CArBD;AAsBA;AACA;AACA;AACA;;;AACA,IAAM4C,SAAS,GAAG,SAAZA,SAAY,SAAyB;AAAA,MAAtB9K,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AACvC,MAAIyH,OAAO,GAAGlI,KAAK,CAACmI,aAAN,CAAoB,UAAAvH,KAAK,EAAI;AACvC,WAAO;AAAEsH,MAAAA,OAAO,EAAE;AAAElH,QAAAA,IAAI,EAAEJ,KAAK,CAACI,IAAd;AAAoBD,QAAAA,EAAE,EAAEH,KAAK,CAACG,EAA9B;AAAkCgK,QAAAA,MAAM,EAAErM,IAAI,CAAC4B,EAAL,CAAQ,CAAC,EAAD,EAAK,EAAL,CAAR;AAA1C,OAAX;AACHM,MAAAA,KAAK,EAAEnC,eAAe,CAACqC,MAAhB,CAAuBF,KAAK,CAACI,IAA7B;AADJ,KAAP;AAEH,GAHa,CAAd;AAIAP,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAagI,OAAb,EAAsB;AAAE/H,IAAAA,cAAc,EAAE,IAAlB;AAAwBC,IAAAA,WAAW,EAAE5B,WAAW,CAAC6B,SAAZ,CAAsBC,EAAtB,CAAyB,OAAzB;AAArC,GAAtB,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CAPD;AAQA;AACA;AACA;;;AACA,IAAM0K,cAAc,GAAG,SAAjBA,cAAiB,SAAyB;AAAA,MAAtBhL,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AAC5C,MAAIyH,OAAO,GAAGlI,KAAK,CAACmI,aAAN,CAAoB,UAAAvH,KAAK,EAAI;AACvC,QAAI,CAACA,KAAK,CAACO,KAAP,IAAgBP,KAAK,CAACI,IAAN,IAAc,CAA9B,IAAmCJ,KAAK,CAACI,IAAN,IAAchB,KAAK,CAACuF,GAAN,CAAUb,MAA/D,EACI,OAAO;AAAE9D,MAAAA,KAAK,EAALA;AAAF,KAAP;AACJ,QAAIgC,GAAG,GAAGhC,KAAK,CAACI,IAAhB;AAAA,QAAsBsD,IAAI,GAAGtE,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiB7F,GAAjB,CAA7B;AACA,QAAI5B,IAAI,GAAG4B,GAAG,IAAI0B,IAAI,CAACtD,IAAZ,GAAmB4B,GAAG,GAAG,CAAzB,GAA6BjE,gBAAgB,CAAC2F,IAAI,CAACqE,IAAN,EAAY/F,GAAG,GAAG0B,IAAI,CAACtD,IAAvB,EAA6B,KAA7B,CAAhB,GAAsDsD,IAAI,CAACtD,IAAnG;AACA,QAAID,EAAE,GAAG6B,GAAG,IAAI0B,IAAI,CAACvD,EAAZ,GAAiB6B,GAAG,GAAG,CAAvB,GAA2BjE,gBAAgB,CAAC2F,IAAI,CAACqE,IAAN,EAAY/F,GAAG,GAAG0B,IAAI,CAACtD,IAAvB,EAA6B,IAA7B,CAAhB,GAAqDsD,IAAI,CAACtD,IAA9F;AACA,WAAO;AAAEkH,MAAAA,OAAO,EAAE;AAAElH,QAAAA,IAAI,EAAJA,IAAF;AAAQD,QAAAA,EAAE,EAAFA,EAAR;AAAYgK,QAAAA,MAAM,EAAE/K,KAAK,CAACuF,GAAN,CAAUqD,KAAV,CAAgBhG,GAAhB,EAAqB7B,EAArB,EAAyBkK,MAAzB,CAAgCjL,KAAK,CAACuF,GAAN,CAAUqD,KAAV,CAAgB5H,IAAhB,EAAsB4B,GAAtB,CAAhC;AAApB,OAAX;AACHhC,MAAAA,KAAK,EAAEnC,eAAe,CAACqC,MAAhB,CAAuBC,EAAvB;AADJ,KAAP;AAEH,GARa,CAAd;AASA,MAAImH,OAAO,CAACA,OAAR,CAAgB/G,KAApB,EACI,OAAO,KAAP;AACJV,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAagI,OAAb,EAAsB;AAAE/H,IAAAA,cAAc,EAAE;AAAlB,GAAtB,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CAdD;;AAeA,SAASuH,kBAAT,CAA4B1H,KAA5B,EAAmC;AAC/B,MAAIkL,MAAM,GAAG,EAAb;AAAA,MAAiBC,IAAI,GAAG,CAAC,CAAzB;;AAD+B,6CAEbnL,KAAK,CAACC,SAAN,CAAgBL,MAFH;AAAA;;AAAA;AAE/B,wDAA0C;AAAA,UAAjCgB,KAAiC;AACtC,UAAIwK,SAAS,GAAGpL,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiB7H,KAAK,CAACI,IAAvB,CAAhB;AAAA,UAA8CqK,OAAO,GAAGrL,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiB7H,KAAK,CAACG,EAAvB,CAAxD;AACA,UAAIoK,IAAI,IAAIC,SAAS,CAACjC,MAAtB,EACI+B,MAAM,CAACA,MAAM,CAACxG,MAAP,GAAgB,CAAjB,CAAN,CAA0B3D,EAA1B,GAA+BsK,OAAO,CAACtK,EAAvC,CADJ,KAGImK,MAAM,CAACN,IAAP,CAAY;AAAE5J,QAAAA,IAAI,EAAEoK,SAAS,CAACpK,IAAlB;AAAwBD,QAAAA,EAAE,EAAEsK,OAAO,CAACtK;AAApC,OAAZ;AACJoK,MAAAA,IAAI,GAAGE,OAAO,CAAClC,MAAf;AACH;AAT8B;AAAA;AAAA;AAAA;AAAA;;AAU/B,SAAO+B,MAAP;AACH;;AACD,SAASI,QAAT,CAAkBtL,KAAlB,EAAyBS,QAAzB,EAAmCI,OAAnC,EAA4C;AACxC,MAAIqH,OAAO,GAAG,EAAd;;AADwC,8CAEtBR,kBAAkB,CAAC1H,KAAD,CAFI;AAAA;;AAAA;AAExC,2DAA6C;AAAA,UAApCuL,KAAoC;AACzC,UAAI1K,OAAO,GAAG0K,KAAK,CAACxK,EAAN,IAAYf,KAAK,CAACuF,GAAN,CAAUb,MAAzB,GAAkC6G,KAAK,CAACvK,IAAN,IAAc,CAA3D,EACI;AACJ,UAAIwK,QAAQ,GAAGxL,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiB5H,OAAO,GAAG0K,KAAK,CAACxK,EAAN,GAAW,CAAd,GAAkBwK,KAAK,CAACvK,IAAN,GAAa,CAAvD,CAAf;AACA,UAAIH,OAAJ,EACIqH,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,QAAAA,IAAI,EAAEuK,KAAK,CAACxK,EAAd;AAAkBA,QAAAA,EAAE,EAAEyK,QAAQ,CAACzK;AAA/B,OAAb,EAAkD;AAAEC,QAAAA,IAAI,EAAEuK,KAAK,CAACvK,IAAd;AAAoB+J,QAAAA,MAAM,EAAES,QAAQ,CAAC7C,IAAT,GAAgB3I,KAAK,CAACwK;AAAlD,OAAlD,EADJ,KAGItC,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,QAAAA,IAAI,EAAEwK,QAAQ,CAACxK,IAAjB;AAAuBD,QAAAA,EAAE,EAAEwK,KAAK,CAACvK;AAAjC,OAAb,EAAsD;AAAEA,QAAAA,IAAI,EAAEuK,KAAK,CAACxK,EAAd;AAAkBgK,QAAAA,MAAM,EAAE/K,KAAK,CAACwK,SAAN,GAAkBgB,QAAQ,CAAC7C;AAArD,OAAtD;AACP;AAVuC;AAAA;AAAA;AAAA;AAAA;;AAWxC,MAAI,CAACT,OAAO,CAACxD,MAAb,EACI,OAAO,KAAP;AACJjE,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAa;AAAEgI,IAAAA,OAAO,EAAPA,OAAF;AAAW/H,IAAAA,cAAc,EAAE;AAA3B,GAAb,CAAD,CAAR;AACA,SAAO,IAAP;AACH;AACD;AACA;AACA;;;AACA,IAAMsL,UAAU,GAAG,SAAbA,UAAa;AAAA,MAAGzL,KAAH,UAAGA,KAAH;AAAA,MAAUS,QAAV,UAAUA,QAAV;AAAA,SAAyB6K,QAAQ,CAACtL,KAAD,EAAQS,QAAR,EAAkB,KAAlB,CAAjC;AAAA,CAAnB;AACA;AACA;AACA;;;AACA,IAAMiL,YAAY,GAAG,SAAfA,YAAe;AAAA,MAAG1L,KAAH,UAAGA,KAAH;AAAA,MAAUS,QAAV,UAAUA,QAAV;AAAA,SAAyB6K,QAAQ,CAACtL,KAAD,EAAQS,QAAR,EAAkB,IAAlB,CAAjC;AAAA,CAArB;;AACA,SAASkL,QAAT,CAAkB3L,KAAlB,EAAyBS,QAAzB,EAAmCI,OAAnC,EAA4C;AACxC,MAAIqH,OAAO,GAAG,EAAd;;AADwC,8CAEtBR,kBAAkB,CAAC1H,KAAD,CAFI;AAAA;;AAAA;AAExC,2DAA6C;AAAA,UAApCuL,KAAoC;AACzC,UAAI1K,OAAJ,EACIqH,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,QAAAA,IAAI,EAAEuK,KAAK,CAACvK,IAAd;AAAoB+J,QAAAA,MAAM,EAAE/K,KAAK,CAACuF,GAAN,CAAUqD,KAAV,CAAgB2C,KAAK,CAACvK,IAAtB,EAA4BuK,KAAK,CAACxK,EAAlC,IAAwCf,KAAK,CAACwK;AAA1E,OAAb,EADJ,KAGItC,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,QAAAA,IAAI,EAAEuK,KAAK,CAACxK,EAAd;AAAkBgK,QAAAA,MAAM,EAAE/K,KAAK,CAACwK,SAAN,GAAkBxK,KAAK,CAACuF,GAAN,CAAUqD,KAAV,CAAgB2C,KAAK,CAACvK,IAAtB,EAA4BuK,KAAK,CAACxK,EAAlC;AAA5C,OAAb;AACP;AAPuC;AAAA;AAAA;AAAA;AAAA;;AAQxCN,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAa;AAAEgI,IAAAA,OAAO,EAAPA,OAAF;AAAW/H,IAAAA,cAAc,EAAE;AAA3B,GAAb,CAAD,CAAR;AACA,SAAO,IAAP;AACH;AACD;AACA;AACA;;;AACA,IAAMyL,UAAU,GAAG,SAAbA,UAAa;AAAA,MAAG5L,KAAH,UAAGA,KAAH;AAAA,MAAUS,QAAV,UAAUA,QAAV;AAAA,SAAyBkL,QAAQ,CAAC3L,KAAD,EAAQS,QAAR,EAAkB,KAAlB,CAAjC;AAAA,CAAnB;AACA;AACA;AACA;;;AACA,IAAMoL,YAAY,GAAG,SAAfA,YAAe;AAAA,MAAG7L,KAAH,UAAGA,KAAH;AAAA,MAAUS,QAAV,UAAUA,QAAV;AAAA,SAAyBkL,QAAQ,CAAC3L,KAAD,EAAQS,QAAR,EAAkB,IAAlB,CAAjC;AAAA,CAArB;AACA;AACA;AACA;;;AACA,IAAMqL,UAAU,GAAG,SAAbA,UAAa,CAAA5K,IAAI,EAAI;AACnB,MAAElB,KAAF,GAAYkB,IAAZ,CAAElB,KAAF;AAAA,MAAkBkI,OAAlB,GAA4BlI,KAAK,CAACkI,OAAN,CAAcR,kBAAkB,CAAC1H,KAAD,CAAlB,CAA0BH,GAA1B,CAA8B,kBAAkB;AAAA,QAAfmB,IAAe,UAAfA,IAAe;AAAA,QAATD,EAAS,UAATA,EAAS;AAC1F,QAAIC,IAAI,GAAG,CAAX,EACIA,IAAI,GADR,KAEK,IAAID,EAAE,GAAGf,KAAK,CAACuF,GAAN,CAAUb,MAAnB,EACD3D,EAAE;AACN,WAAO;AAAEC,MAAAA,IAAI,EAAJA,IAAF;AAAQD,MAAAA,EAAE,EAAFA;AAAR,KAAP;AACH,GAN6C,CAAd,CAA5B;AAOJ,MAAId,SAAS,GAAGT,SAAS,CAACQ,KAAK,CAACC,SAAP,EAAkB,UAAAW,KAAK;AAAA,WAAIM,IAAI,CAAC2C,cAAL,CAAoBjD,KAApB,EAA2B,IAA3B,CAAJ;AAAA,GAAvB,CAAT,CAAsEf,GAAtE,CAA0EqI,OAA1E,CAAhB;AACAhH,EAAAA,IAAI,CAACT,QAAL,CAAc;AAAEyH,IAAAA,OAAO,EAAPA,OAAF;AAAWjI,IAAAA,SAAS,EAATA,SAAX;AAAsBE,IAAAA,cAAc,EAAE;AAAtC,GAAd;AACA,SAAO,IAAP;AACH,CAXD;AAYA;AACA;AACA;;;AACA,IAAM4L,aAAa,GAAG,SAAhBA,aAAgB,SAAyB;AAAA,MAAtB/L,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AAC3CA,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAaF,KAAK,CAACgM,gBAAN,CAAuBhM,KAAK,CAACwK,SAA7B,CAAb,EAAsD;AAAErK,IAAAA,cAAc,EAAE;AAAlB,GAAtD,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CAHD;;AAIA,SAAS8L,iBAAT,CAA2BjM,KAA3B,EAAkC4C,GAAlC,EAAuC;AACnC,MAAI,iBAAiBL,IAAjB,CAAsBvC,KAAK,CAACwC,QAAN,CAAeI,GAAG,GAAG,CAArB,EAAwBA,GAAG,GAAG,CAA9B,CAAtB,CAAJ,EACI,OAAO;AAAE5B,IAAAA,IAAI,EAAE4B,GAAR;AAAa7B,IAAAA,EAAE,EAAE6B;AAAjB,GAAP;AACJ,MAAIiF,OAAO,GAAGvI,UAAU,CAACU,KAAD,CAAV,CAAkB6C,OAAlB,CAA0BD,GAA1B,CAAd;AACA,MAAI8F,MAAM,GAAGb,OAAO,CAACzE,WAAR,CAAoBR,GAApB,CAAb;AAAA,MAAuCsJ,KAAK,GAAGrE,OAAO,CAAC1E,UAAR,CAAmBP,GAAnB,CAA/C;AAAA,MAAwEG,QAAxE;AACA,MAAI2F,MAAM,IAAIwD,KAAV,IAAmBxD,MAAM,CAAC3H,EAAP,IAAa6B,GAAhC,IAAuCsJ,KAAK,CAAClL,IAAN,IAAc4B,GAArD,KACCG,QAAQ,GAAG2F,MAAM,CAACtG,IAAP,CAAYC,IAAZ,CAAiB9C,QAAQ,CAACwD,QAA1B,CADZ,KACoDA,QAAQ,CAACoJ,OAAT,CAAiBD,KAAK,CAACE,IAAvB,IAA+B,CAAC,CADpF,IAEApM,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiBC,MAAM,CAAC3H,EAAxB,EAA4BC,IAA5B,IAAoChB,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiByD,KAAK,CAAClL,IAAvB,EAA6BA,IAFrE,EAGI,OAAO;AAAEA,IAAAA,IAAI,EAAE0H,MAAM,CAAC3H,EAAf;AAAmBA,IAAAA,EAAE,EAAEmL,KAAK,CAAClL;AAA7B,GAAP;AACJ,SAAO,IAAP;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMqL,sBAAsB,GAAG,SAAzBA,sBAAyB,SAAyB;AAAA,MAAtBrM,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AACpD,MAAIyH,OAAO,GAAGlI,KAAK,CAACmI,aAAN,CAAoB,kBAAkB;AAAA,QAAfnH,IAAe,UAAfA,IAAe;AAAA,QAATD,EAAS,UAATA,EAAS;AAChD,QAAIuL,OAAO,GAAGtL,IAAI,IAAID,EAAR,IAAckL,iBAAiB,CAACjM,KAAD,EAAQgB,IAAR,CAA7C;AACA,QAAIuL,EAAE,GAAG,IAAItN,aAAJ,CAAkBe,KAAlB,EAAyB;AAAEwM,MAAAA,aAAa,EAAExL,IAAjB;AAAuByL,MAAAA,mBAAmB,EAAE,CAAC,CAACH;AAA9C,KAAzB,CAAT;AACA,QAAII,MAAM,GAAGxN,cAAc,CAACqN,EAAD,EAAKvL,IAAL,CAA3B;AACA,QAAI0L,MAAM,IAAI,IAAd,EACIA,MAAM,GAAG,OAAO9H,IAAP,CAAY5E,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiBzH,IAAjB,EAAuB2H,IAAnC,EAAyC,CAAzC,EAA4CjE,MAArD;AACJ,QAAIJ,IAAI,GAAGtE,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiBzH,IAAjB,CAAX;;AACA,WAAOD,EAAE,GAAGuD,IAAI,CAACvD,EAAV,IAAgB,KAAKwB,IAAL,CAAU+B,IAAI,CAACqE,IAAL,CAAUC,KAAV,CAAgB7H,EAAE,GAAGuD,IAAI,CAACtD,IAA1B,EAAgCD,EAAE,GAAG,CAAL,GAASuD,IAAI,CAACtD,IAA9C,CAAV,CAAvB;AACID,MAAAA,EAAE;AADN;;AAEA,QAAIuL,OAAJ;AACOtL,MAAAA,IADP,GACoBsL,OADpB,CACOtL,IADP;AACaD,MAAAA,EADb,GACoBuL,OADpB,CACavL,EADb;AAAA,WAEK,IAAIC,IAAI,GAAGsD,IAAI,CAACtD,IAAZ,IAAoBA,IAAI,GAAGsD,IAAI,CAACtD,IAAL,GAAY,GAAvC,IAA8C,CAAC,KAAKuB,IAAL,CAAU+B,IAAI,CAACqE,IAAL,CAAUC,KAAV,CAAgB,CAAhB,EAAmB5H,IAAnB,CAAV,CAAnD,EACDA,IAAI,GAAGsD,IAAI,CAACtD,IAAZ;;AACJ,QAAI+J,MAAM,GAAG,CAAC,EAAD,EAAK5L,YAAY,CAACa,KAAD,EAAQ0M,MAAR,CAAjB,CAAb;AACA,QAAIJ,OAAJ,EACIvB,MAAM,CAACH,IAAP,CAAYzL,YAAY,CAACa,KAAD,EAAQuM,EAAE,CAACI,UAAH,CAAcrI,IAAd,CAAR,CAAxB;AACJ,WAAO;AAAE4D,MAAAA,OAAO,EAAE;AAAElH,QAAAA,IAAI,EAAJA,IAAF;AAAQD,QAAAA,EAAE,EAAFA,EAAR;AAAYgK,QAAAA,MAAM,EAAErM,IAAI,CAAC4B,EAAL,CAAQyK,MAAR;AAApB,OAAX;AACHnK,MAAAA,KAAK,EAAEnC,eAAe,CAACqC,MAAhB,CAAuBE,IAAI,GAAG,CAAP,GAAW+J,MAAM,CAAC,CAAD,CAAN,CAAUrG,MAA5C;AADJ,KAAP;AAEH,GAlBa,CAAd;AAmBAjE,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAagI,OAAb,EAAsB;AAAE/H,IAAAA,cAAc,EAAE;AAAlB,GAAtB,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CAtBD;;AAuBA,SAASyM,oBAAT,CAA8B5M,KAA9B,EAAqC6M,CAArC,EAAwC;AACpC,MAAIC,MAAM,GAAG,CAAC,CAAd;AACA,SAAO9M,KAAK,CAACmI,aAAN,CAAoB,UAAAvH,KAAK,EAAI;AAChC,QAAIsH,OAAO,GAAG,EAAd;;AACA,SAAK,IAAItF,GAAG,GAAGhC,KAAK,CAACI,IAArB,EAA2B4B,GAAG,IAAIhC,KAAK,CAACG,EAAxC,GAA6C;AACzC,UAAIuD,IAAI,GAAGtE,KAAK,CAACuF,GAAN,CAAUkD,MAAV,CAAiB7F,GAAjB,CAAX;;AACA,UAAI0B,IAAI,CAAC6E,MAAL,GAAc2D,MAAd,KAAyBlM,KAAK,CAACO,KAAN,IAAeP,KAAK,CAACG,EAAN,GAAWuD,IAAI,CAACtD,IAAxD,CAAJ,EAAmE;AAC/D6L,QAAAA,CAAC,CAACvI,IAAD,EAAO4D,OAAP,EAAgBtH,KAAhB,CAAD;AACAkM,QAAAA,MAAM,GAAGxI,IAAI,CAAC6E,MAAd;AACH;;AACDvG,MAAAA,GAAG,GAAG0B,IAAI,CAACvD,EAAL,GAAU,CAAhB;AACH;;AACD,QAAIgM,SAAS,GAAG/M,KAAK,CAACkI,OAAN,CAAcA,OAAd,CAAhB;AACA,WAAO;AAAEA,MAAAA,OAAO,EAAPA,OAAF;AACHtH,MAAAA,KAAK,EAAEnC,eAAe,CAACmC,KAAhB,CAAsBmM,SAAS,CAACC,MAAV,CAAiBpM,KAAK,CAAC4E,MAAvB,EAA+B,CAA/B,CAAtB,EAAyDuH,SAAS,CAACC,MAAV,CAAiBpM,KAAK,CAACkC,IAAvB,EAA6B,CAA7B,CAAzD;AADJ,KAAP;AAEH,GAbM,CAAP;AAcH;AACD;AACA;AACA;AACA;AACA;;;AACA,IAAMmK,eAAe,GAAG,SAAlBA,eAAkB,SAAyB;AAAA,MAAtBjN,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AAC7C,MAAIyM,OAAO,GAAGC,MAAM,CAACxN,MAAP,CAAc,IAAd,CAAd;AACA,MAAIkI,OAAO,GAAG,IAAI5I,aAAJ,CAAkBe,KAAlB,EAAyB;AAAEoN,IAAAA,mBAAmB,EAAE,6BAAAzK,KAAK,EAAI;AAC/D,UAAI0C,KAAK,GAAG6H,OAAO,CAACvK,KAAD,CAAnB;AACA,aAAO0C,KAAK,IAAI,IAAT,GAAgB,CAAC,CAAjB,GAAqBA,KAA5B;AACH;AAHkC,GAAzB,CAAd;AAIA,MAAI6C,OAAO,GAAG0E,oBAAoB,CAAC5M,KAAD,EAAQ,UAACsE,IAAD,EAAO4D,OAAP,EAAgBtH,KAAhB,EAA0B;AAChE,QAAI8L,MAAM,GAAGxN,cAAc,CAAC2I,OAAD,EAAUvD,IAAI,CAACtD,IAAf,CAA3B;AACA,QAAI0L,MAAM,IAAI,IAAd,EACI;AACJ,QAAI1E,GAAG,GAAG,OAAOpD,IAAP,CAAYN,IAAI,CAACqE,IAAjB,EAAuB,CAAvB,CAAV;AACA,QAAI0E,IAAI,GAAGlO,YAAY,CAACa,KAAD,EAAQ0M,MAAR,CAAvB;;AACA,QAAI1E,GAAG,IAAIqF,IAAP,IAAezM,KAAK,CAACI,IAAN,GAAasD,IAAI,CAACtD,IAAL,GAAYgH,GAAG,CAACtD,MAAhD,EAAwD;AACpDwI,MAAAA,OAAO,CAAC5I,IAAI,CAACtD,IAAN,CAAP,GAAqB0L,MAArB;AACAxE,MAAAA,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,QAAAA,IAAI,EAAEsD,IAAI,CAACtD,IAAb;AAAmBD,QAAAA,EAAE,EAAEuD,IAAI,CAACtD,IAAL,GAAYgH,GAAG,CAACtD,MAAvC;AAA+CqG,QAAAA,MAAM,EAAEsC;AAAvD,OAAb;AACH;AACJ,GAViC,CAAlC;AAWA,MAAI,CAACnF,OAAO,CAACA,OAAR,CAAgB/G,KAArB,EACIV,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAagI,OAAb,CAAD,CAAR;AACJ,SAAO,IAAP;AACH,CApBD;AAqBA;AACA;AACA;AACA;;;AACA,IAAMoF,UAAU,GAAG,SAAbA,UAAa,SAAyB;AAAA,MAAtBtN,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AACxCA,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAa0M,oBAAoB,CAAC5M,KAAD,EAAQ,UAACsE,IAAD,EAAO4D,OAAP,EAAmB;AACjEA,IAAAA,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,MAAAA,IAAI,EAAEsD,IAAI,CAACtD,IAAb;AAAmB+J,MAAAA,MAAM,EAAE/K,KAAK,CAACuN,KAAN,CAAYnO,UAAZ;AAA3B,KAAb;AACH,GAFyC,CAAjC,CAAD,CAAR;AAGA,SAAO,IAAP;AACH,CALD;AAMA;AACA;AACA;AACA;;;AACA,IAAMoO,UAAU,GAAG,SAAbA,UAAa,SAAyB;AAAA,MAAtBxN,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AACxCA,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAa0M,oBAAoB,CAAC5M,KAAD,EAAQ,UAACsE,IAAD,EAAO4D,OAAP,EAAmB;AACjE,QAAIvD,KAAK,GAAG,OAAOC,IAAP,CAAYN,IAAI,CAACqE,IAAjB,EAAuB,CAAvB,CAAZ;AACA,QAAI,CAAChE,KAAL,EACI;AACJ,QAAIkE,GAAG,GAAGjK,WAAW,CAAC+F,KAAD,EAAQ,CAAR,EAAW3E,KAAK,CAAC8I,OAAjB,CAArB;AAAA,QAAgD2E,IAAI,GAAG,CAAvD;AACA,QAAI1C,MAAM,GAAG5L,YAAY,CAACa,KAAD,EAAQ6E,IAAI,CAACwD,GAAL,CAAS,CAAT,EAAYQ,GAAG,GAAGxJ,aAAa,CAACW,KAAD,CAA/B,CAAR,CAAzB;;AACA,WAAOyN,IAAI,GAAG9I,KAAK,CAACD,MAAb,IAAuB+I,IAAI,GAAG1C,MAAM,CAACrG,MAArC,IAA+CC,KAAK,CAAC+I,UAAN,CAAiBD,IAAjB,KAA0B1C,MAAM,CAAC2C,UAAP,CAAkBD,IAAlB,CAAhF;AACIA,MAAAA,IAAI;AADR;;AAEAvF,IAAAA,OAAO,CAAC0C,IAAR,CAAa;AAAE5J,MAAAA,IAAI,EAAEsD,IAAI,CAACtD,IAAL,GAAYyM,IAApB;AAA0B1M,MAAAA,EAAE,EAAEuD,IAAI,CAACtD,IAAL,GAAY2D,KAAK,CAACD,MAAhD;AAAwDqG,MAAAA,MAAM,EAAEA,MAAM,CAACnC,KAAP,CAAa6E,IAAb;AAAhE,KAAb;AACH,GATyC,CAAjC,CAAD,CAAR;AAUA,SAAO,IAAP;AACH,CAZD;AAaA;AACA;AACA;AACA;AACA;;;AACA,IAAME,SAAS,GAAG,SAAZA,SAAY,SAAyB;AAAA,MAAtB3N,KAAsB,UAAtBA,KAAsB;AAAA,MAAfS,QAAe,UAAfA,QAAe;AACvC,MAAIT,KAAK,CAACC,SAAN,CAAgBL,MAAhB,CAAuBgO,IAAvB,CAA4B,UAAAC,CAAC;AAAA,WAAI,CAACA,CAAC,CAAC1M,KAAP;AAAA,GAA7B,CAAJ,EACI,OAAOmM,UAAU,CAAC;AAAEtN,IAAAA,KAAK,EAALA,KAAF;AAASS,IAAAA,QAAQ,EAARA;AAAT,GAAD,CAAjB;AACJA,EAAAA,QAAQ,CAACT,KAAK,CAACE,MAAN,CAAaF,KAAK,CAACgM,gBAAN,CAAuB,IAAvB,CAAb,EAA2C;AAAE7L,IAAAA,cAAc,EAAE,IAAlB;AAAwBC,IAAAA,WAAW,EAAE5B,WAAW,CAAC6B,SAAZ,CAAsBC,EAAtB,CAAyB,OAAzB;AAArC,GAA3C,CAAD,CAAR;AACA,SAAO,IAAP;AACH,CALD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMwN,gBAAgB,GAAG,CACrB;AAAEC,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAE3M,cAAtB;AAAsC4M,EAAAA,KAAK,EAAEnI,cAA7C;AAA6DoI,EAAAA,cAAc,EAAE;AAA7E,CADqB,EAErB;AAAEH,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAExM,eAAtB;AAAuCyM,EAAAA,KAAK,EAAElI;AAA9C,CAFqB,EAGrB;AAAEgI,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAElK,YAAtB;AAAoCmK,EAAAA,KAAK,EAAEvH;AAA3C,CAHqB,EAIrB;AAAEqH,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAEjK,cAAtB;AAAsCkK,EAAAA,KAAK,EAAEtH;AAA7C,CAJqB,EAKrB;AAAEoH,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAE/I,eAAtB;AAAuCgJ,EAAAA,KAAK,EAAEhH;AAA9C,CALqB,EAMrB;AAAE8G,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAE9I,aAAtB;AAAqC+I,EAAAA,KAAK,EAAE/G;AAA5C,CANqB,EAOrB;AAAE6G,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAExE;AAAtB,CAPqB,EAQrB;AAAEuE,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAEzE;AAAtB,CARqB,EASrB;AAAEwE,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAE/D;AAAtB,CATqB,EAUrB;AAAE8D,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAEhE;AAArB,CAVqB,EAWrB;AAAE+D,EAAAA,GAAG,EAAE,YAAP;AAAqBC,EAAAA,GAAG,EAAEjE;AAA1B,CAXqB,EAYrB;AAAEgE,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAElD;AAAtB,CAZqB,EAarB;AAAEiD,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAEhD;AAAtB,CAbqB,EAcrB;AAAE+C,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAEjM,kBAArB;AAAyCkM,EAAAA,KAAK,EAAE5H;AAAhD,CAdqB,EAerB;AAAE0H,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAEhM,mBAArB;AAA0CiM,EAAAA,KAAK,EAAE3H;AAAjD,CAfqB,EAgBrB;AAAEyH,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAE7G;AAArB,CAhBqB,EAiBrB;AAAE4G,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAE5G;AAArB,CAjBqB,EAkBrB;AAAE2G,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAE5J;AAAtB,CAlBqB,EAmBrB;AAAE2J,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAE7J;AAArB,CAnBqB,CAAzB;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMgK,cAAc,GAAG,aAAa,CAChC;AAAEJ,EAAAA,GAAG,EAAE,WAAP;AAAoBC,EAAAA,GAAG,EAAE3M,cAAzB;AAAyC4M,EAAAA,KAAK,EAAEnI;AAAhD,CADgC,EAEhC;AAAEiI,EAAAA,GAAG,EAAE,eAAP;AAAwBK,EAAAA,GAAG,EAAE,eAA7B;AAA8CJ,EAAAA,GAAG,EAAEnM,eAAnD;AAAoEoM,EAAAA,KAAK,EAAE9H;AAA3E,CAFgC,EAGhC;AAAEiI,EAAAA,GAAG,EAAE,eAAP;AAAwBJ,EAAAA,GAAG,EAAEhJ,0BAA7B;AAAyDiJ,EAAAA,KAAK,EAAEjH;AAAhE,CAHgC,EAIhC;AAAE+G,EAAAA,GAAG,EAAE,YAAP;AAAqBC,EAAAA,GAAG,EAAExM,eAA1B;AAA2CyM,EAAAA,KAAK,EAAElI;AAAlD,CAJgC,EAKhC;AAAEgI,EAAAA,GAAG,EAAE,gBAAP;AAAyBK,EAAAA,GAAG,EAAE,gBAA9B;AAAgDJ,EAAAA,GAAG,EAAElM,gBAArD;AAAuEmM,EAAAA,KAAK,EAAE7H;AAA9E,CALgC,EAMhC;AAAEgI,EAAAA,GAAG,EAAE,gBAAP;AAAyBJ,EAAAA,GAAG,EAAEjJ,yBAA9B;AAAyDkJ,EAAAA,KAAK,EAAElH;AAAhE,CANgC,EAOhC;AAAEgH,EAAAA,GAAG,EAAE,SAAP;AAAkBC,EAAAA,GAAG,EAAElK,YAAvB;AAAqCmK,EAAAA,KAAK,EAAEvH;AAA5C,CAPgC,EAQhC;AAAE0H,EAAAA,GAAG,EAAE,aAAP;AAAsBJ,EAAAA,GAAG,EAAE7G,cAA3B;AAA2C8G,EAAAA,KAAK,EAAE5G;AAAlD,CARgC,EAShC;AAAE+G,EAAAA,GAAG,EAAE,cAAP;AAAuBJ,EAAAA,GAAG,EAAE7J,YAA5B;AAA0C8J,EAAAA,KAAK,EAAEpH;AAAjD,CATgC,EAUhC;AAAEkH,EAAAA,GAAG,EAAE,WAAP;AAAoBC,EAAAA,GAAG,EAAEjK,cAAzB;AAAyCkK,EAAAA,KAAK,EAAEtH;AAAhD,CAVgC,EAWhC;AAAEyH,EAAAA,GAAG,EAAE,eAAP;AAAwBJ,EAAAA,GAAG,EAAE5G,YAA7B;AAA2C6G,EAAAA,KAAK,EAAE1G;AAAlD,CAXgC,EAYhC;AAAE6G,EAAAA,GAAG,EAAE,gBAAP;AAAyBJ,EAAAA,GAAG,EAAE5J,cAA9B;AAA8C6J,EAAAA,KAAK,EAAEnH;AAArD,CAZgC,EAahC;AAAEiH,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAE7J,YAAtB;AAAoC8J,EAAAA,KAAK,EAAEpH;AAA3C,CAbgC,EAchC;AAAEkH,EAAAA,GAAG,EAAE,UAAP;AAAmBC,EAAAA,GAAG,EAAE5J,cAAxB;AAAwC6J,EAAAA,KAAK,EAAEnH;AAA/C,CAdgC,EAehC;AAAEiH,EAAAA,GAAG,EAAE,MAAP;AAAeC,EAAAA,GAAG,EAAEhJ,0BAApB;AAAgDiJ,EAAAA,KAAK,EAAEjH;AAAvD,CAfgC,EAgBhC;AAAE+G,EAAAA,GAAG,EAAE,UAAP;AAAmBC,EAAAA,GAAG,EAAE7G,cAAxB;AAAwC8G,EAAAA,KAAK,EAAE5G;AAA/C,CAhBgC,EAiBhC;AAAE0G,EAAAA,GAAG,EAAE,KAAP;AAAcC,EAAAA,GAAG,EAAEjJ,yBAAnB;AAA8CkJ,EAAAA,KAAK,EAAElH;AAArD,CAjBgC,EAkBhC;AAAEgH,EAAAA,GAAG,EAAE,SAAP;AAAkBC,EAAAA,GAAG,EAAE5G,YAAvB;AAAqC6G,EAAAA,KAAK,EAAE1G;AAA5C,CAlBgC,EAmBhC;AAAEwG,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAE3B;AAArB,CAnBgC,EAoBhC;AAAE0B,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAExG;AAArB,CApBgC,EAqBhC;AAAEuG,EAAAA,GAAG,EAAE,WAAP;AAAoBC,EAAAA,GAAG,EAAE3E,uBAAzB;AAAkD4E,EAAAA,KAAK,EAAE5E;AAAzD,CArBgC,EAsBhC;AAAE0E,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAExE,iBAAtB;AAAyCyE,EAAAA,KAAK,EAAEzE;AAAhD,CAtBgC,EAuBhC;AAAEuE,EAAAA,GAAG,EAAE,eAAP;AAAwBK,EAAAA,GAAG,EAAE,eAA7B;AAA8CJ,EAAAA,GAAG,EAAEjE;AAAnD,CAvBgC,EAwBhC;AAAEgE,EAAAA,GAAG,EAAE,YAAP;AAAqBK,EAAAA,GAAG,EAAE,YAA1B;AAAwCJ,EAAAA,GAAG,EAAEhE;AAA7C,CAxBgC,EAyBhC;AAAEoE,EAAAA,GAAG,EAAE,eAAP;AAAwBJ,EAAAA,GAAG,EAAE7D;AAA7B,CAzBgC,EA0BhC;AAAEiE,EAAAA,GAAG,EAAE,YAAP;AAAqBJ,EAAAA,GAAG,EAAE/D;AAA1B,CA1BgC,EA2BlCoE,MA3BkC,EA2B3B,aAAaP,gBAAgB,CAACjO,GAAjB,CAAqB,UAAAyO,CAAC;AAAA,SAAK;AAAEF,IAAAA,GAAG,EAAEE,CAAC,CAACP,GAAT;AAAcC,IAAAA,GAAG,EAAEM,CAAC,CAACN,GAArB;AAA0BC,IAAAA,KAAK,EAAEK,CAAC,CAACL;AAAnC,GAAL;AAAA,CAAtB,CA3Bc,CAApC;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMM,aAAa,GAAG,aAAa,CAC/B;AAAER,EAAAA,GAAG,EAAE,eAAP;AAAwBK,EAAAA,GAAG,EAAE,gBAA7B;AAA+CJ,EAAAA,GAAG,EAAEtK,gBAApD;AAAsEuK,EAAAA,KAAK,EAAE1H;AAA7E,CAD+B,EAE/B;AAAEwH,EAAAA,GAAG,EAAE,gBAAP;AAAyBK,EAAAA,GAAG,EAAE,iBAA9B;AAAiDJ,EAAAA,GAAG,EAAErK,iBAAtD;AAAyEsK,EAAAA,KAAK,EAAEzH;AAAhF,CAF+B,EAG/B;AAAEuH,EAAAA,GAAG,EAAE,aAAP;AAAsBC,EAAAA,GAAG,EAAEvC;AAA3B,CAH+B,EAI/B;AAAEsC,EAAAA,GAAG,EAAE,mBAAP;AAA4BC,EAAAA,GAAG,EAAEpC;AAAjC,CAJ+B,EAK/B;AAAEmC,EAAAA,GAAG,EAAE,eAAP;AAAwBC,EAAAA,GAAG,EAAEtC;AAA7B,CAL+B,EAM/B;AAAEqC,EAAAA,GAAG,EAAE,qBAAP;AAA8BC,EAAAA,GAAG,EAAEnC;AAAnC,CAN+B,EAO/B;AAAEkC,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,GAAG,EAAEjG;AAAtB,CAP+B,EAQ/B;AAAEgG,EAAAA,GAAG,EAAE,OAAP;AAAgBK,EAAAA,GAAG,EAAE,QAArB;AAA+BJ,EAAAA,GAAG,EAAEvG;AAApC,CAR+B,EAS/B;AAAEsG,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAErG,kBAArB;AAAyCuG,EAAAA,cAAc,EAAE;AAAzD,CAT+B,EAU/B;AAAEH,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAER;AAArB,CAV+B,EAW/B;AAAEO,EAAAA,GAAG,EAAE,OAAP;AAAgBC,EAAAA,GAAG,EAAEV;AAArB,CAX+B,EAY/B;AAAES,EAAAA,GAAG,EAAE,YAAP;AAAqBC,EAAAA,GAAG,EAAEf;AAA1B,CAZ+B,EAa/B;AAAEc,EAAAA,GAAG,EAAE,aAAP;AAAsBC,EAAAA,GAAG,EAAElC;AAA3B,CAb+B,EAc/B;AAAEiC,EAAAA,GAAG,EAAE,cAAP;AAAuBC,EAAAA,GAAG,EAAEvI;AAA5B,CAd+B,EAejC4I,MAfiC,CAe1BF,cAf0B,CAAnC;AAgBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMK,iBAAiB,GAAG;AAAET,EAAAA,GAAG,EAAE,KAAP;AAAcC,EAAAA,GAAG,EAAEL,SAAnB;AAA8BM,EAAAA,KAAK,EAAEhB;AAArC,CAA1B;AAEA,SAASpB,YAAT,EAAuBD,UAAvB,EAAmClK,kBAAnC,EAAuDD,iBAAvD,EAA0EJ,cAA1E,EAA0FG,eAA1F,EAA2G4F,YAA3G,EAAyHD,cAAzH,EAAyInF,mBAAzI,EAA8JD,kBAA9J,EAAkLF,eAAlL,EAAmMC,gBAAnM,EAAqNkD,0BAArN,EAAiPD,yBAAjP,EAA4QhB,cAA5Q,EAA4RmB,aAA5R,EAA2SD,eAA3S,EAA4TnB,YAA5T,EAA0U2B,qBAA1U,EAAiWrB,cAAjW,EAAiXD,YAAjX,EAA+XT,gBAA/X,EAAiZC,iBAAjZ,EAAoa4K,aAApa,EAAmbC,iBAAnb,EAAscjF,kBAAtc,EAA0dC,iBAA1d,EAA6eH,uBAA7e,EAAsgBC,sBAAtgB,EAA8hBS,mBAA9hB,EAAmjBC,kBAAnjB,EAAukB8B,UAAvkB,EAAmlB7B,eAAnlB,EAAomBE,iBAApmB,EAAunBE,wBAAvnB,EAAipByD,gBAAjpB,EAAmqBN,UAAnqB,EAA+qBF,UAA/qB,EAA2rBL,eAA3rB,EAA4sBlB,aAA5sB,EAA2tBM,sBAA3tB,EAAmvBsB,SAAnvB,EAA8vBjC,YAA9vB,EAA4wBD,UAA5wB,EAAwxBjE,SAAxxB,EAAmyBvB,kBAAnyB,EAAuzBD,iBAAvzB,EAA00BF,cAA10B,EAA01BC,eAA11B,EAA22BwB,YAA32B,EAAy3BF,cAAz3B,EAAy4Bf,mBAAz4B,EAA85BD,kBAA95B,EAAk7BF,eAAl7B,EAAm8BC,gBAAn8B,EAAq9BqB,UAAr9B,EAAi+BT,0BAAj+B,EAA6/BD,yBAA7/B,EAAwhCJ,cAAxhC,EAAwiCO,aAAxiC,EAAujCD,eAAvjC,EAAwkCP,YAAxkC,EAAslChB,qBAAtlC,EAA6mCoB,cAA7mC,EAA6nCD,YAA7nC,EAA2oCc,kBAA3oC,EAA+pCpB,gBAA/pC,EAAirCC,iBAAjrC,EAAosCuB,iBAApsC,EAAutC+C,SAAvtC,EAAkuCqD,cAAluC,EAAkvCnD,cAAlvC","sourcesContent":["import { Transaction, EditorSelection } from '@codemirror/state';\nimport { Text, findClusterBreak, countColumn, codePointSize, codePointAt } from '@codemirror/text';\nimport { Direction } from '@codemirror/view';\nimport { matchBrackets } from '@codemirror/matchbrackets';\nimport { IndentContext, getIndentation, indentString, indentUnit, getIndentUnit, syntaxTree } from '@codemirror/language';\nimport { NodeProp } from 'lezer-tree';\n\nfunction updateSel(sel, by) {\n    return EditorSelection.create(sel.ranges.map(by), sel.mainIndex);\n}\nfunction setSel(state, selection) {\n    return state.update({ selection, scrollIntoView: true, annotations: Transaction.userEvent.of(\"keyboardselection\") });\n}\nfunction moveSel({ state, dispatch }, how) {\n    let selection = updateSel(state.selection, how);\n    if (selection.eq(state.selection))\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\nfunction rangeEnd(range, forward) {\n    return EditorSelection.cursor(forward ? range.to : range.from);\n}\nfunction cursorByChar(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByChar(range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection one character to the left (which is backward in\nleft-to-right text, forward in right-to-left text).\n*/\nconst cursorCharLeft = view => cursorByChar(view, view.textDirection != Direction.LTR);\n/**\nMove the selection one character to the right.\n*/\nconst cursorCharRight = view => cursorByChar(view, view.textDirection == Direction.LTR);\n/**\nMove the selection one character forward.\n*/\nconst cursorCharForward = view => cursorByChar(view, true);\n/**\nMove the selection one character backward.\n*/\nconst cursorCharBackward = view => cursorByChar(view, false);\nfunction cursorByGroup(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByGroup(range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection across one group of word or non-word (but also\nnon-space) characters.\n*/\nconst cursorGroupLeft = view => cursorByGroup(view, view.textDirection != Direction.LTR);\n/**\nMove the selection one group to the right.\n*/\nconst cursorGroupRight = view => cursorByGroup(view, view.textDirection == Direction.LTR);\n/**\nMove the selection one group forward.\n*/\nconst cursorGroupForward = view => cursorByGroup(view, true);\n/**\nMove the selection one group backward.\n*/\nconst cursorGroupBackward = view => cursorByGroup(view, false);\nfunction interestingNode(state, node, bracketProp) {\n    if (node.type.prop(bracketProp))\n        return true;\n    let len = node.to - node.from;\n    return len && (len > 2 || /[^\\s,.;:]/.test(state.sliceDoc(node.from, node.to))) || node.firstChild;\n}\nfunction moveBySyntax(state, start, forward) {\n    let pos = syntaxTree(state).resolve(start.head);\n    let bracketProp = forward ? NodeProp.closedBy : NodeProp.openedBy;\n    // Scan forward through child nodes to see if there's an interesting\n    // node ahead.\n    for (let at = start.head;;) {\n        let next = forward ? pos.childAfter(at) : pos.childBefore(at);\n        if (!next)\n            break;\n        if (interestingNode(state, next, bracketProp))\n            pos = next;\n        else\n            at = forward ? next.to : next.from;\n    }\n    let bracket = pos.type.prop(bracketProp), match, newPos;\n    if (bracket && (match = forward ? matchBrackets(state, pos.from, 1) : matchBrackets(state, pos.to, -1)) && match.matched)\n        newPos = forward ? match.end.to : match.end.from;\n    else\n        newPos = forward ? pos.to : pos.from;\n    return EditorSelection.cursor(newPos, forward ? -1 : 1);\n}\n/**\nMove the cursor over the next syntactic element to the left.\n*/\nconst cursorSyntaxLeft = view => moveSel(view, range => moveBySyntax(view.state, range, view.textDirection != Direction.LTR));\n/**\nMove the cursor over the next syntactic element to the right.\n*/\nconst cursorSyntaxRight = view => moveSel(view, range => moveBySyntax(view.state, range, view.textDirection == Direction.LTR));\nfunction cursorByLine(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveVertically(range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection one line up.\n*/\nconst cursorLineUp = view => cursorByLine(view, false);\n/**\nMove the selection one line down.\n*/\nconst cursorLineDown = view => cursorByLine(view, true);\nfunction cursorByPage(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveVertically(range, forward, view.dom.clientHeight) : rangeEnd(range, forward));\n}\n/**\nMove the selection one page up.\n*/\nconst cursorPageUp = view => cursorByPage(view, false);\n/**\nMove the selection one page down.\n*/\nconst cursorPageDown = view => cursorByPage(view, true);\nfunction moveByLineBoundary(view, start, forward) {\n    let line = view.visualLineAt(start.head), moved = view.moveToLineBoundary(start, forward);\n    if (moved.head == start.head && moved.head != (forward ? line.to : line.from))\n        moved = view.moveToLineBoundary(start, forward, false);\n    if (!forward && moved.head == line.from && line.length) {\n        let space = /^\\s*/.exec(view.state.sliceDoc(line.from, Math.min(line.from + 100, line.to)))[0].length;\n        if (space && start.head != line.from + space)\n            moved = EditorSelection.cursor(line.from + space);\n    }\n    return moved;\n}\n/**\nMove the selection to the next line wrap point, or to the end of\nthe line if there isn't one left on this line.\n*/\nconst cursorLineBoundaryForward = view => moveSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection to previous line wrap point, or failing that to\nthe start of the line. If the line is indented, and the cursor\nisn't already at the end of the indentation, this will move to the\nend of the indentation instead of the start of the line.\n*/\nconst cursorLineBoundaryBackward = view => moveSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection to the start of the line.\n*/\nconst cursorLineStart = view => moveSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).from, 1));\n/**\nMove the selection to the end of the line.\n*/\nconst cursorLineEnd = view => moveSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).to, -1));\nfunction toMatchingBracket(state, dispatch, extend) {\n    let found = false, selection = updateSel(state.selection, range => {\n        let matching = matchBrackets(state, range.head, -1)\n            || matchBrackets(state, range.head, 1)\n            || (range.head > 0 && matchBrackets(state, range.head - 1, 1))\n            || (range.head < state.doc.length && matchBrackets(state, range.head + 1, -1));\n        if (!matching || !matching.end)\n            return range;\n        found = true;\n        let head = matching.start.from == range.head ? matching.end.to : matching.end.from;\n        return extend ? EditorSelection.range(range.anchor, head) : EditorSelection.cursor(head);\n    });\n    if (!found)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\n/**\nMove the selection to the bracket matching the one it is currently\non, if any.\n*/\nconst cursorMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, false);\n/**\nExtend the selection to the bracket matching the one the selection\nhead is currently on, if any.\n*/\nconst selectMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, true);\nfunction extendSel(view, how) {\n    let selection = updateSel(view.state.selection, range => {\n        let head = how(range);\n        return EditorSelection.range(range.anchor, head.head, head.goalColumn);\n    });\n    if (selection.eq(view.state.selection))\n        return false;\n    view.dispatch(setSel(view.state, selection));\n    return true;\n}\nfunction selectByChar(view, forward) {\n    return extendSel(view, range => view.moveByChar(range, forward));\n}\n/**\nMove the selection head one character to the left, while leaving\nthe anchor in place.\n*/\nconst selectCharLeft = view => selectByChar(view, view.textDirection != Direction.LTR);\n/**\nMove the selection head one character to the right.\n*/\nconst selectCharRight = view => selectByChar(view, view.textDirection == Direction.LTR);\n/**\nMove the selection head one character forward.\n*/\nconst selectCharForward = view => selectByChar(view, true);\n/**\nMove the selection head one character backward.\n*/\nconst selectCharBackward = view => selectByChar(view, false);\nfunction selectByGroup(view, forward) {\n    return extendSel(view, range => view.moveByGroup(range, forward));\n}\n/**\nMove the selection head one [group](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) to\nthe left.\n*/\nconst selectGroupLeft = view => selectByGroup(view, view.textDirection != Direction.LTR);\n/**\nMove the selection head one group to the right.\n*/\nconst selectGroupRight = view => selectByGroup(view, view.textDirection == Direction.LTR);\n/**\nMove the selection head one group forward.\n*/\nconst selectGroupForward = view => selectByGroup(view, true);\n/**\nMove the selection head one group backward.\n*/\nconst selectGroupBackward = view => selectByGroup(view, false);\n/**\nMove the selection head over the next syntactic element to the left.\n*/\nconst selectSyntaxLeft = view => extendSel(view, range => moveBySyntax(view.state, range, view.textDirection != Direction.LTR));\n/**\nMove the selection head over the next syntactic element to the right.\n*/\nconst selectSyntaxRight = view => extendSel(view, range => moveBySyntax(view.state, range, view.textDirection == Direction.LTR));\nfunction selectByLine(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward));\n}\n/**\nMove the selection head one line up.\n*/\nconst selectLineUp = view => selectByLine(view, false);\n/**\nMove the selection head one line down.\n*/\nconst selectLineDown = view => selectByLine(view, true);\nfunction selectByPage(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward, view.dom.clientHeight));\n}\n/**\nMove the selection head one page up.\n*/\nconst selectPageUp = view => selectByPage(view, false);\n/**\nMove the selection head one page down.\n*/\nconst selectPageDown = view => selectByPage(view, true);\n/**\nMove the selection head to the next line boundary.\n*/\nconst selectLineBoundaryForward = view => extendSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection head to the previous line boundary.\n*/\nconst selectLineBoundaryBackward = view => extendSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection head to the start of the line.\n*/\nconst selectLineStart = view => extendSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).from));\n/**\nMove the selection head to the end of the line.\n*/\nconst selectLineEnd = view => extendSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).to));\n/**\nMove the selection to the start of the document.\n*/\nconst cursorDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: 0 }));\n    return true;\n};\n/**\nMove the selection to the end of the document.\n*/\nconst cursorDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.doc.length }));\n    return true;\n};\n/**\nMove the selection head to the start of the document.\n*/\nconst selectDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: 0 }));\n    return true;\n};\n/**\nMove the selection head to the end of the document.\n*/\nconst selectDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: state.doc.length }));\n    return true;\n};\n/**\nSelect the entire document.\n*/\nconst selectAll = ({ state, dispatch }) => {\n    dispatch(state.update({ selection: { anchor: 0, head: state.doc.length }, annotations: Transaction.userEvent.of(\"keyboardselection\") }));\n    return true;\n};\n/**\nExpand the selection to cover entire lines.\n*/\nconst selectLine = ({ state, dispatch }) => {\n    let ranges = selectedLineBlocks(state).map(({ from, to }) => EditorSelection.range(from, Math.min(to + 1, state.doc.length)));\n    dispatch(state.update({ selection: EditorSelection.create(ranges), annotations: Transaction.userEvent.of(\"keyboardselection\") }));\n    return true;\n};\n/**\nSelect the next syntactic construct that is larger than the\nselection. Note that this will only work insofar as the language\n[provider](https://codemirror.net/6/docs/ref/#language.language) you use builds up a full\nsyntax tree.\n*/\nconst selectParentSyntax = ({ state, dispatch }) => {\n    let selection = updateSel(state.selection, range => {\n        var _a;\n        let context = syntaxTree(state).resolve(range.head, 1);\n        while (!((context.from < range.from && context.to >= range.to) ||\n            (context.to > range.to && context.from <= range.from) ||\n            !((_a = context.parent) === null || _a === void 0 ? void 0 : _a.parent)))\n            context = context.parent;\n        return EditorSelection.range(context.to, context.from);\n    });\n    dispatch(setSel(state, selection));\n    return true;\n};\n/**\nSimplify the current selection. When multiple ranges are selected,\nreduce it to its main range. Otherwise, if the selection is\nnon-empty, convert it to a cursor selection.\n*/\nconst simplifySelection = ({ state, dispatch }) => {\n    let cur = state.selection, selection = null;\n    if (cur.ranges.length > 1)\n        selection = EditorSelection.create([cur.main]);\n    else if (!cur.main.empty)\n        selection = EditorSelection.create([EditorSelection.cursor(cur.main.head)]);\n    if (!selection)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n};\nfunction deleteBy({ state, dispatch }, by) {\n    let changes = state.changeByRange(range => {\n        let { from, to } = range;\n        if (from == to) {\n            let towards = by(from);\n            from = Math.min(from, towards);\n            to = Math.max(to, towards);\n        }\n        return from == to ? { range } : { changes: { from, to }, range: EditorSelection.cursor(from) };\n    });\n    if (changes.changes.empty)\n        return false;\n    dispatch(state.update(changes, { scrollIntoView: true, annotations: Transaction.userEvent.of(\"delete\") }));\n    return true;\n}\nconst deleteByChar = (target, forward, codePoint) => deleteBy(target, pos => {\n    let { state } = target, line = state.doc.lineAt(pos), before;\n    if (!forward && pos > line.from && pos < line.from + 200 &&\n        !/[^ \\t]/.test(before = line.text.slice(0, pos - line.from))) {\n        if (before[before.length - 1] == \"\\t\")\n            return pos - 1;\n        let col = countColumn(before, 0, state.tabSize), drop = col % getIndentUnit(state) || getIndentUnit(state);\n        for (let i = 0; i < drop && before[before.length - 1 - i] == \" \"; i++)\n            pos--;\n        return pos;\n    }\n    let targetPos;\n    if (codePoint) {\n        let next = line.text.slice(pos - line.from + (forward ? 0 : -2), pos - line.from + (forward ? 2 : 0));\n        let size = next ? codePointSize(codePointAt(next, 0)) : 1;\n        targetPos = forward ? Math.min(state.doc.length, pos + size) : Math.max(0, pos - size);\n    }\n    else {\n        targetPos = findClusterBreak(line.text, pos - line.from, forward) + line.from;\n    }\n    if (targetPos == pos && line.number != (forward ? state.doc.lines : 1))\n        targetPos += forward ? 1 : -1;\n    return targetPos;\n});\n/**\nDelete the selection, or, for cursor selections, the code point\nbefore the cursor.\n*/\nconst deleteCodePointBackward = view => deleteByChar(view, false, true);\n/**\nDelete the selection, or, for cursor selections, the code point\nafter the cursor.\n*/\nconst deleteCodePointForward = view => deleteByChar(view, true, true);\n/**\nDelete the selection, or, for cursor selections, the character\nbefore the cursor.\n*/\nconst deleteCharBackward = view => deleteByChar(view, false, false);\n/**\nDelete the selection or the character after the cursor.\n*/\nconst deleteCharForward = view => deleteByChar(view, true, false);\nconst deleteByGroup = (target, forward) => deleteBy(target, start => {\n    let pos = start, { state } = target, line = state.doc.lineAt(pos);\n    let categorize = state.charCategorizer(pos);\n    for (let cat = null;;) {\n        if (pos == (forward ? line.to : line.from)) {\n            if (pos == start && line.number != (forward ? state.doc.lines : 1))\n                pos += forward ? 1 : -1;\n            break;\n        }\n        let next = findClusterBreak(line.text, pos - line.from, forward) + line.from;\n        let nextChar = line.text.slice(Math.min(pos, next) - line.from, Math.max(pos, next) - line.from);\n        let nextCat = categorize(nextChar);\n        if (cat != null && nextCat != cat)\n            break;\n        if (nextChar != \" \" || pos != start)\n            cat = nextCat;\n        pos = next;\n    }\n    return pos;\n});\n/**\nDelete the selection or backward until the end of the next\n[group](https://codemirror.net/6/docs/ref/#view.EditorView.moveByGroup), only skipping groups of\nwhitespace when they consist of a single space.\n*/\nconst deleteGroupBackward = target => deleteByGroup(target, false);\n/**\nDelete the selection or forward until the end of the next group.\n*/\nconst deleteGroupForward = target => deleteByGroup(target, true);\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe end of the line. If the cursor is directly at the end of the\nline, delete the line break after it.\n*/\nconst deleteToLineEnd = view => deleteBy(view, pos => {\n    let lineEnd = view.visualLineAt(pos).to;\n    if (pos < lineEnd)\n        return lineEnd;\n    return Math.min(view.state.doc.length, pos + 1);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe start of the line. If the cursor is directly at the start of the\nline, delete the line break before it.\n*/\nconst deleteToLineStart = view => deleteBy(view, pos => {\n    let lineStart = view.visualLineAt(pos).from;\n    if (pos > lineStart)\n        return lineStart;\n    return Math.max(0, pos - 1);\n});\n/**\nDelete all whitespace directly before a line end from the\ndocument.\n*/\nconst deleteTrailingWhitespace = ({ state, dispatch }) => {\n    let changes = [];\n    for (let pos = 0, prev = \"\", iter = state.doc.iter();;) {\n        iter.next();\n        if (iter.lineBreak || iter.done) {\n            let trailing = prev.search(/\\s+$/);\n            if (trailing > -1)\n                changes.push({ from: pos - (prev.length - trailing), to: pos });\n            if (iter.done)\n                break;\n            prev = \"\";\n        }\n        else {\n            prev = iter.value;\n        }\n        pos += iter.value.length;\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({ changes }));\n    return true;\n};\n/**\nReplace each selection range with a line break, leaving the cursor\non the line before the break.\n*/\nconst splitLine = ({ state, dispatch }) => {\n    let changes = state.changeByRange(range => {\n        return { changes: { from: range.from, to: range.to, insert: Text.of([\"\", \"\"]) },\n            range: EditorSelection.cursor(range.from) };\n    });\n    dispatch(state.update(changes, { scrollIntoView: true, annotations: Transaction.userEvent.of(\"input\") }));\n    return true;\n};\n/**\nFlip the characters before and after the cursor(s).\n*/\nconst transposeChars = ({ state, dispatch }) => {\n    let changes = state.changeByRange(range => {\n        if (!range.empty || range.from == 0 || range.from == state.doc.length)\n            return { range };\n        let pos = range.from, line = state.doc.lineAt(pos);\n        let from = pos == line.from ? pos - 1 : findClusterBreak(line.text, pos - line.from, false) + line.from;\n        let to = pos == line.to ? pos + 1 : findClusterBreak(line.text, pos - line.from, true) + line.from;\n        return { changes: { from, to, insert: state.doc.slice(pos, to).append(state.doc.slice(from, pos)) },\n            range: EditorSelection.cursor(to) };\n    });\n    if (changes.changes.empty)\n        return false;\n    dispatch(state.update(changes, { scrollIntoView: true }));\n    return true;\n};\nfunction selectedLineBlocks(state) {\n    let blocks = [], upto = -1;\n    for (let range of state.selection.ranges) {\n        let startLine = state.doc.lineAt(range.from), endLine = state.doc.lineAt(range.to);\n        if (upto == startLine.number)\n            blocks[blocks.length - 1].to = endLine.to;\n        else\n            blocks.push({ from: startLine.from, to: endLine.to });\n        upto = endLine.number;\n    }\n    return blocks;\n}\nfunction moveLine(state, dispatch, forward) {\n    let changes = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward ? block.to == state.doc.length : block.from == 0)\n            continue;\n        let nextLine = state.doc.lineAt(forward ? block.to + 1 : block.from - 1);\n        if (forward)\n            changes.push({ from: block.to, to: nextLine.to }, { from: block.from, insert: nextLine.text + state.lineBreak });\n        else\n            changes.push({ from: nextLine.from, to: block.from }, { from: block.to, insert: state.lineBreak + nextLine.text });\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({ changes, scrollIntoView: true }));\n    return true;\n}\n/**\nMove the selected lines up one line.\n*/\nconst moveLineUp = ({ state, dispatch }) => moveLine(state, dispatch, false);\n/**\nMove the selected lines down one line.\n*/\nconst moveLineDown = ({ state, dispatch }) => moveLine(state, dispatch, true);\nfunction copyLine(state, dispatch, forward) {\n    let changes = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward)\n            changes.push({ from: block.from, insert: state.doc.slice(block.from, block.to) + state.lineBreak });\n        else\n            changes.push({ from: block.to, insert: state.lineBreak + state.doc.slice(block.from, block.to) });\n    }\n    dispatch(state.update({ changes, scrollIntoView: true }));\n    return true;\n}\n/**\nCreate a copy of the selected lines. Keep the selection in the top copy.\n*/\nconst copyLineUp = ({ state, dispatch }) => copyLine(state, dispatch, false);\n/**\nCreate a copy of the selected lines. Keep the selection in the bottom copy.\n*/\nconst copyLineDown = ({ state, dispatch }) => copyLine(state, dispatch, true);\n/**\nDelete selected lines.\n*/\nconst deleteLine = view => {\n    let { state } = view, changes = state.changes(selectedLineBlocks(state).map(({ from, to }) => {\n        if (from > 0)\n            from--;\n        else if (to < state.doc.length)\n            to++;\n        return { from, to };\n    }));\n    let selection = updateSel(state.selection, range => view.moveVertically(range, true)).map(changes);\n    view.dispatch({ changes, selection, scrollIntoView: true });\n    return true;\n};\n/**\nReplace the selection with a newline.\n*/\nconst insertNewline = ({ state, dispatch }) => {\n    dispatch(state.update(state.replaceSelection(state.lineBreak), { scrollIntoView: true }));\n    return true;\n};\nfunction isBetweenBrackets(state, pos) {\n    if (/\\(\\)|\\[\\]|\\{\\}/.test(state.sliceDoc(pos - 1, pos + 1)))\n        return { from: pos, to: pos };\n    let context = syntaxTree(state).resolve(pos);\n    let before = context.childBefore(pos), after = context.childAfter(pos), closedBy;\n    if (before && after && before.to <= pos && after.from >= pos &&\n        (closedBy = before.type.prop(NodeProp.closedBy)) && closedBy.indexOf(after.name) > -1 &&\n        state.doc.lineAt(before.to).from == state.doc.lineAt(after.from).from)\n        return { from: before.to, to: after.from };\n    return null;\n}\n/**\nReplace the selection with a newline and indent the newly created\nline(s). If the current line consists only of whitespace, this\nwill also delete that whitespace. When the cursor is between\nmatching brackets, an additional newline will be inserted after\nthe cursor.\n*/\nconst insertNewlineAndIndent = ({ state, dispatch }) => {\n    let changes = state.changeByRange(({ from, to }) => {\n        let explode = from == to && isBetweenBrackets(state, from);\n        let cx = new IndentContext(state, { simulateBreak: from, simulateDoubleBreak: !!explode });\n        let indent = getIndentation(cx, from);\n        if (indent == null)\n            indent = /^\\s*/.exec(state.doc.lineAt(from).text)[0].length;\n        let line = state.doc.lineAt(from);\n        while (to < line.to && /\\s/.test(line.text.slice(to - line.from, to + 1 - line.from)))\n            to++;\n        if (explode)\n            ({ from, to } = explode);\n        else if (from > line.from && from < line.from + 100 && !/\\S/.test(line.text.slice(0, from)))\n            from = line.from;\n        let insert = [\"\", indentString(state, indent)];\n        if (explode)\n            insert.push(indentString(state, cx.lineIndent(line)));\n        return { changes: { from, to, insert: Text.of(insert) },\n            range: EditorSelection.cursor(from + 1 + insert[1].length) };\n    });\n    dispatch(state.update(changes, { scrollIntoView: true }));\n    return true;\n};\nfunction changeBySelectedLine(state, f) {\n    let atLine = -1;\n    return state.changeByRange(range => {\n        let changes = [];\n        for (let pos = range.from; pos <= range.to;) {\n            let line = state.doc.lineAt(pos);\n            if (line.number > atLine && (range.empty || range.to > line.from)) {\n                f(line, changes, range);\n                atLine = line.number;\n            }\n            pos = line.to + 1;\n        }\n        let changeSet = state.changes(changes);\n        return { changes,\n            range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1)) };\n    });\n}\n/**\nAuto-indent the selected lines. This uses the [indentation service\nfacet](https://codemirror.net/6/docs/ref/#language.indentService) as source for auto-indent\ninformation.\n*/\nconst indentSelection = ({ state, dispatch }) => {\n    let updated = Object.create(null);\n    let context = new IndentContext(state, { overrideIndentation: start => {\n            let found = updated[start];\n            return found == null ? -1 : found;\n        } });\n    let changes = changeBySelectedLine(state, (line, changes, range) => {\n        let indent = getIndentation(context, line.from);\n        if (indent == null)\n            return;\n        let cur = /^\\s*/.exec(line.text)[0];\n        let norm = indentString(state, indent);\n        if (cur != norm || range.from < line.from + cur.length) {\n            updated[line.from] = indent;\n            changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n    });\n    if (!changes.changes.empty)\n        dispatch(state.update(changes));\n    return true;\n};\n/**\nAdd a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation to all selected\nlines.\n*/\nconst indentMore = ({ state, dispatch }) => {\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        changes.push({ from: line.from, insert: state.facet(indentUnit) });\n    })));\n    return true;\n};\n/**\nRemove a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation from all\nselected lines.\n*/\nconst indentLess = ({ state, dispatch }) => {\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        let space = /^\\s*/.exec(line.text)[0];\n        if (!space)\n            return;\n        let col = countColumn(space, 0, state.tabSize), keep = 0;\n        let insert = indentString(state, Math.max(0, col - getIndentUnit(state)));\n        while (keep < space.length && keep < insert.length && space.charCodeAt(keep) == insert.charCodeAt(keep))\n            keep++;\n        changes.push({ from: line.from + keep, to: line.from + space.length, insert: insert.slice(keep) });\n    })));\n    return true;\n};\n/**\nInsert a tab character at the cursor or, if something is selected,\nuse [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) to indent the entire\nselection.\n*/\nconst insertTab = ({ state, dispatch }) => {\n    if (state.selection.ranges.some(r => !r.empty))\n        return indentMore({ state, dispatch });\n    dispatch(state.update(state.replaceSelection(\"\\t\"), { scrollIntoView: true, annotations: Transaction.userEvent.of(\"input\") }));\n    return true;\n};\n/**\nArray of key bindings containing the Emacs-style bindings that are\navailable on macOS by default.\n\n - Ctrl-b: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - Ctrl-f: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-p: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - Ctrl-n: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Ctrl-a: [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Ctrl-e: [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - Ctrl-d: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-h: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Ctrl-k: [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd)\n - Alt-d: [`deleteGroupForward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupForward)\n - Ctrl-Alt-h: [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-o: [`splitLine`](https://codemirror.net/6/docs/ref/#commands.splitLine)\n - Ctrl-t: [`transposeChars`](https://codemirror.net/6/docs/ref/#commands.transposeChars)\n - Alt-f: [`cursorGroupForward`](https://codemirror.net/6/docs/ref/#commands.cursorGroupForward) ([`selectGroupForward`](https://codemirror.net/6/docs/ref/#commands.selectGroupForward) with Shift)\n - Alt-b: [`cursorGroupBackward`](https://codemirror.net/6/docs/ref/#commands.cursorGroupBackward) ([`selectGroupBackward`](https://codemirror.net/6/docs/ref/#commands.selectGroupBackward) with Shift)\n - Alt-<: [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart)\n - Alt->: [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd)\n - Ctrl-v: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown)\n - Alt-v: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp)\n*/\nconst emacsStyleKeymap = [\n    { key: \"Ctrl-b\", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },\n    { key: \"Ctrl-f\", run: cursorCharRight, shift: selectCharRight },\n    { key: \"Ctrl-p\", run: cursorLineUp, shift: selectLineUp },\n    { key: \"Ctrl-n\", run: cursorLineDown, shift: selectLineDown },\n    { key: \"Ctrl-a\", run: cursorLineStart, shift: selectLineStart },\n    { key: \"Ctrl-e\", run: cursorLineEnd, shift: selectLineEnd },\n    { key: \"Ctrl-d\", run: deleteCharForward },\n    { key: \"Ctrl-h\", run: deleteCharBackward },\n    { key: \"Ctrl-k\", run: deleteToLineEnd },\n    { key: \"Alt-d\", run: deleteGroupForward },\n    { key: \"Ctrl-Alt-h\", run: deleteGroupBackward },\n    { key: \"Ctrl-o\", run: splitLine },\n    { key: \"Ctrl-t\", run: transposeChars },\n    { key: \"Alt-f\", run: cursorGroupForward, shift: selectGroupForward },\n    { key: \"Alt-b\", run: cursorGroupBackward, shift: selectGroupBackward },\n    { key: \"Alt-<\", run: cursorDocStart },\n    { key: \"Alt->\", run: cursorDocEnd },\n    { key: \"Ctrl-v\", run: cursorPageDown },\n    { key: \"Alt-v\", run: cursorPageUp },\n];\n/**\nAn array of key bindings closely sticking to platform-standard or\nwidely used bindings. (This includes the bindings from\n[`emacsStyleKeymap`](https://codemirror.net/6/docs/ref/#commands.emacsStyleKeymap), with their `key`\nproperty changed to `mac`.)\n\n - ArrowLeft: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - ArrowRight: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-ArrowLeft (Alt-ArrowLeft on macOS): [`cursorGroupLeft`](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) ([`selectGroupLeft`](https://codemirror.net/6/docs/ref/#commands.selectGroupLeft) with Shift)\n - Ctrl-ArrowRight (Alt-ArrowRight on macOS): [`cursorGroupRight`](https://codemirror.net/6/docs/ref/#commands.cursorGroupRight) ([`selectGroupRight`](https://codemirror.net/6/docs/ref/#commands.selectGroupRight) with Shift)\n - Cmd-ArrowLeft (on macOS): [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Cmd-ArrowRight (on macOS): [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - ArrowUp: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - ArrowDown: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Cmd-ArrowUp (on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Cmd-ArrowDown (on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Ctrl-ArrowUp (on macOS): [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - Ctrl-ArrowDown (on macOS): [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - PageUp: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - PageDown: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - Home: [`cursorLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryBackward) ([`selectLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryBackward) with Shift)\n - End: [`cursorLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryForward) ([`selectLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryForward) with Shift)\n - Ctrl-Home (Cmd-Home on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Ctrl-End (Cmd-Home on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Enter: [`insertNewlineAndIndent`](https://codemirror.net/6/docs/ref/#commands.insertNewlineAndIndent)\n - Ctrl-a (Cmd-a on macOS): [`selectAll`](https://codemirror.net/6/docs/ref/#commands.selectAll)\n - Backspace: [`deleteCodePointBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCodePointBackward)\n - Delete: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-Backspace (Alt-Backspace on macOS): [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-Delete (Alt-Delete on macOS): [`deleteGroupForward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupForward)\n - Cmd-Backspace (macOS): [`deleteToLineStart`](https://codemirror.net/6/docs/ref/#commands.deleteToLineStart).\n - Cmd-Delete (macOS): [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd).\n*/\nconst standardKeymap = /*@__PURE__*/[\n    { key: \"ArrowLeft\", run: cursorCharLeft, shift: selectCharLeft },\n    { key: \"Mod-ArrowLeft\", mac: \"Alt-ArrowLeft\", run: cursorGroupLeft, shift: selectGroupLeft },\n    { mac: \"Cmd-ArrowLeft\", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward },\n    { key: \"ArrowRight\", run: cursorCharRight, shift: selectCharRight },\n    { key: \"Mod-ArrowRight\", mac: \"Alt-ArrowRight\", run: cursorGroupRight, shift: selectGroupRight },\n    { mac: \"Cmd-ArrowRight\", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward },\n    { key: \"ArrowUp\", run: cursorLineUp, shift: selectLineUp },\n    { mac: \"Cmd-ArrowUp\", run: cursorDocStart, shift: selectDocStart },\n    { mac: \"Ctrl-ArrowUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"ArrowDown\", run: cursorLineDown, shift: selectLineDown },\n    { mac: \"Cmd-ArrowDown\", run: cursorDocEnd, shift: selectDocEnd },\n    { mac: \"Ctrl-ArrowDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"PageUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"PageDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"Home\", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward },\n    { key: \"Mod-Home\", run: cursorDocStart, shift: selectDocStart },\n    { key: \"End\", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward },\n    { key: \"Mod-End\", run: cursorDocEnd, shift: selectDocEnd },\n    { key: \"Enter\", run: insertNewlineAndIndent },\n    { key: \"Mod-a\", run: selectAll },\n    { key: \"Backspace\", run: deleteCodePointBackward, shift: deleteCodePointBackward },\n    { key: \"Delete\", run: deleteCharForward, shift: deleteCharForward },\n    { key: \"Mod-Backspace\", mac: \"Alt-Backspace\", run: deleteGroupBackward },\n    { key: \"Mod-Delete\", mac: \"Alt-Delete\", run: deleteGroupForward },\n    { mac: \"Mod-Backspace\", run: deleteToLineStart },\n    { mac: \"Mod-Delete\", run: deleteToLineEnd }\n].concat(/*@__PURE__*/emacsStyleKeymap.map(b => ({ mac: b.key, run: b.run, shift: b.shift })));\n/**\nThe default keymap. Includes all bindings from\n[`standardKeymap`](https://codemirror.net/6/docs/ref/#commands.standardKeymap) plus the following:\n\n- Alt-ArrowLeft (Ctrl-ArrowLeft on macOS): [`cursorSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxLeft) ([`selectSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxLeft) with Shift)\n- Alt-ArrowRight (Ctrl-ArrowRight on macOS): [`cursorSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxRight) ([`selectSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxRight) with Shift)\n- Alt-ArrowUp: [`moveLineUp`](https://codemirror.net/6/docs/ref/#commands.moveLineUp)\n- Alt-ArrowDown: [`moveLineDown`](https://codemirror.net/6/docs/ref/#commands.moveLineDown)\n- Shift-Alt-ArrowUp: [`copyLineUp`](https://codemirror.net/6/docs/ref/#commands.copyLineUp)\n- Shift-Alt-ArrowDown: [`copyLineDown`](https://codemirror.net/6/docs/ref/#commands.copyLineDown)\n- Escape: [`simplifySelection`](https://codemirror.net/6/docs/ref/#commands.simplifySelection)\n- Alt-l (Ctrl-l on macOS): [`selectLine`](https://codemirror.net/6/docs/ref/#commands.selectLine)\n- Ctrl-i (Cmd-i on macOS): [`selectParentSyntax`](https://codemirror.net/6/docs/ref/#commands.selectParentSyntax)\n- Ctrl-[ (Cmd-[ on macOS): [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess)\n- Ctrl-] (Cmd-] on macOS): [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore)\n- Ctrl-Alt-\\\\ (Cmd-Alt-\\\\ on macOS): [`indentSelection`](https://codemirror.net/6/docs/ref/#commands.indentSelection)\n- Shift-Ctrl-k (Shift-Cmd-k on macOS): [`deleteLine`](https://codemirror.net/6/docs/ref/#commands.deleteLine)\n- Shift-Ctrl-\\\\ (Shift-Cmd-\\\\ on macOS): [`cursorMatchingBracket`](https://codemirror.net/6/docs/ref/#commands.cursorMatchingBracket)\n*/\nconst defaultKeymap = /*@__PURE__*/[\n    { key: \"Alt-ArrowLeft\", mac: \"Ctrl-ArrowLeft\", run: cursorSyntaxLeft, shift: selectSyntaxLeft },\n    { key: \"Alt-ArrowRight\", mac: \"Ctrl-ArrowRight\", run: cursorSyntaxRight, shift: selectSyntaxRight },\n    { key: \"Alt-ArrowUp\", run: moveLineUp },\n    { key: \"Shift-Alt-ArrowUp\", run: copyLineUp },\n    { key: \"Alt-ArrowDown\", run: moveLineDown },\n    { key: \"Shift-Alt-ArrowDown\", run: copyLineDown },\n    { key: \"Escape\", run: simplifySelection },\n    { key: \"Alt-l\", mac: \"Ctrl-l\", run: selectLine },\n    { key: \"Mod-i\", run: selectParentSyntax, preventDefault: true },\n    { key: \"Mod-[\", run: indentLess },\n    { key: \"Mod-]\", run: indentMore },\n    { key: \"Mod-Alt-\\\\\", run: indentSelection },\n    { key: \"Shift-Mod-k\", run: deleteLine },\n    { key: \"Shift-Mod-\\\\\", run: cursorMatchingBracket }\n].concat(standardKeymap);\n/**\nA binding that binds Tab to [`insertTab`](https://codemirror.net/6/docs/ref/#commands.insertTab) and\nShift-Tab to [`indentSelection`](https://codemirror.net/6/docs/ref/#commands.indentSelection).\nPlease see the [Tab example](../../examples/tab/) before using\nthis.\n*/\nconst defaultTabBinding = { key: \"Tab\", run: insertTab, shift: indentSelection };\n\nexport { copyLineDown, copyLineUp, cursorCharBackward, cursorCharForward, cursorCharLeft, cursorCharRight, cursorDocEnd, cursorDocStart, cursorGroupBackward, cursorGroupForward, cursorGroupLeft, cursorGroupRight, cursorLineBoundaryBackward, cursorLineBoundaryForward, cursorLineDown, cursorLineEnd, cursorLineStart, cursorLineUp, cursorMatchingBracket, cursorPageDown, cursorPageUp, cursorSyntaxLeft, cursorSyntaxRight, defaultKeymap, defaultTabBinding, deleteCharBackward, deleteCharForward, deleteCodePointBackward, deleteCodePointForward, deleteGroupBackward, deleteGroupForward, deleteLine, deleteToLineEnd, deleteToLineStart, deleteTrailingWhitespace, emacsStyleKeymap, indentLess, indentMore, indentSelection, insertNewline, insertNewlineAndIndent, insertTab, moveLineDown, moveLineUp, selectAll, selectCharBackward, selectCharForward, selectCharLeft, selectCharRight, selectDocEnd, selectDocStart, selectGroupBackward, selectGroupForward, selectGroupLeft, selectGroupRight, selectLine, selectLineBoundaryBackward, selectLineBoundaryForward, selectLineDown, selectLineEnd, selectLineStart, selectLineUp, selectMatchingBracket, selectPageDown, selectPageUp, selectParentSyntax, selectSyntaxLeft, selectSyntaxRight, simplifySelection, splitLine, standardKeymap, transposeChars };\n"]},"metadata":{},"sourceType":"module"}