{"ast":null,"code":"/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */ /* eslint-disable prefer-spread */ /* eslint-disable no-loop-func */ /* eslint-disable @typescript-eslint/no-this-alias */ /* eslint-disable no-redeclare */ /* eslint-disable no-useless-escape */ /* eslint-disable prefer-const */ /* eslint-disable @typescript-eslint/explicit-function-return-type */ /* eslint-disable @typescript-eslint/no-use-before-define */ /* eslint-disable eqeqeq */ /* eslint-disable no-var */ /* Javascript plotting library for jQuery, version 0.8.3.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/ // first an inline dependency, jquery.colorhelpers.js, we inline it here\n// for convenience\n/* Plugin for jQuery for working with colors.\n *\n * Version 1.1.\n *\n * Inspiration from jQuery color animation plugin by John Resig.\n *\n * Released under the MIT license by Ole Laursen, October 2009.\n *\n * Examples:\n *\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\n *   console.log(c.r, c.g, c.b, c.a);\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\n *\n * Note that .scale() and .add() return the same modified object\n * instead of making a new one.\n *\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\n * produce a color rather than just crashing.\n */(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i){o[c.charAt(i)]+=d;}return o.normalize();};o.scale=function(c,f){for(var i=0;i<c.length;++i){o[c.charAt(i)]*=f;}return o.normalize();};o.toString=function(){if(o.a>=1){return'rgb('+[o.r,o.g,o.b].join(',')+')';}else{return'rgba('+[o.r,o.g,o.b,o.a].join(',')+')';}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value;}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o;};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a);};return o.normalize();};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=''&&c!='transparent')break;elem=elem.parent();}while(elem.length&&!$.nodeName(elem.get(0),'body'));if(c=='rgba(0, 0, 0, 0)')c='transparent';return $.color.parse(c);};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name=='transparent')return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2]);}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};})(window.jQuery);// the actual Flot code\n(function($){// Cache the prototype hasOwnProperty for faster access\nvar hasOwnProperty=Object.prototype.hasOwnProperty;// A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\n// operation produces the same effect as detach, i.e. removing the element\n// without touching its jQuery data.\n// Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\nif(!$.fn.detach){$.fn.detach=function(){return this.each(function(){if(this.parentNode){this.parentNode.removeChild(this);}});};}///////////////////////////////////////////////////////////////////////////\n// The Canvas object is a wrapper around an HTML5 <canvas> tag.\n//\n// @constructor\n// @param {string} cls List of classes to apply to the canvas.\n// @param {element} container Element onto which to append the canvas.\n//\n// Requiring a container is a little iffy, but unfortunately canvas\n// operations don't work unless the canvas is attached to the DOM.\nfunction Canvas(cls,container){var element=container.children('.'+cls)[0];if(element==null){element=document.createElement('canvas');element.className=cls;$(element).css({direction:'ltr',position:'absolute',left:0,top:0}).appendTo(container);// If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\nif(!element.getContext){if(window.G_vmlCanvasManager){element=window.G_vmlCanvasManager.initElement(element);}else{throw new Error(\"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\");}}}this.element=element;var context=this.context=element.getContext('2d');// Determine the screen's ratio of physical to device-independent\n// pixels.  This is the ratio between the canvas width that the browser\n// advertises and the number of pixels actually present in that space.\n// The iPhone 4, for example, has a device-independent width of 320px,\n// but its screen is actually 640px wide.  It therefore has a pixel\n// ratio of 2, while most normal devices have a ratio of 1.\nvar devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio;// Size the canvas to match the internal dimensions of its container\nthis.resize(container.width(),container.height());// Collection of HTML div layers for text overlaid onto the canvas\nthis.textContainer=null;this.text={};// Cache of text fragments and metrics, so we can avoid expensively\n// re-calculating them when the plot is re-rendered in a loop.\nthis._textCache={};this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{};}// Resizes the canvas to the given dimensions.\n//\n// @param {number} width New width of the canvas, in pixels.\n// @param {number} width New height of the canvas, in pixels.\nCanvas.prototype.resize=function(width,height){if(width<=0||height<=0){throw new Error('Invalid dimensions for plot, width = '+width+', height = '+height);}var element=this.element,context=this.context,pixelRatio=this.pixelRatio;// Resize the canvas, increasing its density based on the display's\n// pixel ratio; basically giving it more pixels without increasing the\n// size of its element, to take advantage of the fact that retina\n// displays have that many more pixels in the same advertised space.\n// Resizing should reset the state (excanvas seems to be buggy though)\nif(this.width!=width){element.width=width*pixelRatio;element.style.width=width+'px';this.width=width;}if(this.height!=height){element.height=height*pixelRatio;element.style.height=height+'px';this.height=height;}// Save the context, so we can reset in case we get replotted.  The\n// restore ensure that we're really back at the initial state, and\n// should be safe even if we haven't saved the initial state yet.\ncontext.restore();context.save();// Scale the coordinate space to match the display density; so even though we\n// may have twice as many pixels, we still want lines and other drawing to\n// appear at the same size; the extra pixels will just make them crisper.\ncontext.scale(pixelRatio,pixelRatio);};// Clears the entire canvas area, not including any overlaid HTML text\nCanvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height);};// Finishes rendering the canvas, including managing the text overlay.\nCanvas.prototype.render=function(){var cache=this._textCache;// For each text layer, add elements marked as active that haven't\n// already been rendered, and remove those that are no longer active.\nfor(var layerKey in cache){if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){if(position.active){if(!position.rendered){layer.append(position.element);position.rendered=true;}}else{positions.splice(i--,1);if(position.rendered){position.element.detach();}}}if(positions.length==0){delete styleCache[key];}}}}}layer.show();}}};// Creates (if necessary) and returns the text overlay container.\n//\n// @param {string} classes String of space-separated CSS classes used to\n//     uniquely identify the text layer.\n// @return {object} The jQuery-wrapped text-layer div.\nCanvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];// Create the text layer if it doesn't exist\nif(layer==null){// Create the text layer container, if it doesn't exist\nif(this.textContainer==null){this.textContainer=$(\"<div class='flot-text flot-temp-elem'></div>\").css({position:'absolute',top:0,left:0,bottom:0,right:0,'font-size':'smaller',color:'#545454'}).insertAfter(this.element);}layer=this.text[classes]=$('<div></div>').addClass(classes).css({position:'absolute',top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer);}return layer;};// Creates (if necessary) and returns a text info object.\n//\n// The object looks like this:\n//\n// {\n//     width: Width of the text's wrapper div.\n//     height: Height of the text's wrapper div.\n//     element: The jQuery-wrapped HTML div containing the text.\n//     positions: Array of positions at which this text is drawn.\n// }\n//\n// The positions array contains objects that look like this:\n//\n// {\n//     active: Flag indicating whether the text should be visible.\n//     rendered: Flag indicating whether the text is currently visible.\n//     element: The jQuery-wrapped HTML div containing the text.\n//     x: X coordinate at which to draw the text.\n//     y: Y coordinate at which to draw the text.\n// }\n//\n// Each position after the first receives a clone of the original element.\n//\n// The idea is that that the width, height, and general 'identity' of the\n// text is constant no matter where it is placed; the placements are a\n// secondary property.\n//\n// Canvas maintains a cache of recently-used text info objects; getTextInfo\n// either returns the cached element or creates a new entry.\n//\n// @param {string} layer A string of space-separated CSS classes uniquely\n//     identifying the layer containing this text.\n// @param {string} text Text string to retrieve info for.\n// @param {(string|object)=} font Either a string of space-separated CSS\n//     classes or a font-spec object, defining the text's font and style.\n// @param {number=} angle Angle at which to rotate the text, in degrees.\n//     Angle is currently unused, it will be implemented in the future.\n// @param {number=} width Maximum width of the text before it wraps.\n// @return {object} a text info object.\nCanvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;// Cast the value to a string, in case we were given a number or such\ntext=''+text;// If the font is a font-spec object, generate a CSS font definition\nif(typeof font==='object'){textStyle=font.style+' '+font.variant+' '+font.weight+' '+font.size+'px/'+font.lineHeight+'px '+font.family;}else{textStyle=font;}// Retrieve (or create) the cache for the text's layer and styles\nlayerCache=this._textCache[layer];if(layerCache==null){layerCache=this._textCache[layer]={};}styleCache=layerCache[textStyle];if(styleCache==null){styleCache=layerCache[textStyle]={};}info=styleCache[text];// If we can't find a matching element in our cache, create a new one\nif(info==null){var element=$('<div></div>').html(text).css({position:'absolute','max-width':width,top:-9999}).appendTo(this.getTextLayer(layer));if(typeof font==='object'){element.css({font:textStyle,color:font.color});}else if(typeof font==='string'){element.addClass(font);}info=styleCache[text]={element:element,positions:[]};var size=this._textSizeCache[text];if(size){info.width=size.width;info.height=size.height;}else{info.width=element.outerWidth(true);info.height=element.outerHeight(true);this._textSizeCache[text]={width:info.width,height:info.height};}element.detach();}return info;};// Adds a text string to the canvas text overlay.\n//\n// The text isn't drawn immediately; it is marked as rendering, which will\n// result in its addition to the canvas on the next render pass.\n//\n// @param {string} layer A string of space-separated CSS classes uniquely\n//     identifying the layer containing this text.\n// @param {number} x X coordinate at which to draw the text.\n// @param {number} y Y coordinate at which to draw the text.\n// @param {string} text Text string to draw.\n// @param {(string|object)=} font Either a string of space-separated CSS\n//     classes or a font-spec object, defining the text's font and style.\n// @param {number=} angle Angle at which to rotate the text, in degrees.\n//     Angle is currently unused, it will be implemented in the future.\n// @param {number=} width Maximum width of the text before it wraps.\n// @param {string=} halign Horizontal alignment of the text; either \"left\",\n//     \"center\" or \"right\".\n// @param {string=} valign Vertical alignment of the text; either \"top\",\n//     \"middle\" or \"bottom\".\nCanvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;// Tweak the div's position to match the text's alignment\nif(halign=='center'){x-=info.width/2;}else if(halign=='right'){x-=info.width;}if(valign=='middle'){y-=info.height/2;}else if(valign=='bottom'){y-=info.height;}// Determine whether this text already exists at this position.\n// If so, mark it for inclusion in the next render pass.\nfor(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=true;return;}}// If the text doesn't exist at this position, create a new entry\n// For the very first position we'll re-use the original element,\n// while for subsequent ones we'll clone it.\nposition={active:true,rendered:false,element:positions.length?info.element.clone():info.element,x:x,y:y};positions.push(position);// Move the element to its final position within the container\nposition.element.css({top:Math.round(y),left:Math.round(x),'text-align':halign// In case the text wraps\n});};// Removes one or more text strings from the canvas text overlay.\n//\n// If no parameters are given, all text within the layer is removed.\n//\n// Note that the text is not immediately removed; it is simply marked as\n// inactive, which will result in its removal on the next render pass.\n// This avoids the performance penalty for 'clear and redraw' behavior,\n// where we potentially get rid of all text on a layer, but will likely\n// add back most or all of it later, as when redrawing axes, for example.\n//\n// @param {string} layer A string of space-separated CSS classes uniquely\n//     identifying the layer containing this text.\n// @param {number=} x X coordinate of the text.\n// @param {number=} y Y coordinate of the text.\n// @param {string=} text Text string to remove.\n// @param {(string|object)=} font Either a string of space-separated CSS\n//     classes or a font-spec object, defining the text's font and style.\n// @param {number=} angle Angle at which the text is rotated, in degrees.\n//     Angle is currently unused, it will be implemented in the future.\nCanvas.prototype.removeText=function(layer,x,y,text,font,angle){if(text==null){var layerCache=this._textCache[layer];if(layerCache!=null){for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){position.active=false;}}}}}}}else{var positions=this.getTextInfo(layer,text,font,angle).positions;for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=false;}}}};///////////////////////////////////////////////////////////////////////////\n// The top-level container for the entire plot.\nfunction Plot(placeholder,data_,options_,plugins){// data is on the form:\n//   [ series1, series2 ... ]\n// where series is either just the data as [ [x1, y1], [x2, y2], ... ]\n// or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\nvar series=[],options={// the color theme used for graphs\ncolors:['#edc240','#afd8f8','#cb4b4b','#4da74d','#9440ed'],legend:{show:true,noColumns:1,// number of colums in legend table\nlabelFormatter:null,// fn: string -> string\nlabelBoxBorderColor:'#ccc',// border color for the little label boxes\ncontainer:null,// container (as jQuery object) to put legend in, null means default on top of graph\nposition:'ne',// position of default legend container within plot\nmargin:5,// distance from grid edge to default legend container within plot\nbackgroundColor:null,// null means auto-detect\nbackgroundOpacity:0.85,// set to 0 to avoid background\nsorted:null// default to no legend sorting\n},xaxis:{show:null,// null = auto-detect, true = always, false = never\nposition:'bottom',// or \"top\"\nmode:null,// null or \"time\"\nfont:null,// null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\ncolor:null,// base color, labels, ticks\ntickColor:null,// possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\ntransform:null,// null or f: number -> number to transform axis\ninverseTransform:null,// if transform is set, this should be the inverse function\nmin:null,// min. value to show, null means set automatically\nmax:null,// max. value to show, null means set automatically\nautoscaleMargin:null,// margin in % to add if auto-setting min/max\nticks:null,// either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\ntickFormatter:null,// fn: number -> string\nlabelWidth:null,// size of tick labels in pixels\nlabelHeight:null,reserveSpace:null,// whether to reserve space even if axis isn't shown\ntickLength:null,// size in pixels of ticks, or \"full\" for whole line\nalignTicksWithAxis:null,// axis number or null for no sync\ntickDecimals:null,// no. of decimals, null means auto\ntickSize:null,// number or [number, \"unit\"]\nminTickSize:null// number or [number, \"unit\"]\n},yaxis:{autoscaleMargin:0.02,position:'left'// or \"right\"\n},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,// in pixels\nfill:true,fillColor:'#ffffff',symbol:'circle'// or callback\n},lines:{// we don't put in show: false so we can see\n// whether lines were actively disabled\nlineWidth:2,// in pixels\nfill:false,fillColor:null,steps:false// Omit 'zero', so we can later default its value to\n// match that of the 'fill' option.\n},bars:{show:false,lineWidth:2,// in pixels\nbarWidth:1,// in units of the x axis\nfill:true,fillColor:null,align:'left',// \"left\", \"right\", or \"center\"\nhorizontal:false,zero:true},shadowSize:3,highlightColor:null},grid:{show:true,aboveData:false,color:'#545454',// primary color used for outline and labels\nbackgroundColor:null,// null for transparent, else color\nborderColor:null,// set if different from the grid color\ntickColor:null,// color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\nmargin:0,// distance from the canvas edge to the grid\nlabelMargin:5,// in pixels\neventSectionHeight:0,// space for event section\naxisMargin:8,// in pixels\nborderWidth:2,// in pixels\nminBorderMargin:null,// in pixels, null means taken from points radius\nmarkings:null,// array of ranges or fn: axes -> array of ranges\nmarkingsColor:'#f4f4f4',markingsLineWidth:2,// interactive stuff\nclickable:false,hoverable:false,autoHighlight:true,// highlight in case mouse is near\nmouseActiveRadius:10// how far the mouse can be away to activate an item\n},interaction:{redrawOverlayInterval:1000/60// time between updates, -1 means in same flow\n},hooks:{}},surface=null,// the canvas for the plot itself\noverlay=null,// canvas for interactive stuff on top of plot\neventHolder=null,// jQuery object that events should be bound to\nctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;// public functions\nplot.setData=setData;plot.setupGrid=setupGrid;plot.draw=draw;plot.getPlaceholder=function(){return placeholder;};plot.getCanvas=function(){return surface.element;};plot.getPlotOffset=function(){return plotOffset;};plot.width=function(){return plotWidth;};plot.height=function(){return plotHeight;};plot.offset=function(){var o=eventHolder.offset();o.left+=plotOffset.left;o.top+=plotOffset.top;return o;};plot.getData=function(){return series;};plot.getAxes=function(){var res={};$.each(xaxes.concat(yaxes),function(_,axis){if(axis)res[axis.direction+(axis.n!=1?axis.n:'')+'axis']=axis;});return res;};plot.getXAxes=function(){return xaxes;};plot.getYAxes=function(){return yaxes;};plot.c2p=canvasToAxisCoords;plot.p2c=axisToCanvasCoords;plot.getOptions=function(){return options;};plot.highlight=highlight;plot.unhighlight=unhighlight;plot.triggerRedrawOverlay=triggerRedrawOverlay;plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,'x')-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,'y')-1].p2c(+point.y)+plotOffset.top,10)};};plot.shutdown=shutdown;plot.destroy=function(){shutdown();placeholder.removeData('plot').empty();series=[];options=null;surface=null;overlay=null;eventHolder=null;ctx=null;octx=null;xaxes=[];yaxes=[];hooks=null;highlights=[];plot=null;};plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height);overlay.resize(width,height);};// public attributes\nplot.hooks=hooks;// initialize\ninitPlugins(plot);parseOptions(options_);setupCanvases();setData(data_);setupGrid();draw();bindEvents();function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i){hook[i].apply(this,args);}}function initPlugins(){// References to key classes, allowing plugins to modify them\nvar classes={Canvas:Canvas};for(var i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes);if(p.options)$.extend(true,options,p.options);}}function parseOptions(opts){$.extend(true,options,opts);// $.extend merges arrays, rather than replacing them.  When less\n// colors are provided than the size of the default palette, we\n// end up with those colors plus the remaining defaults, which is\n// not expected behavior; avoid it by replacing them here.\nif(opts&&opts.colors){options.colors=opts.colors;}if(options.xaxis.color==null)options.xaxis.color=$.color.parse(options.grid.color).scale('a',0.22).toString();if(options.yaxis.color==null)options.yaxis.color=$.color.parse(options.grid.color).scale('a',0.22).toString();if(options.xaxis.tickColor==null)// grid.tickColor for back-compatibility\noptions.xaxis.tickColor=options.grid.tickColor||options.xaxis.color;if(options.yaxis.tickColor==null)// grid.tickColor for back-compatibility\noptions.yaxis.tickColor=options.grid.tickColor||options.yaxis.color;if(options.grid.borderColor==null)options.grid.borderColor=options.grid.color;if(options.grid.tickColor==null)options.grid.tickColor=$.color.parse(options.grid.color).scale('a',0.22).toString();// Fill in defaults for axis options, including any unspecified\n// font-spec fields, if a font-spec was provided.\n// If no x/y axis options were provided, create one of each anyway,\n// since the rest of the code assumes that they exist.\nvar i,axisOptions,axisCount,fontSize=placeholder.css('font-size'),fontSizeDefault=fontSize?+fontSize.replace('px',''):13,fontDefaults={style:placeholder.css('font-style'),size:Math.round(0.8*fontSizeDefault),variant:placeholder.css('font-variant'),weight:placeholder.css('font-weight'),family:placeholder.css('font-family')};axisCount=options.xaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.xaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color;}axisOptions=$.extend(true,{},options.xaxis,axisOptions);options.xaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color;}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15);}}}axisCount=options.yaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.yaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color;}axisOptions=$.extend(true,{},options.yaxis,axisOptions);options.yaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color;}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15);}}}// backwards compatibility, to be removed in future\nif(options.xaxis.noTicks&&options.xaxis.ticks==null)options.xaxis.ticks=options.xaxis.noTicks;if(options.yaxis.noTicks&&options.yaxis.ticks==null)options.yaxis.ticks=options.yaxis.noTicks;if(options.x2axis){options.xaxes[1]=$.extend(true,{},options.xaxis,options.x2axis);options.xaxes[1].position='top';// Override the inherit to allow the axis to auto-scale\nif(options.x2axis.min==null){options.xaxes[1].min=null;}if(options.x2axis.max==null){options.xaxes[1].max=null;}}if(options.y2axis){options.yaxes[1]=$.extend(true,{},options.yaxis,options.y2axis);options.yaxes[1].position='right';// Override the inherit to allow the axis to auto-scale\nif(options.y2axis.min==null){options.yaxes[1].min=null;}if(options.y2axis.max==null){options.yaxes[1].max=null;}}if(options.grid.coloredAreas)options.grid.markings=options.grid.coloredAreas;if(options.grid.coloredAreasColor)options.grid.markingsColor=options.grid.coloredAreasColor;if(options.lines)$.extend(true,options.series.lines,options.lines);if(options.points)$.extend(true,options.series.points,options.points);if(options.bars)$.extend(true,options.series.bars,options.bars);if(options.shadowSize!=null)options.series.shadowSize=options.shadowSize;if(options.highlightColor!=null)options.series.highlightColor=options.highlightColor;// save options on axes for future reference\nfor(i=0;i<options.xaxes.length;++i){getOrCreateAxis(xaxes,i+1).options=options.xaxes[i];}for(i=0;i<options.yaxes.length;++i){getOrCreateAxis(yaxes,i+1).options=options.yaxes[i];}// add hooks from options\nfor(var n in hooks){if(options.hooks[n]&&options.hooks[n].length)hooks[n]=hooks[n].concat(options.hooks[n]);}executeHooks(hooks.processOptions,[options]);}function setData(d){series=parseData(d);fillInSeriesOptions();processData();}function parseData(d){var res=[];for(var i=0;i<d.length;++i){var s=$.extend(true,{},options.series);if(d[i].data!=null){s.data=d[i].data;// move the data instead of deep-copy\ndelete d[i].data;$.extend(true,s,d[i]);d[i].data=s.data;}else s.data=d[i];res.push(s);}return res;}function axisNumber(obj,coord){var a=obj[coord+'axis'];if(typeof a=='object')// if we got a real axis, extract number\na=a.n;if(typeof a!='number')a=1;// default to first axis\nreturn a;}function allAxes(){// return flat array without annoying null entries\nreturn $.grep(xaxes.concat(yaxes),function(a){return a;});}function canvasToAxisCoords(pos){// return an object with x/y corresponding to all used axes\nvar res={},i,axis;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis)res['x'+axis.n]=axis.c2p(pos.left);}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis)res['y'+axis.n]=axis.c2p(pos.top);}if(res.x1!==undefined)res.x=res.x1;if(res.y1!==undefined)res.y=res.y1;return res;}function axisToCanvasCoords(pos){// get canvas coords from the first pair of x/y found in pos\nvar res={},i,axis,key;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used){key='x'+axis.n;if(pos[key]==null&&axis.n==1)key='x';if(pos[key]!=null){res.left=axis.p2c(pos[key]);break;}}}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used){key='y'+axis.n;if(pos[key]==null&&axis.n==1)key='y';if(pos[key]!=null){res.top=axis.p2c(pos[key]);break;}}}return res;}function getOrCreateAxis(axes,number){if(!axes[number-1])axes[number-1]={n:number,// save the number for future reference\ndirection:axes==xaxes?'x':'y',options:$.extend(true,{},axes==xaxes?options.xaxis:options.yaxis)};return axes[number-1];}function fillInSeriesOptions(){var neededColors=series.length,maxIndex=-1,i;// Subtract the number of series that already have fixed colors or\n// color indexes from the number that we still need to generate.\nfor(i=0;i<series.length;++i){var sc=series[i].color;if(sc!=null){neededColors--;if(typeof sc=='number'&&sc>maxIndex){maxIndex=sc;}}}// If any of the series have fixed color indexes, then we need to\n// generate at least as many colors as the highest index.\nif(neededColors<=maxIndex){neededColors=maxIndex+1;}// Generate all the colors, using first the option colors and then\n// variations on those colors once they're exhausted.\nvar c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++){c=$.color.parse(colorPool[i%colorPoolSize]||'#666');// Each time we exhaust the colors in the pool we adjust\n// a scaling factor used to produce more variations on\n// those colors. The factor alternates negative/positive\n// to produce lighter/darker colors.\n// Reset the variation after every few cycles, or else\n// it will end up producing only white or black colors.\nif(i%colorPoolSize==0&&i){if(variation>=0){if(variation<0.5){variation=-variation-0.2;}else variation=0;}else variation=-variation;}colors[i]=c.scale('rgb',1+variation);}// Finalize the series options, filling in their colors\nvar colori=0,s;for(i=0;i<series.length;++i){s=series[i];// assign colors\nif(s.color==null){s.color=colors[colori].toString();++colori;}else if(typeof s.color=='number')s.color=colors[s.color].toString();// turn on lines automatically in case nothing is set\nif(s.lines.show==null){var v,show=true;for(v in s){if(s[v]&&s[v].show){show=false;break;}}if(show)s.lines.show=true;}// If nothing was provided for lines.zero, default it to match\n// lines.fill, since areas by default should extend to zero.\nif(s.lines.zero==null){s.lines.zero=!!s.lines.fill;}// setup axes\ns.xaxis=getOrCreateAxis(xaxes,axisNumber(s,'x'));s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,'y'));}}function processData(){var topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE,i,j,k,m,s,points,ps,val,f,p,data,format;function updateAxis(axis,min,max){if(min<axis.datamin&&min!=-fakeInfinity)axis.datamin=min;if(max>axis.datamax&&max!=fakeInfinity)axis.datamax=max;}$.each(allAxes(),function(_,axis){// init axis\naxis.datamin=topSentry;axis.datamax=bottomSentry;axis.used=false;});for(i=0;i<series.length;++i){s=series[i];s.datapoints={points:[]};executeHooks(hooks.processRawData,[s,s.data,s.datapoints]);}// first pass: clean and copy data\nfor(i=0;i<series.length;++i){s=series[i];data=s.data;format=s.datapoints.format;if(!format){format=[];// find out how to copy\nformat.push({x:true,number:true,required:true});format.push({y:true,number:true,required:true});if(s.stack||s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:true,number:true,required:false,defaultValue:0,autoscale:autoscale});if(s.bars.horizontal){delete format[format.length-1].y;format[format.length-1].x=true;}}s.datapoints.format=format;}if(s.datapoints.pointsize!=null)continue;// already filled in\ns.datapoints.pointsize=format.length;ps=s.datapoints.pointsize;points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;s.xaxis.used=s.yaxis.used=true;for(j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=p==null;if(!nullify){for(m=0;m<ps;++m){val=p[m];f=format[m];if(f){if(f.number&&val!=null){val=+val;// convert to number\nif(isNaN(val))val=null;else if(val==Infinity)val=fakeInfinity;else if(val==-Infinity)val=-fakeInfinity;}if(val==null){if(f.required)nullify=true;if(f.defaultValue!=null)val=f.defaultValue;}}points[k+m]=val;}}if(nullify){for(m=0;m<ps;++m){val=points[k+m];if(val!=null){f=format[m];// extract min/max info\nif(f.autoscale!==false){if(f.x){updateAxis(s.xaxis,val,val);}if(f.y){updateAxis(s.yaxis,val,val);}}}points[k+m]=null;}}if(insertSteps&&k>0&&(!nullify||points[k-ps]!=null)){// copy the point to make room for a middle point\nfor(m=0;m<ps;++m){points[k+ps+m]=points[k+m];}// middle point has same y\npoints[k+1]=points[k-ps+1]||0;// if series has null values, let's give the last !null value a nice step\nif(nullify)points[k]=p[0];// we've added a point, better reflect that\nk+=ps;}}}// give the hooks a chance to run\nfor(i=0;i<series.length;++i){s=series[i];points=s.datapoints.points;ps=s.datapoints.pointsize;// grafana\nif(s.transform==='negative-Y'){for(j=0;j<points.length;j+=ps){if(points[j]==null)continue;val=points[j+1];points[j+1]=-val;}}executeHooks(hooks.processDatapoints,[s,s.datapoints]);}// second pass: find datamax/datamin for auto-scaling\nfor(i=0;i<series.length;++i){s=series[i];points=s.datapoints.points;ps=s.datapoints.pointsize;format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps){if(points[j]==null)continue;for(m=0;m<ps;++m){val=points[j+m];f=format[m];if(!f||f.autoscale===false||val==fakeInfinity||val==-fakeInfinity)continue;if(f.x){if(val<xmin)xmin=val;if(val>xmax)xmax=val;}if(f.y){if(val<ymin)ymin=val;if(val>ymax)ymax=val;}}}if(s.bars.show){// make sure we got room for the bar on the dancing floor\nvar delta;switch(s.bars.align){case'left':delta=0;break;case'right':delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2;}if(s.bars.horizontal){ymin+=delta;ymax+=delta+s.bars.barWidth;}else{xmin+=delta;xmax+=delta+s.bars.barWidth;}}updateAxis(s.xaxis,xmin,xmax);updateAxis(s.yaxis,ymin,ymax);}$.each(allAxes(),function(_,axis){if(axis.datamin==topSentry)axis.datamin=null;if(axis.datamax==bottomSentry)axis.datamax=null;});}function setupCanvases(){// Make sure the placeholder is clear of everything except canvases\n// from a previous plot in this container that we'll try to re-use.\nplaceholder.find('.flot-temp-elem').remove();if(placeholder.css('position')=='static')placeholder.css('position','relative');// for positioning labels and overlay\nsurface=new Canvas('flot-base',placeholder);overlay=new Canvas('flot-overlay',placeholder);// overlay canvas for interactive features\nctx=surface.context;octx=overlay.context;// define which element we're listening for events on\neventHolder=$(overlay.element).unbind();// If we're re-using a plot object, shut down the old one\nvar existing=placeholder.data('plot');if(existing){existing.shutdown();overlay.clear();}// save in case we get replotted\nplaceholder.data('plot',plot);}function bindEvents(){// bind events\nif(options.grid.hoverable){eventHolder.mousemove(onMouseMove);// Use bind, rather than .mouseleave, because we officially\n// still support jQuery 1.2.6, which doesn't define a shortcut\n// for mouseenter or mouseleave.  This was a bug/oversight that\n// was fixed somewhere around 1.3.x.  We can return to using\n// .mouseleave when we drop support for 1.2.6.\neventHolder.bind('mouseleave',onMouseLeave);}if(options.grid.clickable)eventHolder.click(onClick);executeHooks(hooks.bindEvents,[eventHolder]);}function shutdown(){if(redrawTimeout)clearTimeout(redrawTimeout);eventHolder.unbind('mousemove',onMouseMove);eventHolder.unbind('mouseleave',onMouseLeave);eventHolder.unbind('click',onClick);executeHooks(hooks.shutdown,[eventHolder]);}function setTransformationHelpers(axis){// set helper functions on the axis, assumes plot area\n// has been computed already\nfunction identity(x){return x;}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;// precompute how much the axis is scaling a point\n// in canvas space\nif(axis.direction=='x'){s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min));m=Math.min(t(axis.max),t(axis.min));}else{s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min));s=-s;m=Math.max(t(axis.max),t(axis.min));}// data point to canvas coordinate\nif(t==identity)// slight optimization\naxis.p2c=function(p){return(p-m)*s;};else axis.p2c=function(p){return(t(p)-m)*s;};// canvas coordinate to data point\nif(!it)axis.c2p=function(c){return m+c/s;};else axis.c2p=function(c){return it(m+c/s);};}function measureTickLabels(axis){var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||(axis.direction=='x'?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+'Axis '+axis.direction+axis.n+'Axis',layer='flot-'+axis.direction+'-axis flot-'+axis.direction+axis.n+'-axis '+legacyStyles,font=opts.font||'flot-tick-label tickLabel';for(var i=0;i<ticks.length;++i){var t=ticks[i];if(!t.label)continue;var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);/// Grafana fix, add +1 to label width\nlabelWidth=Math.max(labelWidth,info.width+1);labelHeight=Math.max(labelHeight,info.height);}axis.labelWidth=opts.labelWidth||labelWidth;axis.labelHeight=opts.labelHeight||labelHeight;}function allocateAxisBoxFirstPhase(axis){// find the bounding box of the axis by looking at label\n// widths/heights and ticks, make room by diminishing the\n// plotOffset; this first phase only looks at one\n// dimension per axis, the other dimension depends on the\n// other axes so will have to wait\nvar lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis=axis.direction==='x',tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,eventSectionPadding=options.grid.eventSectionHeight,innermost=true,outermost=true,first=true,found=false;// Determine the axis's position in its direction and on its side\n$.each(isXAxis?xaxes:yaxes,function(i,a){if(a&&(a.show||a.reserveSpace)){if(a===axis){found=true;}else if(a.options.position===pos){if(found){outermost=false;}else{innermost=false;}}if(!found){first=false;}}});// The outermost axis on each side has no margin\nif(outermost){axisMargin=0;}// The ticks for the first axis in each direction stretch across\nif(tickLength==null){tickLength=first?'full':5;}if(!isNaN(+tickLength))padding+=+tickLength;if(isXAxis){// Add space for event section\nlh+=padding;lh+=eventSectionPadding;if(pos=='bottom'){plotOffset.bottom+=lh+axisMargin;axis.box={top:surface.height-plotOffset.bottom,height:lh};}else{axis.box={top:plotOffset.top+axisMargin,height:lh};plotOffset.top+=lh+axisMargin;}}else{lw+=padding;if(pos=='left'){axis.box={left:plotOffset.left+axisMargin,width:lw};plotOffset.left+=lw+axisMargin;}else{plotOffset.right+=lw+axisMargin;axis.box={left:surface.width-plotOffset.right,width:lw};}}// save for future reference\naxis.position=pos;axis.tickLength=tickLength;axis.box.padding=padding;axis.box.eventSectionPadding=eventSectionPadding;axis.innermost=innermost;}function allocateAxisBoxSecondPhase(axis){// now that all axis boxes have been placed in one\n// dimension, we can set the remaining dimension coordinates\nif(axis.direction=='x'){axis.box.left=plotOffset.left-axis.labelWidth/2;axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth;}else{axis.box.top=plotOffset.top-axis.labelHeight/2;axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight;}}function adjustLayoutForThingsStickingOut(){// possibly adjust plot offset to ensure everything stays\n// inside the canvas and isn't clipped off\nvar minMargin=options.grid.minBorderMargin,i;// check stuff from the plot (FIXME: this should just read\n// a value from the series, otherwise it's impossible to\n// customize)\nif(minMargin==null){minMargin=0;for(i=0;i<series.length;++i){minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2));}}var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};// check axis labels, note we don't check the actual\n// labels but instead use the overall width/height to not\n// jump as much around with replots\n$.each(allAxes(),function(_,axis){if(axis.reserveSpace&&axis.ticks&&axis.ticks.length){if(axis.direction==='x'){margins.left=Math.max(margins.left,axis.labelWidth/2);margins.right=Math.max(margins.right,axis.labelWidth/2);}else{margins.bottom=Math.max(margins.bottom,axis.labelHeight/2);margins.top=Math.max(margins.top,axis.labelHeight/2);}}});plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left));plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right));plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top));plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom));}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;// Initialize the plot's offset from the edge of the canvas\nfor(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]=typeof margin=='number'?margin:margin[a]||0;}executeHooks(hooks.processOffset,[plotOffset]);// If the grid is visible, add its border width to the offset\nfor(var a in plotOffset){if(typeof options.grid.borderWidth=='object'){plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0;}else{plotOffset[a]+=showGrid?options.grid.borderWidth:0;}}$.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=axisOpts.show==null?axis.used:axisOpts.show;axis.reserveSpace=axisOpts.reserveSpace==null?axis.show:axisOpts.reserveSpace;setRange(axis);});executeHooks(hooks.processRange,[]);if(showGrid){var allocatedAxes;var i;(function(){allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace;});var snaped=false;for(i=0;i<2;i++){$.each(allocatedAxes,function(_,axis){// make the ticks\nsetupTickGeneration(axis);setTicks(axis);snaped=snapRangeToTicks(axis,axis.ticks)||snaped;// find labelWidth/Height for axis\nmeasureTickLabels(axis);});if(snaped&&hooks.processRange.length>0){executeHooks(hooks.processRange,[]);snaped=false;}else{break;}}// with all dimensions calculated, we can compute the\n// axis bounding boxes, start from the outside\n// (reverse order)\nfor(i=allocatedAxes.length-1;i>=0;--i){allocateAxisBoxFirstPhase(allocatedAxes[i]);}// make sure we've got enough space for things that\n// might stick out\nadjustLayoutForThingsStickingOut();$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis);});})();}plotWidth=surface.width-plotOffset.left-plotOffset.right;plotHeight=surface.height-plotOffset.bottom-plotOffset.top;// now we got the proper plot dimensions, we can compute the scaling\n$.each(axes,function(_,axis){setTransformationHelpers(axis);});if(showGrid){drawAxisLabels();}insertLegend();}function setRange(axis){var opts=axis.options,min=+(opts.min!=null?opts.min:axis.datamin),max=+(opts.max!=null?opts.max:axis.datamax),delta=max-min;if(delta==0.0){// Grafana fix: wide Y min and max using increased wideFactor\n// when all series values are the same\nvar wideFactor=0.25;var widen=Math.abs(max==0?1:max*wideFactor);if(opts.min==null){min-=widen;}// always widen max if we couldn't widen min to ensure we\n// don't fall into min == max which doesn't work\nif(opts.max==null||opts.min!=null){max+=widen;}}else{// consider autoscaling\nvar margin=opts.autoscaleMargin;if(margin!=null){if(opts.min==null){min-=delta*margin;// make sure we don't go below zero if all values\n// are positive\nif(min<0&&axis.datamin!=null&&axis.datamin>=0)min=0;}if(opts.max==null){max+=delta*margin;if(max>0&&axis.datamax!=null&&axis.datamax<=0)max=0;}}}axis.min=min;axis.max=max;}function setupTickGeneration(axis){var opts=axis.options;// estimate number of ticks\nvar noTicks;if(typeof opts.ticks=='number'&&opts.ticks>0)noTicks=opts.ticks;// heuristic based on the model a*sqrt(x) fitted to\n// some data points that seemed reasonable\nelse noTicks=0.3*Math.sqrt(axis.direction=='x'?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;if(maxDec!=null&&dec>maxDec){dec=maxDec;}var magn=Math.pow(10,-dec),norm=delta/magn,// norm is between 1.0 and 10.0\nsize;if(norm<1.5){size=1;}else if(norm<3){size=2;// special case for 2.5, requires an extra decimal\nif(norm>2.25&&(maxDec==null||dec+1<=maxDec)){size=2.5;++dec;}}else if(norm<7.5){size=5;}else{size=10;}size*=magn;if(opts.minTickSize!=null&&size<opts.minTickSize){size=opts.minTickSize;}axis.delta=delta;axis.tickDecimals=Math.max(0,maxDec!=null?maxDec:dec);axis.tickSize=opts.tickSize||size;// grafana addition\nif(opts.tickDecimals===null||opts.tickDecimals===undefined){axis.scaledDecimals=axis.tickDecimals+dec;}// Time mode was moved to a plug-in in 0.8, and since so many people use it\n// we'll add an especially friendly reminder to make sure they included it.\nif(opts.mode=='time'&&!axis.tickGenerator){throw new Error('Time mode requires the flot.time plugin.');}// Flot supports base-10 axes; any other mode else is handled by a plug-in,\n// like flot.time.js.\nif(!axis.tickGenerator){axis.tickGenerator=function(axis){var ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN,prev;do{prev=v;v=start+i*axis.tickSize;ticks.push(v);++i;}while(v<axis.max&&v!=prev);return ticks;};axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=''+Math.round(value*factor)/factor;// If tickDecimals was specified, ensure that we have exactly that\n// much precision; otherwise default to the value's own precision.\nif(axis.tickDecimals!=null){var decimal=formatted.indexOf('.');var precision=decimal==-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+'.')+(''+factor).substr(1,axis.tickDecimals-precision);}}return formatted;};}if($.isFunction(opts.tickFormatter))axis.tickFormatter=function(v,axis){return''+opts.tickFormatter(v,axis);};if(opts.alignTicksWithAxis!=null){var otherAxis=(axis.direction=='x'?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){// consider snapping min/max to outermost nice ticks\nvar niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0){if(opts.min==null)axis.min=Math.min(axis.min,niceTicks[0]);if(opts.max==null&&niceTicks.length>1)axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1]);}axis.tickGenerator=function(axis){// copy ticks, scaled to this axis\nvar ticks=[],v,i;for(i=0;i<otherAxis.ticks.length;++i){v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min);v=axis.min+v*(axis.max-axis.min);ticks.push(v);}return ticks;};// we might need an extra decimal since forced\n// ticks don't necessarily fit naturally\nif(!axis.mode&&opts.tickDecimals==null){var extraDec=Math.max(0,-Math.floor(Math.log(axis.delta)/Math.LN10)+1),ts=axis.tickGenerator(axis);// only proceed if the tick interval rounded\n// with an extra decimal doesn't give us a\n// zero at end\nif(!(ts.length>1&&/\\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))))axis.tickDecimals=extraDec;}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];if(oticks==null||typeof oticks=='number'&&oticks>0)ticks=axis.tickGenerator(axis);else if(oticks){if($.isFunction(oticks))// generate the ticks\nticks=oticks(axis);else ticks=oticks;}// clean up/labelify the supplied ticks, copy them over\nvar i,v;axis.ticks=[];for(i=0;i<ticks.length;++i){var label=null;var t=ticks[i];if(typeof t=='object'){v=+t[0];if(t.length>1)label=t[1];}else v=+t;if(label==null)label=axis.tickFormatter(v,axis);if(!isNaN(v))axis.ticks.push({v:v,label:label});}}function snapRangeToTicks(axis,ticks){var changed=false;if(axis.options.autoscaleMargin&&ticks.length>0){// snap to ticks\nif(axis.options.min==null){axis.min=Math.min(axis.min,ticks[0].v);changed=true;}if(axis.options.max==null&&ticks.length>1){axis.max=Math.max(axis.max,ticks[ticks.length-1].v);changed=true;}}return changed;}function draw(){surface.clear();executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;// draw background, if any\nif(grid.show&&grid.backgroundColor)drawBackground();if(grid.show&&!grid.aboveData){drawGrid();}for(var i=0;i<series.length;++i){executeHooks(hooks.drawSeries,[ctx,series[i]]);drawSeries(series[i]);}executeHooks(hooks.draw,[ctx]);if(grid.show&&grid.aboveData){drawGrid();}surface.render();// A draw implies that either the axes or data have changed, so we\n// should probably update the overlay highlights as well.\ntriggerRedrawOverlay();}function extractRange(ranges,coord){var axis,from,to,key,axes=allAxes();for(var i=0;i<axes.length;++i){axis=axes[i];if(axis.direction==coord){key=coord+axis.n+'axis';if(!ranges[key]&&axis.n==1)key=coord+'axis';// support x1axis as xaxis\nif(ranges[key]){from=ranges[key].from;to=ranges[key].to;break;}}}// backwards-compat stuff - to be removed in future\nif(!ranges[key]){axis=coord=='x'?xaxes[0]:yaxes[0];from=ranges[coord+'1'];to=ranges[coord+'2'];}// auto-reverse as an added bonus\nif(from!=null&&to!=null&&from>to){var tmp=from;from=to;to=tmp;}return{from:from,to:to,axis:axis};}function drawBackground(){ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,'rgba(255, 255, 255, 0)');ctx.fillRect(0,0,plotWidth,plotHeight);ctx.restore();}function drawGrid(){var i,axes,bw,bc;ctx.save();ctx.translate(plotOffset.left,plotOffset.top);// draw markings\nvar markings=options.grid.markings;if(markings){if($.isFunction(markings)){axes=plot.getAxes();// xmin etc. is backwards compatibility, to be\n// removed in the future\naxes.xmin=axes.xaxis.min;axes.xmax=axes.xaxis.max;axes.ymin=axes.yaxis.min;axes.ymax=axes.yaxis.max;markings=markings(axes);}for(i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,'x'),yrange=extractRange(m,'y');// fill in missing\nif(xrange.from==null)xrange.from=xrange.axis.min;if(xrange.to==null)xrange.to=xrange.axis.max;if(yrange.from==null)yrange.from=yrange.axis.min;if(yrange.to==null)yrange.to=yrange.axis.max;// clip\nif(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)continue;xrange.from=Math.max(xrange.from,xrange.axis.min);xrange.to=Math.min(xrange.to,xrange.axis.max);yrange.from=Math.max(yrange.from,yrange.axis.min);yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(xequal&&yequal){continue;}// then draw\nxrange.from=Math.floor(xrange.axis.p2c(xrange.from));xrange.to=Math.floor(xrange.axis.p2c(xrange.to));yrange.from=Math.floor(yrange.axis.p2c(yrange.from));yrange.to=Math.floor(yrange.axis.p2c(yrange.to));if(xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?0.5:0;ctx.beginPath();ctx.strokeStyle=m.color||options.grid.markingsColor;ctx.lineWidth=lineWidth;if(xequal){ctx.moveTo(xrange.to+subPixel,yrange.from);ctx.lineTo(xrange.to+subPixel,yrange.to);}else{ctx.moveTo(xrange.from,yrange.to+subPixel);ctx.lineTo(xrange.to,yrange.to+subPixel);}ctx.stroke();}else{ctx.fillStyle=m.color||options.grid.markingsColor;ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to);}}}// draw the ticks\naxes=allAxes();bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var axis=axes[j],box=axis.box,t=axis.tickLength,x,y,xoff,yoff;if(!axis.show||axis.ticks.length==0)continue;ctx.lineWidth=1;// find the edges\nif(axis.direction=='x'){x=0;if(t=='full')y=axis.position=='top'?0:plotHeight;else y=box.top-plotOffset.top+(axis.position=='top'?box.height:0);}else{y=0;if(t=='full')x=axis.position=='left'?0:plotWidth;else x=box.left-plotOffset.left+(axis.position=='left'?box.width:0);}// draw tick bar\nif(!axis.innermost){ctx.strokeStyle=axis.options.color;ctx.beginPath();xoff=yoff=0;if(axis.direction=='x')xoff=plotWidth+1;else yoff=plotHeight+1;if(ctx.lineWidth==1){if(axis.direction=='x'){y=Math.floor(y)+0.5;}else{x=Math.floor(x)+0.5;}}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff);ctx.stroke();}// draw ticks\nctx.strokeStyle=axis.options.tickColor;ctx.beginPath();for(i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0;if(isNaN(v)||v<axis.min||v>axis.max||// skip those lying on the axes if we got a border\nt=='full'&&(typeof bw=='object'&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max))continue;if(axis.direction=='x'){x=axis.p2c(v);yoff=t=='full'?-plotHeight:t;if(axis.position=='top')yoff=-yoff;}else{y=axis.p2c(v);xoff=t=='full'?-plotWidth:t;if(axis.position=='left')xoff=-xoff;}if(ctx.lineWidth==1){if(axis.direction=='x')x=Math.floor(x)+0.5;else y=Math.floor(y)+0.5;}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff);}ctx.stroke();}// draw border\nif(bw){// If either borderWidth or borderColor is an object, then draw the border\n// line by line instead of as one rectangle\nbc=options.grid.borderColor;if(typeof bw=='object'||typeof bc=='object'){if(typeof bw!=='object'){bw={top:bw,right:bw,bottom:bw,left:bw};}if(typeof bc!=='object'){bc={top:bc,right:bc,bottom:bc,left:bc};}if(bw.top>0){ctx.strokeStyle=bc.top;ctx.lineWidth=bw.top;ctx.beginPath();ctx.moveTo(0-bw.left,0-bw.top/2);ctx.lineTo(plotWidth,0-bw.top/2);ctx.stroke();}if(bw.right>0){ctx.strokeStyle=bc.right;ctx.lineWidth=bw.right;ctx.beginPath();ctx.moveTo(plotWidth+bw.right/2,0-bw.top);ctx.lineTo(plotWidth+bw.right/2,plotHeight);ctx.stroke();}if(bw.bottom>0){ctx.strokeStyle=bc.bottom;ctx.lineWidth=bw.bottom;ctx.beginPath();ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2);ctx.lineTo(0,plotHeight+bw.bottom/2);ctx.stroke();}if(bw.left>0){ctx.strokeStyle=bc.left;ctx.lineWidth=bw.left;ctx.beginPath();ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom);ctx.lineTo(0-bw.left/2,0);ctx.stroke();}}else{ctx.lineWidth=bw;ctx.strokeStyle=options.grid.borderColor;ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw);}}ctx.restore();}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var box=axis.box,legacyStyles=axis.direction+'Axis '+axis.direction+axis.n+'Axis',layer='flot-'+axis.direction+'-axis flot-'+axis.direction+axis.n+'-axis '+legacyStyles,font=axis.options.font||'flot-tick-label tickLabel',tick,x,y,halign,valign;// Remove text before checking for axis.show and ticks.length;\n// otherwise plugins, like flot-tickrotor, that draw their own\n// tick labels will end up with both theirs and the defaults.\nsurface.removeText(layer);if(!axis.show||axis.ticks.length==0)return;for(var i=0;i<axis.ticks.length;++i){tick=axis.ticks[i];if(!tick.label||tick.v<axis.min||tick.v>axis.max)continue;if(axis.direction=='x'){halign='center';x=plotOffset.left+axis.p2c(tick.v);if(axis.position=='bottom'){y=box.top+box.padding+box.eventSectionPadding;}else{y=box.top+box.height-box.padding;valign='bottom';}}else{valign='middle';y=plotOffset.top+axis.p2c(tick.v);if(axis.position=='left'){x=box.left+box.width-box.padding;halign='right';}else{x=box.left+box.padding;}}surface.addText(layer,x,y,tick.label,font,null,null,halign,valign);}});}function drawOrphanedPoints(series){/* Filters series data for points with no neighbors before or after\n       * and plots single 0.5 radius points for them so that they are displayed.\n       */var abandonedPoints=[];var beforeX=null;var afterX=null;var datapoints=series.datapoints;// find any points with no neighbors before or after\nvar emptyPoints=[];for(var j=0;j<datapoints.pointsize-2;j++){emptyPoints.push(0);}for(var i=0;i<datapoints.points.length;i+=datapoints.pointsize){var x=datapoints.points[i],y=datapoints.points[i+1];if(i===datapoints.points.length-datapoints.pointsize){afterX=null;}else{afterX=datapoints.points[i+datapoints.pointsize];}if(x!==null&&y!==null&&beforeX===null&&afterX===null){abandonedPoints.push(x);abandonedPoints.push(y);abandonedPoints.push.apply(abandonedPoints,emptyPoints);}beforeX=x;}var olddatapoints=datapoints.points;datapoints.points=abandonedPoints;series.points.radius=series.lines.lineWidth/2;// plot the orphan points with a radius of lineWidth/2\ndrawSeriesPoints(series);// reset old info\ndatapoints.points=olddatapoints;}function drawSeries(series){if(series.lines.show){drawSeriesLines(series);if(!series.points.show&&!series.bars.show){// not necessary if user wants points displayed for everything\ndrawOrphanedPoints(series);}}if(series.bars.show)drawSeriesBars(series);if(series.points.show)drawSeriesPoints(series);}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(x1==null||x2==null)continue;// clip with ymin\nif(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;// line segment is outside\n// compute new intersection point\nx1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min;}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min;}// clip with ymax\nif(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max;}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max;}// clip with xmin\nif(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min;}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min;}// clip with xmax\nif(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max;}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max;}if(x1!=prevx||y1!=prevy)ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset);prevx=x2;prevy=y2;ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset);}ctx.stroke();}function plotLineArea(datapoints,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,areaOpen=false,ypos=1,segmentStart=0,segmentEnd=0;// we process each segment in two turns, first forward\n// direction to sketch out top, then once we hit the\n// end we go backwards to sketch the bottom\nwhile(true){if(ps>0&&i>points.length+ps)break;i+=ps;// ps is negative if going backwards\nvar x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&x1!=null&&x2==null){// at turning point\nsegmentEnd=i;ps=-ps;ypos=2;continue;}if(ps<0&&i==segmentStart+ps){// done with the reverse sweep\nctx.fill();areaOpen=false;ps=-ps;ypos=1;i=segmentStart=segmentEnd+ps;continue;}}if(x1==null||x2==null)continue;// clip x values\n// clip with xmin\nif(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min;}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min;}// clip with xmax\nif(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max;}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max;}if(!areaOpen){// open area\nctx.beginPath();ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom));areaOpen=true;}// now first check the case where both is outside\nif(y1>=axisy.max&&y2>=axisy.max){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));continue;}else if(y1<=axisy.min&&y2<=axisy.min){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));continue;}// else it's a bit more complicated, there might\n// be a flat maxed out rectangle first, then a\n// triangular cutout or reverse; to find these\n// keep track of the current x values\nvar x1old=x1,x2old=x2;// clip the y values, without shortcutting, we\n// go through all cases in turn\n// clip with ymin\nif(y1<=y2&&y1<axisy.min&&y2>=axisy.min){x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min;}else if(y2<=y1&&y2<axisy.min&&y1>=axisy.min){x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min;}// clip with ymax\nif(y1>=y2&&y1>axisy.max&&y2<=axisy.max){x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max;}else if(y2>=y1&&y2>axisy.max&&y1<=axisy.max){x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max;}// if the x value was changed we got a rectangle\n// to fill\nif(x1!=x1old){ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1));// it goes to (x1, y1), but we fill that below\n}// fill triangular section, this sometimes result\n// in redundant points if (x1, y1) hasn't changed\n// from previous line to, but we just ignore that\nctx.lineTo(axisx.p2c(x1),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));// fill the other rectangle if it's there\nif(x2!=x2old){ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2));}}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineJoin='round';var lw=series.lines.lineWidth,sw=series.shadowSize;// FIXME: consider another form of shadow when filling is turned on\nif(lw>0&&sw>0){// draw shadow as a thick and thin line with transparency\nctx.lineWidth=sw;ctx.strokeStyle='rgba(0,0,0,0.1)';// position shadow at angle from the mid of line\nvar angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis);ctx.lineWidth=sw/2;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis);}ctx.lineWidth=lw;ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);if(fillStyle){ctx.fillStyle=fillStyle;plotLineArea(series.datapoints,series.xaxis,series.yaxis);}if(lw>0)plotLine(series.datapoints,0,0,series.xaxis,series.yaxis);ctx.restore();}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];if(x==null||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)continue;ctx.beginPath();x=axisx.p2c(x);y=axisy.p2c(y)+offset;if(symbol=='circle')ctx.arc(x,y,radius,0,shadow?Math.PI:Math.PI*2,false);else symbol(ctx,x,y,radius,shadow);ctx.closePath();if(fillStyle){ctx.fillStyle=fillStyle;ctx.fill();}ctx.stroke();}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;// If the user sets the line width to 0, we change it to a very\n// small value. A line width of 0 seems to force the default of 1.\n// Doing the conditional here allows the shadow setting to still be\n// optional even with a lineWidth of 0.\nif(lw==0)lw=0.0001;if(lw>0&&sw>0){// draw shadow in two steps\nvar w=sw/2;ctx.lineWidth=w;ctx.strokeStyle='rgba(0,0,0,0.1)';plotPoints(series.datapoints,radius,null,w+w/2,true,series.xaxis,series.yaxis,symbol);ctx.strokeStyle='rgba(0,0,0,0.2)';plotPoints(series.datapoints,radius,null,w/2,true,series.xaxis,series.yaxis,symbol);}ctx.lineWidth=lw;ctx.strokeStyle=series.color;plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,false,series.xaxis,series.yaxis,symbol);ctx.restore();}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;// in horizontal mode, we start the bar from the left\n// instead of from the bottom so it appears to be\n// horizontal rather than vertical\nif(horizontal){drawBottom=drawRight=drawTop=true;drawLeft=false;left=b;right=x;top=y+barLeft;bottom=y+barRight;// account for negative bars\nif(right<left){tmp=right;right=left;left=tmp;drawLeft=true;drawRight=false;}}else{drawLeft=drawRight=drawTop=true;drawBottom=false;left=x+barLeft;right=x+barRight;bottom=b;top=y;// account for negative bars\nif(top<bottom){tmp=top;top=bottom;bottom=tmp;drawBottom=true;drawTop=false;}}// clip\nif(right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max)return;if(left<axisx.min){left=axisx.min;drawLeft=false;}if(right>axisx.max){right=axisx.max;drawRight=false;}if(bottom<axisy.min){bottom=axisy.min;drawBottom=false;}if(top>axisy.max){top=axisy.max;drawTop=false;}left=axisx.p2c(left);bottom=axisy.p2c(bottom);right=axisx.p2c(right);top=axisy.p2c(top);// fill the bar\nif(fillStyleCallback){c.fillStyle=fillStyleCallback(bottom,top);c.fillRect(left,top,right-left,bottom-top);}// draw outline\nif(lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)){c.beginPath();// FIXME: inline moveTo is buggy with excanvas\nc.moveTo(left,bottom);if(drawLeft)c.lineTo(left,top);else c.moveTo(left,top);if(drawTop)c.lineTo(right,top);else c.moveTo(right,top);if(drawRight)c.lineTo(right,bottom);else c.moveTo(right,bottom);if(drawBottom)c.lineTo(left,bottom);else c.moveTo(left,bottom);c.stroke();}}function drawSeriesBars(series){function plotBars(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){if(points[i]==null)continue;drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth);}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);// FIXME: figure out a way to add shadows (for instance along the right edge)\nctx.lineWidth=series.bars.lineWidth;ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case'left':barLeft=0;break;case'right':barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2;}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top);}:null;plotBars(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis);ctx.restore();}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);c.a=typeof fill=='number'?fill:0.4;c.normalize();return c.toString();}function insertLegend(){if(options.legend.container!=null){$(options.legend.container).html('');}else{placeholder.find('.legend').remove();}if(!options.legend.show){return;}var fragments=[],entries=[],rowStarted=false,lf=options.legend.labelFormatter,s,label;// Build a list of legend entries, with each having a label and a color\nfor(var i=0;i<series.length;++i){s=series[i];if(s.label){label=lf?lf(s.label,s):s.label;if(label){entries.push({label:label,color:s.color});}}}// Sort the legend using either the default or a custom comparator\nif(options.legend.sorted){if($.isFunction(options.legend.sorted)){entries.sort(options.legend.sorted);}else if(options.legend.sorted=='reverse'){entries.reverse();}else{var ascending=options.legend.sorted!='descending';entries.sort(function(a,b){// eslint-disable-next-line\nreturn a.label==b.label?0:a.label<b.label!=ascending?1:-1;// Logical XOR\n});}}// Generate markup for the list of entries, in their final order\nfor(var i=0;i<entries.length;++i){var entry=entries[i];if(i%options.legend.noColumns==0){if(rowStarted)fragments.push('</tr>');fragments.push('<tr>');rowStarted=true;}fragments.push('<td class=\"legendColorBox\"><div style=\"border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px\"><div style=\"width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden\"></div></div></td>'+'<td class=\"legendLabel\">'+entry.label+'</td>');}if(rowStarted)fragments.push('</tr>');if(fragments.length==0)return;var table='<table style=\"font-size:smaller;color:'+options.grid.color+'\">'+fragments.join('')+'</table>';if(options.legend.container!=null)$(options.legend.container).html(table);else{var pos='',p=options.legend.position,m=options.legend.margin;if(m[0]==null)m=[m,m];if(p.charAt(0)=='n')pos+='top:'+(m[1]+plotOffset.top)+'px;';else if(p.charAt(0)=='s')pos+='bottom:'+(m[1]+plotOffset.bottom)+'px;';if(p.charAt(1)=='e')pos+='right:'+(m[0]+plotOffset.right)+'px;';else if(p.charAt(1)=='w')pos+='left:'+(m[0]+plotOffset.left)+'px;';var legend=$('<div class=\"legend\">'+table.replace('style=\"','style=\"position:absolute;'+pos+';')+'</div>').appendTo(placeholder);if(options.legend.backgroundOpacity!=0.0){// put in the transparent background\n// separately to avoid blended labels and\n// label boxes\nvar c=options.legend.backgroundColor;if(c==null){c=options.grid.backgroundColor;if(c&&typeof c=='string')c=$.color.parse(c);else c=$.color.extract(legend,'background-color');c.a=1;c=c.toString();}var div=legend.children();$('<div style=\"position:absolute;width:'+div.width()+'px;height:'+div.height()+'px;'+pos+'background-color:'+c+';\"> </div>').prependTo(legend).css('opacity',options.legend.backgroundOpacity);}}}// interactive features\nvar highlights=[],redrawTimeout=null;// returns the data item the mouse is over, or null if none is found\nfunction findNearbyItem(mouseX,mouseY,seriesFilter){var maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null,i,j,ps;for(i=series.length-1;i>=0;--i){if(!seriesFilter(series[i]))continue;var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),// precompute some stuff to make the loop faster\nmy=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;ps=s.datapoints.pointsize;// with inverse transforms, we can't use the maxx/maxy\n// optimization, sadly\nif(axisx.options.inverseTransform)maxx=Number.MAX_VALUE;if(axisy.options.inverseTransform)maxy=Number.MAX_VALUE;if(s.lines.show||s.points.show){for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(x==null)continue;// For points and lines, the cursor must be within a\n// certain distance to the data point\nif(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)continue;// We have to calculate distances in pixels, not in\n// data units, because the scales of the axes may be different\nvar dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;// we save the sqrt\n// use <= to ensure last point takes precedence\n// (last generally means on top of)\nif(dist<smallestDistance){smallestDistance=dist;item=[i,j/ps];}}}if(s.bars.show&&!item){// no other point can be nearby\nvar barLeft,barRight;switch(s.bars.align){case'left':barLeft=0;break;case'right':barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2;}barRight=barLeft+s.bars.barWidth;for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1],b=points[j+2];if(x==null)continue;// for a bar graph, the cursor must be inside the bar\nif(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))item=[i,j/ps];}}}if(item){i=item[0];j=item[1];ps=series[i].datapoints.pointsize;return{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i};}return null;}function onMouseMove(e){if(options.grid.hoverable)triggerClickHoverEvent('plothover',e,function(s){return s['hoverable']!=false;});}function onMouseLeave(e){if(options.grid.hoverable)triggerClickHoverEvent('plothover',e,function(){return false;});}function onClick(e){if(plot.isSelecting){return;}triggerClickHoverEvent('plotclick',e,function(s){return s['clickable']!=false;});}// trigger click or hover event (they send the same parameters\n// so we share their code)\nfunction triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX;pos.pageY=event.pageY;// Add ctrlKey and metaKey to event\npos.ctrlKey=event.ctrlKey;pos.metaKey=event.metaKey;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item){// fill in mouse pos for any listeners out there\nitem.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10);item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10);}if(options.grid.autoHighlight){// clear auto-highlights\nfor(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]))unhighlight(h.series,h.point);}if(item)highlight(item.series,item.datapoint,eventname);}placeholder.trigger(eventname,[pos,item]);}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;if(t==-1){// skip event queue\ndrawOverlay();return;}if(!redrawTimeout)redrawTimeout=setTimeout(drawOverlay,t);}function drawOverlay(){redrawTimeout=null;// draw highlights\noctx.save();overlay.clear();octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i){hi=highlights[i];if(hi.series.bars.show)drawBarHighlight(hi.series,hi.point);else drawPointHighlight(hi.series,hi.point);}octx.restore();executeHooks(hooks.drawOverlay,[octx]);}function highlight(s,point,auto){if(typeof s=='number')s=series[s];if(typeof point=='number'){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1));}var i=indexOfHighlight(s,point);if(i==-1){highlights.push({series:s,point:point,auto:auto});triggerRedrawOverlay();}else if(!auto)highlights[i].auto=false;}function unhighlight(s,point){if(s==null&&point==null){highlights=[];triggerRedrawOverlay();return;}if(typeof s=='number')s=series[s];if(typeof point=='number'){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1));}var i=indexOfHighlight(s,point);if(i!=-1){highlights.splice(i,1);triggerRedrawOverlay();}}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i;}return-1;}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor=typeof series.highlightColor==='string'?series.highlightColor:$.color.parse(series.color).scale('a',0.5).toString();if(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)return;var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius;octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x);y=axisy.p2c(y);octx.beginPath();if(series.points.symbol=='circle')octx.arc(x,y,radius,0,2*Math.PI,false);else series.points.symbol(octx,x,y,radius,false);octx.closePath();octx.stroke();}function drawBarHighlight(series,point){var highlightColor=typeof series.highlightColor==='string'?series.highlightColor:$.color.parse(series.color).scale('a',0.5).toString(),fillStyle=highlightColor,barLeft;switch(series.bars.align){case'left':barLeft=0;break;case'right':barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2;}octx.lineWidth=series.bars.lineWidth;octx.strokeStyle=highlightColor;drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle;},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth);}function getColorOrGradient(spec,bottom,top,defaultColor){if(typeof spec=='string')return spec;else{// assume this is a gradient spec; IE currently only\n// supports a simple vertical gradient properly, so that's\n// what we support too\nvar gradient=ctx.createLinearGradient(0,top,0,bottom);for(var i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if(typeof c!='string'){var co=$.color.parse(defaultColor);if(c.brightness!=null)co=co.scale('rgb',c.brightness);if(c.opacity!=null)co.a*=c.opacity;c=co.toString();}gradient.addColorStop(i/(l-1),c);}return gradient;}}}// Add the plot function to the top level of the jQuery object\n$.plot=function(placeholder,data,options){//var t0 = new Date();\nvar plot=new Plot($(placeholder),data,options,$.plot.plugins);//(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\nreturn plot;};$.plot.version='0.8.3';$.plot.plugins=[];// Also add the plot function as a chainable property\n$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options);});};// round to nearby lower multiple of base\nfunction floorInBase(n,base){return base*Math.floor(n/base);}})(window.jQuery);","map":{"version":3,"sources":["/usr/local/google/home/freinartz/repos/src/github.com/GoogleCloudPlatform/prometheus-clean/web/ui/react-app/src/vendor/flot/jquery.flot.js"],"names":["$","color","make","r","g","b","a","o","add","c","d","i","length","charAt","normalize","scale","f","toString","join","clamp","min","value","max","parseInt","clone","extract","elem","css","toLowerCase","parent","nodeName","get","parse","str","res","m","exec","parseFloat","name","trim","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","window","jQuery","hasOwnProperty","Object","prototype","fn","detach","each","parentNode","removeChild","Canvas","cls","container","element","children","document","createElement","className","direction","position","left","top","appendTo","getContext","G_vmlCanvasManager","initElement","Error","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","resize","width","height","textContainer","text","_textCache","_textSizeCache","flotTextSizeCache","style","restore","save","clear","clearRect","render","cache","layerKey","call","layer","getTextLayer","layerCache","hide","styleKey","styleCache","key","positions","active","rendered","append","splice","show","classes","bottom","right","insertAfter","addClass","getTextInfo","font","angle","textStyle","info","variant","weight","size","lineHeight","family","html","outerWidth","outerHeight","addText","x","y","halign","valign","push","Math","round","removeText","Plot","placeholder","data_","options_","plugins","series","options","colors","legend","noColumns","labelFormatter","labelBoxBorderColor","margin","backgroundColor","backgroundOpacity","sorted","xaxis","mode","tickColor","transform","inverseTransform","autoscaleMargin","ticks","tickFormatter","labelWidth","labelHeight","reserveSpace","tickLength","alignTicksWithAxis","tickDecimals","tickSize","minTickSize","yaxis","xaxes","yaxes","points","radius","lineWidth","fill","fillColor","symbol","lines","steps","bars","barWidth","align","horizontal","zero","shadowSize","highlightColor","grid","aboveData","borderColor","labelMargin","eventSectionHeight","axisMargin","borderWidth","minBorderMargin","markings","markingsColor","markingsLineWidth","clickable","hoverable","autoHighlight","mouseActiveRadius","interaction","redrawOverlayInterval","hooks","surface","overlay","eventHolder","ctx","octx","plotOffset","plotWidth","plotHeight","processOptions","processRawData","processDatapoints","processOffset","processRange","drawBackground","drawSeries","draw","bindEvents","drawOverlay","shutdown","plot","setData","setupGrid","getPlaceholder","getCanvas","getPlotOffset","offset","getData","getAxes","concat","_","axis","n","getXAxes","getYAxes","c2p","canvasToAxisCoords","p2c","axisToCanvasCoords","getOptions","highlight","unhighlight","triggerRedrawOverlay","pointOffset","point","axisNumber","destroy","removeData","empty","highlights","initPlugins","parseOptions","setupCanvases","executeHooks","hook","args","apply","p","init","extend","opts","axisOptions","axisCount","fontSize","fontSizeDefault","replace","fontDefaults","noTicks","x2axis","y2axis","coloredAreas","coloredAreasColor","getOrCreateAxis","parseData","fillInSeriesOptions","processData","s","data","obj","coord","allAxes","grep","pos","x1","undefined","y1","used","axes","number","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","colori","v","topSentry","Number","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","fakeInfinity","MAX_VALUE","j","k","ps","val","format","updateAxis","datamin","datamax","datapoints","required","stack","autoscale","defaultValue","pointsize","insertSteps","nullify","isNaN","Infinity","xmin","ymin","xmax","ymax","delta","find","remove","unbind","existing","mousemove","onMouseMove","bind","onMouseLeave","click","onClick","redrawTimeout","clearTimeout","setTransformationHelpers","identity","t","it","abs","measureTickLabels","maxWidth","floor","legacyStyles","label","allocateAxisBoxFirstPhase","lw","lh","isXAxis","padding","eventSectionPadding","innermost","outermost","first","found","box","allocateAxisBoxSecondPhase","adjustLayoutForThingsStickingOut","minMargin","margins","ceil","showGrid","axisOpts","setRange","allocatedAxes","snaped","setupTickGeneration","setTicks","snapRangeToTicks","drawAxisLabels","insertLegend","wideFactor","widen","sqrt","dec","log","LN10","maxDec","magn","pow","norm","scaledDecimals","tickGenerator","start","floorInBase","NaN","prev","factor","formatted","decimal","indexOf","precision","substr","isFunction","otherAxis","niceTicks","extraDec","ts","test","toFixed","oticks","changed","drawGrid","extractRange","ranges","from","to","tmp","translate","fillStyle","getColorOrGradient","fillRect","bw","bc","xrange","yrange","xequal","yequal","subPixel","beginPath","strokeStyle","moveTo","lineTo","stroke","xoff","yoff","strokeRect","tick","drawOrphanedPoints","abandonedPoints","beforeX","afterX","emptyPoints","olddatapoints","drawSeriesPoints","drawSeriesLines","drawSeriesBars","plotLine","xoffset","yoffset","axisx","axisy","prevx","prevy","x2","y2","plotLineArea","areaOpen","ypos","segmentStart","segmentEnd","x1old","x2old","lineJoin","sw","PI","sin","cos","getFillStyle","plotPoints","shadow","arc","closePath","w","drawBar","barLeft","barRight","fillStyleCallback","drawLeft","drawRight","drawTop","drawBottom","plotBars","filloptions","seriesColor","fragments","entries","rowStarted","lf","sort","reverse","ascending","entry","table","div","prependTo","findNearbyItem","mouseX","mouseY","seriesFilter","maxDistance","smallestDistance","item","mx","my","maxx","maxy","dx","dy","dist","datapoint","slice","dataIndex","seriesIndex","e","triggerClickHoverEvent","isSelecting","eventname","event","canvasX","pageX","canvasY","pageY","ctrlKey","metaKey","h","auto","trigger","setTimeout","hi","drawBarHighlight","drawPointHighlight","indexOfHighlight","pointRadius","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","version","base"],"mappings":"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","sourcesContent":["/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */\n\n/* eslint-disable prefer-spread */\n/* eslint-disable no-loop-func */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-redeclare */\n/* eslint-disable no-useless-escape */\n/* eslint-disable prefer-const */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-use-before-define */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-var */\n/* Javascript plotting library for jQuery, version 0.8.3.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/\n\n// first an inline dependency, jquery.colorhelpers.js, we inline it here\n// for convenience\n\n/* Plugin for jQuery for working with colors.\n *\n * Version 1.1.\n *\n * Inspiration from jQuery color animation plugin by John Resig.\n *\n * Released under the MIT license by Ole Laursen, October 2009.\n *\n * Examples:\n *\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\n *   console.log(c.r, c.g, c.b, c.a);\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\n *\n * Note that .scale() and .add() return the same modified object\n * instead of making a new one.\n *\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\n * produce a color rather than just crashing.\n */\n\n(function($) {\n  $.color = {};\n  $.color.make = function(r, g, b, a) {\n    var o = {};\n    o.r = r || 0;\n    o.g = g || 0;\n    o.b = b || 0;\n    o.a = a != null ? a : 1;\n    o.add = function(c, d) {\n      for (var i = 0; i < c.length; ++i) o[c.charAt(i)] += d;\n      return o.normalize();\n    };\n    o.scale = function(c, f) {\n      for (var i = 0; i < c.length; ++i) o[c.charAt(i)] *= f;\n      return o.normalize();\n    };\n    o.toString = function() {\n      if (o.a >= 1) {\n        return 'rgb(' + [o.r, o.g, o.b].join(',') + ')';\n      } else {\n        return 'rgba(' + [o.r, o.g, o.b, o.a].join(',') + ')';\n      }\n    };\n    o.normalize = function() {\n      function clamp(min, value, max) {\n        return value < min ? min : value > max ? max : value;\n      }\n      o.r = clamp(0, parseInt(o.r), 255);\n      o.g = clamp(0, parseInt(o.g), 255);\n      o.b = clamp(0, parseInt(o.b), 255);\n      o.a = clamp(0, o.a, 1);\n      return o;\n    };\n    o.clone = function() {\n      return $.color.make(o.r, o.b, o.g, o.a);\n    };\n    return o.normalize();\n  };\n  $.color.extract = function(elem, css) {\n    var c;\n    do {\n      c = elem.css(css).toLowerCase();\n      if (c != '' && c != 'transparent') break;\n      elem = elem.parent();\n    } while (elem.length && !$.nodeName(elem.get(0), 'body'));\n    if (c == 'rgba(0, 0, 0, 0)') c = 'transparent';\n    return $.color.parse(c);\n  };\n  $.color.parse = function(str) {\n    var res,\n      m = $.color.make;\n    if ((res = /rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str)))\n      return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10));\n    if ((res = /rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str)))\n      return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10), parseFloat(res[4]));\n    if ((res = /rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str)))\n      return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55);\n    if (\n      (res = /rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(\n        str\n      ))\n    )\n      return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55, parseFloat(res[4]));\n    if ((res = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str)))\n      return m(parseInt(res[1], 16), parseInt(res[2], 16), parseInt(res[3], 16));\n    if ((res = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str)))\n      return m(parseInt(res[1] + res[1], 16), parseInt(res[2] + res[2], 16), parseInt(res[3] + res[3], 16));\n    var name = $.trim(str).toLowerCase();\n    if (name == 'transparent') return m(255, 255, 255, 0);\n    else {\n      res = lookupColors[name] || [0, 0, 0];\n      return m(res[0], res[1], res[2]);\n    }\n  };\n  var lookupColors = {\n    aqua: [0, 255, 255],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    black: [0, 0, 0],\n    blue: [0, 0, 255],\n    brown: [165, 42, 42],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgrey: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkviolet: [148, 0, 211],\n    fuchsia: [255, 0, 255],\n    gold: [255, 215, 0],\n    green: [0, 128, 0],\n    indigo: [75, 0, 130],\n    khaki: [240, 230, 140],\n    lightblue: [173, 216, 230],\n    lightcyan: [224, 255, 255],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    navy: [0, 0, 128],\n    olive: [128, 128, 0],\n    orange: [255, 165, 0],\n    pink: [255, 192, 203],\n    purple: [128, 0, 128],\n    violet: [128, 0, 128],\n    red: [255, 0, 0],\n    silver: [192, 192, 192],\n    white: [255, 255, 255],\n    yellow: [255, 255, 0],\n  };\n})(window.jQuery);\n\n// the actual Flot code\n(function($) {\n  // Cache the prototype hasOwnProperty for faster access\n\n  let hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\n  // operation produces the same effect as detach, i.e. removing the element\n  // without touching its jQuery data.\n\n  // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\n\n  if (!$.fn.detach) {\n    $.fn.detach = function() {\n      return this.each(function() {\n        if (this.parentNode) {\n          this.parentNode.removeChild(this);\n        }\n      });\n    };\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  // The Canvas object is a wrapper around an HTML5 <canvas> tag.\n  //\n  // @constructor\n  // @param {string} cls List of classes to apply to the canvas.\n  // @param {element} container Element onto which to append the canvas.\n  //\n  // Requiring a container is a little iffy, but unfortunately canvas\n  // operations don't work unless the canvas is attached to the DOM.\n\n  function Canvas(cls, container) {\n    var element = container.children('.' + cls)[0];\n\n    if (element == null) {\n      element = document.createElement('canvas');\n      element.className = cls;\n\n      $(element)\n        .css({ direction: 'ltr', position: 'absolute', left: 0, top: 0 })\n        .appendTo(container);\n\n      // If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\n\n      if (!element.getContext) {\n        if (window.G_vmlCanvasManager) {\n          element = window.G_vmlCanvasManager.initElement(element);\n        } else {\n          throw new Error(\n            \"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\"\n          );\n        }\n      }\n    }\n\n    this.element = element;\n\n    var context = (this.context = element.getContext('2d'));\n\n    // Determine the screen's ratio of physical to device-independent\n    // pixels.  This is the ratio between the canvas width that the browser\n    // advertises and the number of pixels actually present in that space.\n\n    // The iPhone 4, for example, has a device-independent width of 320px,\n    // but its screen is actually 640px wide.  It therefore has a pixel\n    // ratio of 2, while most normal devices have a ratio of 1.\n\n    let devicePixelRatio = window.devicePixelRatio || 1,\n      backingStoreRatio =\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1;\n\n    this.pixelRatio = devicePixelRatio / backingStoreRatio;\n\n    // Size the canvas to match the internal dimensions of its container\n\n    this.resize(container.width(), container.height());\n\n    // Collection of HTML div layers for text overlaid onto the canvas\n\n    this.textContainer = null;\n    this.text = {};\n\n    // Cache of text fragments and metrics, so we can avoid expensively\n    // re-calculating them when the plot is re-rendered in a loop.\n\n    this._textCache = {};\n    this._textSizeCache = window.flotTextSizeCache = window.flotTextSizeCache || {};\n  }\n\n  // Resizes the canvas to the given dimensions.\n  //\n  // @param {number} width New width of the canvas, in pixels.\n  // @param {number} width New height of the canvas, in pixels.\n\n  Canvas.prototype.resize = function(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid dimensions for plot, width = ' + width + ', height = ' + height);\n    }\n\n    let element = this.element,\n      context = this.context,\n      pixelRatio = this.pixelRatio;\n\n    // Resize the canvas, increasing its density based on the display's\n    // pixel ratio; basically giving it more pixels without increasing the\n    // size of its element, to take advantage of the fact that retina\n    // displays have that many more pixels in the same advertised space.\n\n    // Resizing should reset the state (excanvas seems to be buggy though)\n\n    if (this.width != width) {\n      element.width = width * pixelRatio;\n      element.style.width = width + 'px';\n      this.width = width;\n    }\n\n    if (this.height != height) {\n      element.height = height * pixelRatio;\n      element.style.height = height + 'px';\n      this.height = height;\n    }\n\n    // Save the context, so we can reset in case we get replotted.  The\n    // restore ensure that we're really back at the initial state, and\n    // should be safe even if we haven't saved the initial state yet.\n\n    context.restore();\n    context.save();\n\n    // Scale the coordinate space to match the display density; so even though we\n    // may have twice as many pixels, we still want lines and other drawing to\n    // appear at the same size; the extra pixels will just make them crisper.\n\n    context.scale(pixelRatio, pixelRatio);\n  };\n\n  // Clears the entire canvas area, not including any overlaid HTML text\n\n  Canvas.prototype.clear = function() {\n    this.context.clearRect(0, 0, this.width, this.height);\n  };\n\n  // Finishes rendering the canvas, including managing the text overlay.\n\n  Canvas.prototype.render = function() {\n    let cache = this._textCache;\n\n    // For each text layer, add elements marked as active that haven't\n    // already been rendered, and remove those that are no longer active.\n\n    for (let layerKey in cache) {\n      if (hasOwnProperty.call(cache, layerKey)) {\n        let layer = this.getTextLayer(layerKey),\n          layerCache = cache[layerKey];\n\n        layer.hide();\n\n        for (let styleKey in layerCache) {\n          if (hasOwnProperty.call(layerCache, styleKey)) {\n            let styleCache = layerCache[styleKey];\n            for (let key in styleCache) {\n              if (hasOwnProperty.call(styleCache, key)) {\n                let positions = styleCache[key].positions;\n\n                for (var i = 0, position; (position = positions[i]); i++) {\n                  if (position.active) {\n                    if (!position.rendered) {\n                      layer.append(position.element);\n                      position.rendered = true;\n                    }\n                  } else {\n                    positions.splice(i--, 1);\n                    if (position.rendered) {\n                      position.element.detach();\n                    }\n                  }\n                }\n\n                if (positions.length == 0) {\n                  delete styleCache[key];\n                }\n              }\n            }\n          }\n        }\n\n        layer.show();\n      }\n    }\n  };\n\n  // Creates (if necessary) and returns the text overlay container.\n  //\n  // @param {string} classes String of space-separated CSS classes used to\n  //     uniquely identify the text layer.\n  // @return {object} The jQuery-wrapped text-layer div.\n\n  Canvas.prototype.getTextLayer = function(classes) {\n    let layer = this.text[classes];\n\n    // Create the text layer if it doesn't exist\n\n    if (layer == null) {\n      // Create the text layer container, if it doesn't exist\n\n      if (this.textContainer == null) {\n        this.textContainer = $(\"<div class='flot-text flot-temp-elem'></div>\")\n          .css({\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            'font-size': 'smaller',\n            color: '#545454',\n          })\n          .insertAfter(this.element);\n      }\n\n      layer = this.text[classes] = $('<div></div>')\n        .addClass(classes)\n        .css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          bottom: 0,\n          right: 0,\n        })\n        .appendTo(this.textContainer);\n    }\n\n    return layer;\n  };\n\n  // Creates (if necessary) and returns a text info object.\n  //\n  // The object looks like this:\n  //\n  // {\n  //     width: Width of the text's wrapper div.\n  //     height: Height of the text's wrapper div.\n  //     element: The jQuery-wrapped HTML div containing the text.\n  //     positions: Array of positions at which this text is drawn.\n  // }\n  //\n  // The positions array contains objects that look like this:\n  //\n  // {\n  //     active: Flag indicating whether the text should be visible.\n  //     rendered: Flag indicating whether the text is currently visible.\n  //     element: The jQuery-wrapped HTML div containing the text.\n  //     x: X coordinate at which to draw the text.\n  //     y: Y coordinate at which to draw the text.\n  // }\n  //\n  // Each position after the first receives a clone of the original element.\n  //\n  // The idea is that that the width, height, and general 'identity' of the\n  // text is constant no matter where it is placed; the placements are a\n  // secondary property.\n  //\n  // Canvas maintains a cache of recently-used text info objects; getTextInfo\n  // either returns the cached element or creates a new entry.\n  //\n  // @param {string} layer A string of space-separated CSS classes uniquely\n  //     identifying the layer containing this text.\n  // @param {string} text Text string to retrieve info for.\n  // @param {(string|object)=} font Either a string of space-separated CSS\n  //     classes or a font-spec object, defining the text's font and style.\n  // @param {number=} angle Angle at which to rotate the text, in degrees.\n  //     Angle is currently unused, it will be implemented in the future.\n  // @param {number=} width Maximum width of the text before it wraps.\n  // @return {object} a text info object.\n\n  Canvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\n    let textStyle, layerCache, styleCache, info;\n\n    // Cast the value to a string, in case we were given a number or such\n\n    text = '' + text;\n\n    // If the font is a font-spec object, generate a CSS font definition\n\n    if (typeof font === 'object') {\n      textStyle =\n        font.style +\n        ' ' +\n        font.variant +\n        ' ' +\n        font.weight +\n        ' ' +\n        font.size +\n        'px/' +\n        font.lineHeight +\n        'px ' +\n        font.family;\n    } else {\n      textStyle = font;\n    }\n\n    // Retrieve (or create) the cache for the text's layer and styles\n\n    layerCache = this._textCache[layer];\n\n    if (layerCache == null) {\n      layerCache = this._textCache[layer] = {};\n    }\n\n    styleCache = layerCache[textStyle];\n\n    if (styleCache == null) {\n      styleCache = layerCache[textStyle] = {};\n    }\n\n    info = styleCache[text];\n\n    // If we can't find a matching element in our cache, create a new one\n\n    if (info == null) {\n      var element = $('<div></div>')\n        .html(text)\n        .css({\n          position: 'absolute',\n          'max-width': width,\n          top: -9999,\n        })\n        .appendTo(this.getTextLayer(layer));\n\n      if (typeof font === 'object') {\n        element.css({\n          font: textStyle,\n          color: font.color,\n        });\n      } else if (typeof font === 'string') {\n        element.addClass(font);\n      }\n\n      info = styleCache[text] = { element: element, positions: [] };\n\n      let size = this._textSizeCache[text];\n      if (size) {\n        info.width = size.width;\n        info.height = size.height;\n      } else {\n        info.width = element.outerWidth(true);\n        info.height = element.outerHeight(true);\n        this._textSizeCache[text] = { width: info.width, height: info.height };\n      }\n      element.detach();\n    }\n\n    return info;\n  };\n\n  // Adds a text string to the canvas text overlay.\n  //\n  // The text isn't drawn immediately; it is marked as rendering, which will\n  // result in its addition to the canvas on the next render pass.\n  //\n  // @param {string} layer A string of space-separated CSS classes uniquely\n  //     identifying the layer containing this text.\n  // @param {number} x X coordinate at which to draw the text.\n  // @param {number} y Y coordinate at which to draw the text.\n  // @param {string} text Text string to draw.\n  // @param {(string|object)=} font Either a string of space-separated CSS\n  //     classes or a font-spec object, defining the text's font and style.\n  // @param {number=} angle Angle at which to rotate the text, in degrees.\n  //     Angle is currently unused, it will be implemented in the future.\n  // @param {number=} width Maximum width of the text before it wraps.\n  // @param {string=} halign Horizontal alignment of the text; either \"left\",\n  //     \"center\" or \"right\".\n  // @param {string=} valign Vertical alignment of the text; either \"top\",\n  //     \"middle\" or \"bottom\".\n\n  Canvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\n    let info = this.getTextInfo(layer, text, font, angle, width),\n      positions = info.positions;\n\n    // Tweak the div's position to match the text's alignment\n\n    if (halign == 'center') {\n      x -= info.width / 2;\n    } else if (halign == 'right') {\n      x -= info.width;\n    }\n\n    if (valign == 'middle') {\n      y -= info.height / 2;\n    } else if (valign == 'bottom') {\n      y -= info.height;\n    }\n\n    // Determine whether this text already exists at this position.\n    // If so, mark it for inclusion in the next render pass.\n\n    for (var i = 0, position; (position = positions[i]); i++) {\n      if (position.x == x && position.y == y) {\n        position.active = true;\n        return;\n      }\n    }\n\n    // If the text doesn't exist at this position, create a new entry\n\n    // For the very first position we'll re-use the original element,\n    // while for subsequent ones we'll clone it.\n\n    position = {\n      active: true,\n      rendered: false,\n      element: positions.length ? info.element.clone() : info.element,\n      x: x,\n      y: y,\n    };\n\n    positions.push(position);\n\n    // Move the element to its final position within the container\n\n    position.element.css({\n      top: Math.round(y),\n      left: Math.round(x),\n      'text-align': halign, // In case the text wraps\n    });\n  };\n\n  // Removes one or more text strings from the canvas text overlay.\n  //\n  // If no parameters are given, all text within the layer is removed.\n  //\n  // Note that the text is not immediately removed; it is simply marked as\n  // inactive, which will result in its removal on the next render pass.\n  // This avoids the performance penalty for 'clear and redraw' behavior,\n  // where we potentially get rid of all text on a layer, but will likely\n  // add back most or all of it later, as when redrawing axes, for example.\n  //\n  // @param {string} layer A string of space-separated CSS classes uniquely\n  //     identifying the layer containing this text.\n  // @param {number=} x X coordinate of the text.\n  // @param {number=} y Y coordinate of the text.\n  // @param {string=} text Text string to remove.\n  // @param {(string|object)=} font Either a string of space-separated CSS\n  //     classes or a font-spec object, defining the text's font and style.\n  // @param {number=} angle Angle at which the text is rotated, in degrees.\n  //     Angle is currently unused, it will be implemented in the future.\n\n  Canvas.prototype.removeText = function(layer, x, y, text, font, angle) {\n    if (text == null) {\n      let layerCache = this._textCache[layer];\n      if (layerCache != null) {\n        for (let styleKey in layerCache) {\n          if (hasOwnProperty.call(layerCache, styleKey)) {\n            let styleCache = layerCache[styleKey];\n            for (let key in styleCache) {\n              if (hasOwnProperty.call(styleCache, key)) {\n                var positions = styleCache[key].positions;\n                for (var i = 0, position; (position = positions[i]); i++) {\n                  position.active = false;\n                }\n              }\n            }\n          }\n        }\n      }\n    } else {\n      var positions = this.getTextInfo(layer, text, font, angle).positions;\n      for (var i = 0, position; (position = positions[i]); i++) {\n        if (position.x == x && position.y == y) {\n          position.active = false;\n        }\n      }\n    }\n  };\n\n  ///////////////////////////////////////////////////////////////////////////\n  // The top-level container for the entire plot.\n\n  function Plot(placeholder, data_, options_, plugins) {\n    // data is on the form:\n    //   [ series1, series2 ... ]\n    // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\n    // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\n\n    let series = [],\n      options = {\n        // the color theme used for graphs\n        colors: ['#edc240', '#afd8f8', '#cb4b4b', '#4da74d', '#9440ed'],\n        legend: {\n          show: true,\n          noColumns: 1, // number of colums in legend table\n          labelFormatter: null, // fn: string -> string\n          labelBoxBorderColor: '#ccc', // border color for the little label boxes\n          container: null, // container (as jQuery object) to put legend in, null means default on top of graph\n          position: 'ne', // position of default legend container within plot\n          margin: 5, // distance from grid edge to default legend container within plot\n          backgroundColor: null, // null means auto-detect\n          backgroundOpacity: 0.85, // set to 0 to avoid background\n          sorted: null, // default to no legend sorting\n        },\n        xaxis: {\n          show: null, // null = auto-detect, true = always, false = never\n          position: 'bottom', // or \"top\"\n          mode: null, // null or \"time\"\n          font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\n          color: null, // base color, labels, ticks\n          tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\n          transform: null, // null or f: number -> number to transform axis\n          inverseTransform: null, // if transform is set, this should be the inverse function\n          min: null, // min. value to show, null means set automatically\n          max: null, // max. value to show, null means set automatically\n          autoscaleMargin: null, // margin in % to add if auto-setting min/max\n          ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\n          tickFormatter: null, // fn: number -> string\n          labelWidth: null, // size of tick labels in pixels\n          labelHeight: null,\n          reserveSpace: null, // whether to reserve space even if axis isn't shown\n          tickLength: null, // size in pixels of ticks, or \"full\" for whole line\n          alignTicksWithAxis: null, // axis number or null for no sync\n          tickDecimals: null, // no. of decimals, null means auto\n          tickSize: null, // number or [number, \"unit\"]\n          minTickSize: null, // number or [number, \"unit\"]\n        },\n        yaxis: {\n          autoscaleMargin: 0.02,\n          position: 'left', // or \"right\"\n        },\n        xaxes: [],\n        yaxes: [],\n        series: {\n          points: {\n            show: false,\n            radius: 3,\n            lineWidth: 2, // in pixels\n            fill: true,\n            fillColor: '#ffffff',\n            symbol: 'circle', // or callback\n          },\n          lines: {\n            // we don't put in show: false so we can see\n            // whether lines were actively disabled\n            lineWidth: 2, // in pixels\n            fill: false,\n            fillColor: null,\n            steps: false,\n            // Omit 'zero', so we can later default its value to\n            // match that of the 'fill' option.\n          },\n          bars: {\n            show: false,\n            lineWidth: 2, // in pixels\n            barWidth: 1, // in units of the x axis\n            fill: true,\n            fillColor: null,\n            align: 'left', // \"left\", \"right\", or \"center\"\n            horizontal: false,\n            zero: true,\n          },\n          shadowSize: 3,\n          highlightColor: null,\n        },\n        grid: {\n          show: true,\n          aboveData: false,\n          color: '#545454', // primary color used for outline and labels\n          backgroundColor: null, // null for transparent, else color\n          borderColor: null, // set if different from the grid color\n          tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\n          margin: 0, // distance from the canvas edge to the grid\n          labelMargin: 5, // in pixels\n          eventSectionHeight: 0, // space for event section\n          axisMargin: 8, // in pixels\n          borderWidth: 2, // in pixels\n          minBorderMargin: null, // in pixels, null means taken from points radius\n          markings: null, // array of ranges or fn: axes -> array of ranges\n          markingsColor: '#f4f4f4',\n          markingsLineWidth: 2,\n          // interactive stuff\n          clickable: false,\n          hoverable: false,\n          autoHighlight: true, // highlight in case mouse is near\n          mouseActiveRadius: 10, // how far the mouse can be away to activate an item\n        },\n        interaction: {\n          redrawOverlayInterval: 1000 / 60, // time between updates, -1 means in same flow\n        },\n        hooks: {},\n      },\n      surface = null, // the canvas for the plot itself\n      overlay = null, // canvas for interactive stuff on top of plot\n      eventHolder = null, // jQuery object that events should be bound to\n      ctx = null,\n      octx = null,\n      xaxes = [],\n      yaxes = [],\n      plotOffset = { left: 0, right: 0, top: 0, bottom: 0 },\n      plotWidth = 0,\n      plotHeight = 0,\n      hooks = {\n        processOptions: [],\n        processRawData: [],\n        processDatapoints: [],\n        processOffset: [],\n        processRange: [],\n        drawBackground: [],\n        drawSeries: [],\n        draw: [],\n        bindEvents: [],\n        drawOverlay: [],\n        shutdown: [],\n      },\n      plot = this;\n\n    // public functions\n    plot.setData = setData;\n    plot.setupGrid = setupGrid;\n    plot.draw = draw;\n    plot.getPlaceholder = function() {\n      return placeholder;\n    };\n    plot.getCanvas = function() {\n      return surface.element;\n    };\n    plot.getPlotOffset = function() {\n      return plotOffset;\n    };\n    plot.width = function() {\n      return plotWidth;\n    };\n    plot.height = function() {\n      return plotHeight;\n    };\n    plot.offset = function() {\n      let o = eventHolder.offset();\n      o.left += plotOffset.left;\n      o.top += plotOffset.top;\n      return o;\n    };\n    plot.getData = function() {\n      return series;\n    };\n    plot.getAxes = function() {\n      var res = {};\n      $.each(xaxes.concat(yaxes), function(_, axis) {\n        if (axis) res[axis.direction + (axis.n != 1 ? axis.n : '') + 'axis'] = axis;\n      });\n      return res;\n    };\n    plot.getXAxes = function() {\n      return xaxes;\n    };\n    plot.getYAxes = function() {\n      return yaxes;\n    };\n    plot.c2p = canvasToAxisCoords;\n    plot.p2c = axisToCanvasCoords;\n    plot.getOptions = function() {\n      return options;\n    };\n    plot.highlight = highlight;\n    plot.unhighlight = unhighlight;\n    plot.triggerRedrawOverlay = triggerRedrawOverlay;\n    plot.pointOffset = function(point) {\n      return {\n        left: parseInt(xaxes[axisNumber(point, 'x') - 1].p2c(+point.x) + plotOffset.left, 10),\n        top: parseInt(yaxes[axisNumber(point, 'y') - 1].p2c(+point.y) + plotOffset.top, 10),\n      };\n    };\n    plot.shutdown = shutdown;\n    plot.destroy = function() {\n      shutdown();\n      placeholder.removeData('plot').empty();\n\n      series = [];\n      options = null;\n      surface = null;\n      overlay = null;\n      eventHolder = null;\n      ctx = null;\n      octx = null;\n      xaxes = [];\n      yaxes = [];\n      hooks = null;\n      highlights = [];\n      plot = null;\n    };\n    plot.resize = function() {\n      let width = placeholder.width(),\n        height = placeholder.height();\n      surface.resize(width, height);\n      overlay.resize(width, height);\n    };\n\n    // public attributes\n    plot.hooks = hooks;\n\n    // initialize\n    initPlugins(plot);\n    parseOptions(options_);\n    setupCanvases();\n    setData(data_);\n    setupGrid();\n    draw();\n    bindEvents();\n\n    function executeHooks(hook, args) {\n      args = [plot].concat(args);\n      for (var i = 0; i < hook.length; ++i) hook[i].apply(this, args);\n    }\n\n    function initPlugins() {\n      // References to key classes, allowing plugins to modify them\n\n      let classes = {\n        Canvas: Canvas,\n      };\n\n      for (let i = 0; i < plugins.length; ++i) {\n        let p = plugins[i];\n        p.init(plot, classes);\n        if (p.options) $.extend(true, options, p.options);\n      }\n    }\n\n    function parseOptions(opts) {\n      $.extend(true, options, opts);\n\n      // $.extend merges arrays, rather than replacing them.  When less\n      // colors are provided than the size of the default palette, we\n      // end up with those colors plus the remaining defaults, which is\n      // not expected behavior; avoid it by replacing them here.\n\n      if (opts && opts.colors) {\n        options.colors = opts.colors;\n      }\n\n      if (options.xaxis.color == null)\n        options.xaxis.color = $.color\n          .parse(options.grid.color)\n          .scale('a', 0.22)\n          .toString();\n      if (options.yaxis.color == null)\n        options.yaxis.color = $.color\n          .parse(options.grid.color)\n          .scale('a', 0.22)\n          .toString();\n\n      if (options.xaxis.tickColor == null)\n        // grid.tickColor for back-compatibility\n        options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\n      if (options.yaxis.tickColor == null)\n        // grid.tickColor for back-compatibility\n        options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\n\n      if (options.grid.borderColor == null) options.grid.borderColor = options.grid.color;\n      if (options.grid.tickColor == null)\n        options.grid.tickColor = $.color\n          .parse(options.grid.color)\n          .scale('a', 0.22)\n          .toString();\n\n      // Fill in defaults for axis options, including any unspecified\n      // font-spec fields, if a font-spec was provided.\n\n      // If no x/y axis options were provided, create one of each anyway,\n      // since the rest of the code assumes that they exist.\n\n      var i,\n        axisOptions,\n        axisCount,\n        fontSize = placeholder.css('font-size'),\n        fontSizeDefault = fontSize ? +fontSize.replace('px', '') : 13,\n        fontDefaults = {\n          style: placeholder.css('font-style'),\n          size: Math.round(0.8 * fontSizeDefault),\n          variant: placeholder.css('font-variant'),\n          weight: placeholder.css('font-weight'),\n          family: placeholder.css('font-family'),\n        };\n\n      axisCount = options.xaxes.length || 1;\n      for (i = 0; i < axisCount; ++i) {\n        axisOptions = options.xaxes[i];\n        if (axisOptions && !axisOptions.tickColor) {\n          axisOptions.tickColor = axisOptions.color;\n        }\n\n        axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\n        options.xaxes[i] = axisOptions;\n\n        if (axisOptions.font) {\n          axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n          if (!axisOptions.font.color) {\n            axisOptions.font.color = axisOptions.color;\n          }\n          if (!axisOptions.font.lineHeight) {\n            axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n          }\n        }\n      }\n\n      axisCount = options.yaxes.length || 1;\n      for (i = 0; i < axisCount; ++i) {\n        axisOptions = options.yaxes[i];\n        if (axisOptions && !axisOptions.tickColor) {\n          axisOptions.tickColor = axisOptions.color;\n        }\n\n        axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\n        options.yaxes[i] = axisOptions;\n\n        if (axisOptions.font) {\n          axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n          if (!axisOptions.font.color) {\n            axisOptions.font.color = axisOptions.color;\n          }\n          if (!axisOptions.font.lineHeight) {\n            axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n          }\n        }\n      }\n\n      // backwards compatibility, to be removed in future\n      if (options.xaxis.noTicks && options.xaxis.ticks == null) options.xaxis.ticks = options.xaxis.noTicks;\n      if (options.yaxis.noTicks && options.yaxis.ticks == null) options.yaxis.ticks = options.yaxis.noTicks;\n      if (options.x2axis) {\n        options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\n        options.xaxes[1].position = 'top';\n        // Override the inherit to allow the axis to auto-scale\n        if (options.x2axis.min == null) {\n          options.xaxes[1].min = null;\n        }\n        if (options.x2axis.max == null) {\n          options.xaxes[1].max = null;\n        }\n      }\n      if (options.y2axis) {\n        options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\n        options.yaxes[1].position = 'right';\n        // Override the inherit to allow the axis to auto-scale\n        if (options.y2axis.min == null) {\n          options.yaxes[1].min = null;\n        }\n        if (options.y2axis.max == null) {\n          options.yaxes[1].max = null;\n        }\n      }\n      if (options.grid.coloredAreas) options.grid.markings = options.grid.coloredAreas;\n      if (options.grid.coloredAreasColor) options.grid.markingsColor = options.grid.coloredAreasColor;\n      if (options.lines) $.extend(true, options.series.lines, options.lines);\n      if (options.points) $.extend(true, options.series.points, options.points);\n      if (options.bars) $.extend(true, options.series.bars, options.bars);\n      if (options.shadowSize != null) options.series.shadowSize = options.shadowSize;\n      if (options.highlightColor != null) options.series.highlightColor = options.highlightColor;\n\n      // save options on axes for future reference\n      for (i = 0; i < options.xaxes.length; ++i) getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\n      for (i = 0; i < options.yaxes.length; ++i) getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\n\n      // add hooks from options\n      for (var n in hooks) if (options.hooks[n] && options.hooks[n].length) hooks[n] = hooks[n].concat(options.hooks[n]);\n\n      executeHooks(hooks.processOptions, [options]);\n    }\n\n    function setData(d) {\n      series = parseData(d);\n      fillInSeriesOptions();\n      processData();\n    }\n\n    function parseData(d) {\n      let res = [];\n      for (let i = 0; i < d.length; ++i) {\n        let s = $.extend(true, {}, options.series);\n\n        if (d[i].data != null) {\n          s.data = d[i].data; // move the data instead of deep-copy\n          delete d[i].data;\n\n          $.extend(true, s, d[i]);\n\n          d[i].data = s.data;\n        } else s.data = d[i];\n        res.push(s);\n      }\n\n      return res;\n    }\n\n    function axisNumber(obj, coord) {\n      var a = obj[coord + 'axis'];\n      if (typeof a == 'object')\n        // if we got a real axis, extract number\n        a = a.n;\n      if (typeof a != 'number') a = 1; // default to first axis\n      return a;\n    }\n\n    function allAxes() {\n      // return flat array without annoying null entries\n      return $.grep(xaxes.concat(yaxes), function(a) {\n        return a;\n      });\n    }\n\n    function canvasToAxisCoords(pos) {\n      // return an object with x/y corresponding to all used axes\n      var res = {},\n        i,\n        axis;\n      for (i = 0; i < xaxes.length; ++i) {\n        axis = xaxes[i];\n        if (axis) res['x' + axis.n] = axis.c2p(pos.left);\n      }\n\n      for (i = 0; i < yaxes.length; ++i) {\n        axis = yaxes[i];\n        if (axis) res['y' + axis.n] = axis.c2p(pos.top);\n      }\n\n      if (res.x1 !== undefined) res.x = res.x1;\n      if (res.y1 !== undefined) res.y = res.y1;\n\n      return res;\n    }\n\n    function axisToCanvasCoords(pos) {\n      // get canvas coords from the first pair of x/y found in pos\n      var res = {},\n        i,\n        axis,\n        key;\n\n      for (i = 0; i < xaxes.length; ++i) {\n        axis = xaxes[i];\n        if (axis && axis.used) {\n          key = 'x' + axis.n;\n          if (pos[key] == null && axis.n == 1) key = 'x';\n\n          if (pos[key] != null) {\n            res.left = axis.p2c(pos[key]);\n            break;\n          }\n        }\n      }\n\n      for (i = 0; i < yaxes.length; ++i) {\n        axis = yaxes[i];\n        if (axis && axis.used) {\n          key = 'y' + axis.n;\n          if (pos[key] == null && axis.n == 1) key = 'y';\n\n          if (pos[key] != null) {\n            res.top = axis.p2c(pos[key]);\n            break;\n          }\n        }\n      }\n\n      return res;\n    }\n\n    function getOrCreateAxis(axes, number) {\n      if (!axes[number - 1])\n        axes[number - 1] = {\n          n: number, // save the number for future reference\n          direction: axes == xaxes ? 'x' : 'y',\n          options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis),\n        };\n\n      return axes[number - 1];\n    }\n\n    function fillInSeriesOptions() {\n      var neededColors = series.length,\n        maxIndex = -1,\n        i;\n\n      // Subtract the number of series that already have fixed colors or\n      // color indexes from the number that we still need to generate.\n\n      for (i = 0; i < series.length; ++i) {\n        let sc = series[i].color;\n        if (sc != null) {\n          neededColors--;\n          if (typeof sc == 'number' && sc > maxIndex) {\n            maxIndex = sc;\n          }\n        }\n      }\n\n      // If any of the series have fixed color indexes, then we need to\n      // generate at least as many colors as the highest index.\n\n      if (neededColors <= maxIndex) {\n        neededColors = maxIndex + 1;\n      }\n\n      // Generate all the colors, using first the option colors and then\n      // variations on those colors once they're exhausted.\n\n      var c,\n        colors = [],\n        colorPool = options.colors,\n        colorPoolSize = colorPool.length,\n        variation = 0;\n\n      for (i = 0; i < neededColors; i++) {\n        c = $.color.parse(colorPool[i % colorPoolSize] || '#666');\n\n        // Each time we exhaust the colors in the pool we adjust\n        // a scaling factor used to produce more variations on\n        // those colors. The factor alternates negative/positive\n        // to produce lighter/darker colors.\n\n        // Reset the variation after every few cycles, or else\n        // it will end up producing only white or black colors.\n\n        if (i % colorPoolSize == 0 && i) {\n          if (variation >= 0) {\n            if (variation < 0.5) {\n              variation = -variation - 0.2;\n            } else variation = 0;\n          } else variation = -variation;\n        }\n\n        colors[i] = c.scale('rgb', 1 + variation);\n      }\n\n      // Finalize the series options, filling in their colors\n\n      var colori = 0,\n        s;\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n\n        // assign colors\n        if (s.color == null) {\n          s.color = colors[colori].toString();\n          ++colori;\n        } else if (typeof s.color == 'number') s.color = colors[s.color].toString();\n\n        // turn on lines automatically in case nothing is set\n        if (s.lines.show == null) {\n          var v,\n            show = true;\n          for (v in s)\n            if (s[v] && s[v].show) {\n              show = false;\n              break;\n            }\n          if (show) s.lines.show = true;\n        }\n\n        // If nothing was provided for lines.zero, default it to match\n        // lines.fill, since areas by default should extend to zero.\n\n        if (s.lines.zero == null) {\n          s.lines.zero = !!s.lines.fill;\n        }\n\n        // setup axes\n        s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, 'x'));\n        s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, 'y'));\n      }\n    }\n\n    function processData() {\n      let topSentry = Number.POSITIVE_INFINITY,\n        bottomSentry = Number.NEGATIVE_INFINITY,\n        fakeInfinity = Number.MAX_VALUE,\n        i,\n        j,\n        k,\n        m,\n        s,\n        points,\n        ps,\n        val,\n        f,\n        p,\n        data,\n        format;\n\n      function updateAxis(axis, min, max) {\n        if (min < axis.datamin && min != -fakeInfinity) axis.datamin = min;\n        if (max > axis.datamax && max != fakeInfinity) axis.datamax = max;\n      }\n\n      $.each(allAxes(), function(_, axis) {\n        // init axis\n        axis.datamin = topSentry;\n        axis.datamax = bottomSentry;\n        axis.used = false;\n      });\n\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n        s.datapoints = { points: [] };\n\n        executeHooks(hooks.processRawData, [s, s.data, s.datapoints]);\n      }\n\n      // first pass: clean and copy data\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n\n        data = s.data;\n        format = s.datapoints.format;\n\n        if (!format) {\n          format = [];\n          // find out how to copy\n          format.push({ x: true, number: true, required: true });\n          format.push({ y: true, number: true, required: true });\n\n          if (s.stack || s.bars.show || (s.lines.show && s.lines.fill)) {\n            let autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\n            format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\n            if (s.bars.horizontal) {\n              delete format[format.length - 1].y;\n              format[format.length - 1].x = true;\n            }\n          }\n\n          s.datapoints.format = format;\n        }\n\n        if (s.datapoints.pointsize != null) continue; // already filled in\n\n        s.datapoints.pointsize = format.length;\n\n        ps = s.datapoints.pointsize;\n        points = s.datapoints.points;\n\n        let insertSteps = s.lines.show && s.lines.steps;\n        s.xaxis.used = s.yaxis.used = true;\n\n        for (j = k = 0; j < data.length; ++j, k += ps) {\n          p = data[j];\n\n          let nullify = p == null;\n          if (!nullify) {\n            for (m = 0; m < ps; ++m) {\n              val = p[m];\n              f = format[m];\n\n              if (f) {\n                if (f.number && val != null) {\n                  val = +val; // convert to number\n                  if (isNaN(val)) val = null;\n                  else if (val == Infinity) val = fakeInfinity;\n                  else if (val == -Infinity) val = -fakeInfinity;\n                }\n\n                if (val == null) {\n                  if (f.required) nullify = true;\n\n                  if (f.defaultValue != null) val = f.defaultValue;\n                }\n              }\n\n              points[k + m] = val;\n            }\n          }\n\n          if (nullify) {\n            for (m = 0; m < ps; ++m) {\n              val = points[k + m];\n              if (val != null) {\n                f = format[m];\n                // extract min/max info\n                if (f.autoscale !== false) {\n                  if (f.x) {\n                    updateAxis(s.xaxis, val, val);\n                  }\n                  if (f.y) {\n                    updateAxis(s.yaxis, val, val);\n                  }\n                }\n              }\n              points[k + m] = null;\n            }\n          }\n\n          if (insertSteps && k > 0 && (!nullify || points[k - ps] != null)) {\n            // copy the point to make room for a middle point\n            for (m = 0; m < ps; ++m) points[k + ps + m] = points[k + m];\n\n            // middle point has same y\n            points[k + 1] = points[k - ps + 1] || 0;\n\n            // if series has null values, let's give the last !null value a nice step\n            if (nullify) points[k] = p[0];\n\n            // we've added a point, better reflect that\n            k += ps;\n          }\n        }\n      }\n\n      // give the hooks a chance to run\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n        points = s.datapoints.points;\n        ps = s.datapoints.pointsize;\n\n        // grafana\n        if (s.transform === 'negative-Y') {\n          for (j = 0; j < points.length; j += ps) {\n            if (points[j] == null) continue;\n\n            val = points[j + 1];\n            points[j + 1] = -val;\n          }\n        }\n\n        executeHooks(hooks.processDatapoints, [s, s.datapoints]);\n      }\n\n      // second pass: find datamax/datamin for auto-scaling\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n        points = s.datapoints.points;\n        ps = s.datapoints.pointsize;\n        format = s.datapoints.format;\n\n        var xmin = topSentry,\n          ymin = topSentry,\n          xmax = bottomSentry,\n          ymax = bottomSentry;\n\n        for (j = 0; j < points.length; j += ps) {\n          if (points[j] == null) continue;\n\n          for (m = 0; m < ps; ++m) {\n            val = points[j + m];\n            f = format[m];\n            if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity) continue;\n\n            if (f.x) {\n              if (val < xmin) xmin = val;\n              if (val > xmax) xmax = val;\n            }\n            if (f.y) {\n              if (val < ymin) ymin = val;\n              if (val > ymax) ymax = val;\n            }\n          }\n        }\n\n        if (s.bars.show) {\n          // make sure we got room for the bar on the dancing floor\n          var delta;\n\n          switch (s.bars.align) {\n            case 'left':\n              delta = 0;\n              break;\n            case 'right':\n              delta = -s.bars.barWidth;\n              break;\n            default:\n              delta = -s.bars.barWidth / 2;\n          }\n\n          if (s.bars.horizontal) {\n            ymin += delta;\n            ymax += delta + s.bars.barWidth;\n          } else {\n            xmin += delta;\n            xmax += delta + s.bars.barWidth;\n          }\n        }\n\n        updateAxis(s.xaxis, xmin, xmax);\n        updateAxis(s.yaxis, ymin, ymax);\n      }\n\n      $.each(allAxes(), function(_, axis) {\n        if (axis.datamin == topSentry) axis.datamin = null;\n        if (axis.datamax == bottomSentry) axis.datamax = null;\n      });\n    }\n\n    function setupCanvases() {\n      // Make sure the placeholder is clear of everything except canvases\n      // from a previous plot in this container that we'll try to re-use.\n\n      placeholder.find('.flot-temp-elem').remove();\n\n      if (placeholder.css('position') == 'static') placeholder.css('position', 'relative'); // for positioning labels and overlay\n\n      surface = new Canvas('flot-base', placeholder);\n      overlay = new Canvas('flot-overlay', placeholder); // overlay canvas for interactive features\n\n      ctx = surface.context;\n      octx = overlay.context;\n\n      // define which element we're listening for events on\n      eventHolder = $(overlay.element).unbind();\n\n      // If we're re-using a plot object, shut down the old one\n\n      var existing = placeholder.data('plot');\n\n      if (existing) {\n        existing.shutdown();\n        overlay.clear();\n      }\n\n      // save in case we get replotted\n      placeholder.data('plot', plot);\n    }\n\n    function bindEvents() {\n      // bind events\n      if (options.grid.hoverable) {\n        eventHolder.mousemove(onMouseMove);\n\n        // Use bind, rather than .mouseleave, because we officially\n        // still support jQuery 1.2.6, which doesn't define a shortcut\n        // for mouseenter or mouseleave.  This was a bug/oversight that\n        // was fixed somewhere around 1.3.x.  We can return to using\n        // .mouseleave when we drop support for 1.2.6.\n\n        eventHolder.bind('mouseleave', onMouseLeave);\n      }\n\n      if (options.grid.clickable) eventHolder.click(onClick);\n\n      executeHooks(hooks.bindEvents, [eventHolder]);\n    }\n\n    function shutdown() {\n      if (redrawTimeout) clearTimeout(redrawTimeout);\n\n      eventHolder.unbind('mousemove', onMouseMove);\n      eventHolder.unbind('mouseleave', onMouseLeave);\n      eventHolder.unbind('click', onClick);\n\n      executeHooks(hooks.shutdown, [eventHolder]);\n    }\n\n    function setTransformationHelpers(axis) {\n      // set helper functions on the axis, assumes plot area\n      // has been computed already\n\n      function identity(x) {\n        return x;\n      }\n\n      var s,\n        m,\n        t = axis.options.transform || identity,\n        it = axis.options.inverseTransform;\n\n      // precompute how much the axis is scaling a point\n      // in canvas space\n      if (axis.direction == 'x') {\n        s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\n        m = Math.min(t(axis.max), t(axis.min));\n      } else {\n        s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\n        s = -s;\n        m = Math.max(t(axis.max), t(axis.min));\n      }\n\n      // data point to canvas coordinate\n      if (t == identity)\n        // slight optimization\n        axis.p2c = function(p) {\n          return (p - m) * s;\n        };\n      else\n        axis.p2c = function(p) {\n          return (t(p) - m) * s;\n        };\n      // canvas coordinate to data point\n      if (!it)\n        axis.c2p = function(c) {\n          return m + c / s;\n        };\n      else\n        axis.c2p = function(c) {\n          return it(m + c / s);\n        };\n    }\n\n    function measureTickLabels(axis) {\n      let opts = axis.options,\n        ticks = axis.ticks || [],\n        labelWidth = opts.labelWidth || 0,\n        labelHeight = opts.labelHeight || 0,\n        maxWidth = labelWidth || (axis.direction == 'x' ? Math.floor(surface.width / (ticks.length || 1)) : null),\n        legacyStyles = axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis',\n        layer = 'flot-' + axis.direction + '-axis flot-' + axis.direction + axis.n + '-axis ' + legacyStyles,\n        font = opts.font || 'flot-tick-label tickLabel';\n\n      for (let i = 0; i < ticks.length; ++i) {\n        let t = ticks[i];\n\n        if (!t.label) continue;\n\n        let info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\n\n        /// Grafana fix, add +1 to label width\n        labelWidth = Math.max(labelWidth, info.width + 1);\n        labelHeight = Math.max(labelHeight, info.height);\n      }\n\n      axis.labelWidth = opts.labelWidth || labelWidth;\n      axis.labelHeight = opts.labelHeight || labelHeight;\n    }\n\n    function allocateAxisBoxFirstPhase(axis) {\n      // find the bounding box of the axis by looking at label\n      // widths/heights and ticks, make room by diminishing the\n      // plotOffset; this first phase only looks at one\n      // dimension per axis, the other dimension depends on the\n      // other axes so will have to wait\n\n      let lw = axis.labelWidth,\n        lh = axis.labelHeight,\n        pos = axis.options.position,\n        isXAxis = axis.direction === 'x',\n        tickLength = axis.options.tickLength,\n        axisMargin = options.grid.axisMargin,\n        padding = options.grid.labelMargin,\n        eventSectionPadding = options.grid.eventSectionHeight,\n        innermost = true,\n        outermost = true,\n        first = true,\n        found = false;\n\n      // Determine the axis's position in its direction and on its side\n\n      $.each(isXAxis ? xaxes : yaxes, function(i, a) {\n        if (a && (a.show || a.reserveSpace)) {\n          if (a === axis) {\n            found = true;\n          } else if (a.options.position === pos) {\n            if (found) {\n              outermost = false;\n            } else {\n              innermost = false;\n            }\n          }\n          if (!found) {\n            first = false;\n          }\n        }\n      });\n\n      // The outermost axis on each side has no margin\n\n      if (outermost) {\n        axisMargin = 0;\n      }\n\n      // The ticks for the first axis in each direction stretch across\n\n      if (tickLength == null) {\n        tickLength = first ? 'full' : 5;\n      }\n\n      if (!isNaN(+tickLength)) padding += +tickLength;\n\n      if (isXAxis) {\n        // Add space for event section\n        lh += padding;\n        lh += eventSectionPadding;\n\n        if (pos == 'bottom') {\n          plotOffset.bottom += lh + axisMargin;\n          axis.box = { top: surface.height - plotOffset.bottom, height: lh };\n        } else {\n          axis.box = { top: plotOffset.top + axisMargin, height: lh };\n          plotOffset.top += lh + axisMargin;\n        }\n      } else {\n        lw += padding;\n\n        if (pos == 'left') {\n          axis.box = { left: plotOffset.left + axisMargin, width: lw };\n          plotOffset.left += lw + axisMargin;\n        } else {\n          plotOffset.right += lw + axisMargin;\n          axis.box = { left: surface.width - plotOffset.right, width: lw };\n        }\n      }\n\n      // save for future reference\n      axis.position = pos;\n      axis.tickLength = tickLength;\n      axis.box.padding = padding;\n      axis.box.eventSectionPadding = eventSectionPadding;\n      axis.innermost = innermost;\n    }\n\n    function allocateAxisBoxSecondPhase(axis) {\n      // now that all axis boxes have been placed in one\n      // dimension, we can set the remaining dimension coordinates\n      if (axis.direction == 'x') {\n        axis.box.left = plotOffset.left - axis.labelWidth / 2;\n        axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\n      } else {\n        axis.box.top = plotOffset.top - axis.labelHeight / 2;\n        axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\n      }\n    }\n\n    function adjustLayoutForThingsStickingOut() {\n      // possibly adjust plot offset to ensure everything stays\n      // inside the canvas and isn't clipped off\n\n      let minMargin = options.grid.minBorderMargin,\n        i;\n\n      // check stuff from the plot (FIXME: this should just read\n      // a value from the series, otherwise it's impossible to\n      // customize)\n      if (minMargin == null) {\n        minMargin = 0;\n        for (i = 0; i < series.length; ++i)\n          minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth / 2));\n      }\n\n      let margins = {\n        left: minMargin,\n        right: minMargin,\n        top: minMargin,\n        bottom: minMargin,\n      };\n\n      // check axis labels, note we don't check the actual\n      // labels but instead use the overall width/height to not\n      // jump as much around with replots\n      $.each(allAxes(), function(_, axis) {\n        if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\n          if (axis.direction === 'x') {\n            margins.left = Math.max(margins.left, axis.labelWidth / 2);\n            margins.right = Math.max(margins.right, axis.labelWidth / 2);\n          } else {\n            margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\n            margins.top = Math.max(margins.top, axis.labelHeight / 2);\n          }\n        }\n      });\n\n      plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\n      plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\n      plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\n      plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\n    }\n\n    function setupGrid() {\n      var i,\n        axes = allAxes(),\n        showGrid = options.grid.show;\n\n      // Initialize the plot's offset from the edge of the canvas\n\n      for (var a in plotOffset) {\n        let margin = options.grid.margin || 0;\n        plotOffset[a] = typeof margin == 'number' ? margin : margin[a] || 0;\n      }\n\n      executeHooks(hooks.processOffset, [plotOffset]);\n\n      // If the grid is visible, add its border width to the offset\n\n      for (var a in plotOffset) {\n        if (typeof options.grid.borderWidth == 'object') {\n          plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\n        } else {\n          plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\n        }\n      }\n\n      $.each(axes, function(_, axis) {\n        let axisOpts = axis.options;\n        axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\n        axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\n        setRange(axis);\n      });\n\n      executeHooks(hooks.processRange, []);\n\n      if (showGrid) {\n        var allocatedAxes = $.grep(axes, function(axis) {\n          return axis.show || axis.reserveSpace;\n        });\n\n        let snaped = false;\n        for (var i = 0; i < 2; i++) {\n          $.each(allocatedAxes, function(_, axis) {\n            // make the ticks\n            setupTickGeneration(axis);\n            setTicks(axis);\n            snaped = snapRangeToTicks(axis, axis.ticks) || snaped;\n            // find labelWidth/Height for axis\n            measureTickLabels(axis);\n          });\n\n          if (snaped && hooks.processRange.length > 0) {\n            executeHooks(hooks.processRange, []);\n            snaped = false;\n          } else {\n            break;\n          }\n        }\n\n        // with all dimensions calculated, we can compute the\n        // axis bounding boxes, start from the outside\n        // (reverse order)\n        for (i = allocatedAxes.length - 1; i >= 0; --i) allocateAxisBoxFirstPhase(allocatedAxes[i]);\n\n        // make sure we've got enough space for things that\n        // might stick out\n        adjustLayoutForThingsStickingOut();\n\n        $.each(allocatedAxes, function(_, axis) {\n          allocateAxisBoxSecondPhase(axis);\n        });\n      }\n\n      plotWidth = surface.width - plotOffset.left - plotOffset.right;\n      plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\n\n      // now we got the proper plot dimensions, we can compute the scaling\n      $.each(axes, function(_, axis) {\n        setTransformationHelpers(axis);\n      });\n\n      if (showGrid) {\n        drawAxisLabels();\n      }\n\n      insertLegend();\n    }\n\n    function setRange(axis) {\n      let opts = axis.options,\n        min = +(opts.min != null ? opts.min : axis.datamin),\n        max = +(opts.max != null ? opts.max : axis.datamax),\n        delta = max - min;\n\n      if (delta == 0.0) {\n        // Grafana fix: wide Y min and max using increased wideFactor\n        // when all series values are the same\n        let wideFactor = 0.25;\n        let widen = Math.abs(max == 0 ? 1 : max * wideFactor);\n\n        if (opts.min == null) {\n          min -= widen;\n        }\n        // always widen max if we couldn't widen min to ensure we\n        // don't fall into min == max which doesn't work\n        if (opts.max == null || opts.min != null) {\n          max += widen;\n        }\n      } else {\n        // consider autoscaling\n        let margin = opts.autoscaleMargin;\n        if (margin != null) {\n          if (opts.min == null) {\n            min -= delta * margin;\n            // make sure we don't go below zero if all values\n            // are positive\n            if (min < 0 && axis.datamin != null && axis.datamin >= 0) min = 0;\n          }\n          if (opts.max == null) {\n            max += delta * margin;\n            if (max > 0 && axis.datamax != null && axis.datamax <= 0) max = 0;\n          }\n        }\n      }\n      axis.min = min;\n      axis.max = max;\n    }\n\n    function setupTickGeneration(axis) {\n      let opts = axis.options;\n\n      // estimate number of ticks\n      let noTicks;\n      if (typeof opts.ticks == 'number' && opts.ticks > 0) noTicks = opts.ticks;\n      // heuristic based on the model a*sqrt(x) fitted to\n      // some data points that seemed reasonable\n      else noTicks = 0.3 * Math.sqrt(axis.direction == 'x' ? surface.width : surface.height);\n\n      let delta = (axis.max - axis.min) / noTicks,\n        dec = -Math.floor(Math.log(delta) / Math.LN10),\n        maxDec = opts.tickDecimals;\n\n      if (maxDec != null && dec > maxDec) {\n        dec = maxDec;\n      }\n\n      let magn = Math.pow(10, -dec),\n        norm = delta / magn, // norm is between 1.0 and 10.0\n        size;\n\n      if (norm < 1.5) {\n        size = 1;\n      } else if (norm < 3) {\n        size = 2;\n        // special case for 2.5, requires an extra decimal\n        if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\n          size = 2.5;\n          ++dec;\n        }\n      } else if (norm < 7.5) {\n        size = 5;\n      } else {\n        size = 10;\n      }\n\n      size *= magn;\n\n      if (opts.minTickSize != null && size < opts.minTickSize) {\n        size = opts.minTickSize;\n      }\n\n      axis.delta = delta;\n      axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\n      axis.tickSize = opts.tickSize || size;\n\n      // grafana addition\n      if (opts.tickDecimals === null || opts.tickDecimals === undefined) {\n        axis.scaledDecimals = axis.tickDecimals + dec;\n      }\n\n      // Time mode was moved to a plug-in in 0.8, and since so many people use it\n      // we'll add an especially friendly reminder to make sure they included it.\n\n      if (opts.mode == 'time' && !axis.tickGenerator) {\n        throw new Error('Time mode requires the flot.time plugin.');\n      }\n\n      // Flot supports base-10 axes; any other mode else is handled by a plug-in,\n      // like flot.time.js.\n\n      if (!axis.tickGenerator) {\n        axis.tickGenerator = function(axis) {\n          let ticks = [],\n            start = floorInBase(axis.min, axis.tickSize),\n            i = 0,\n            v = Number.NaN,\n            prev;\n\n          do {\n            prev = v;\n            v = start + i * axis.tickSize;\n            ticks.push(v);\n            ++i;\n          } while (v < axis.max && v != prev);\n          return ticks;\n        };\n\n        axis.tickFormatter = function(value, axis) {\n          let factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;\n          var formatted = '' + Math.round(value * factor) / factor;\n\n          // If tickDecimals was specified, ensure that we have exactly that\n          // much precision; otherwise default to the value's own precision.\n\n          if (axis.tickDecimals != null) {\n            var decimal = formatted.indexOf('.');\n            let precision = decimal == -1 ? 0 : formatted.length - decimal - 1;\n            if (precision < axis.tickDecimals) {\n              return (precision ? formatted : formatted + '.') + ('' + factor).substr(1, axis.tickDecimals - precision);\n            }\n          }\n\n          return formatted;\n        };\n      }\n\n      if ($.isFunction(opts.tickFormatter))\n        axis.tickFormatter = function(v, axis) {\n          return '' + opts.tickFormatter(v, axis);\n        };\n\n      if (opts.alignTicksWithAxis != null) {\n        var otherAxis = (axis.direction == 'x' ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\n        if (otherAxis && otherAxis.used && otherAxis != axis) {\n          // consider snapping min/max to outermost nice ticks\n          let niceTicks = axis.tickGenerator(axis);\n          if (niceTicks.length > 0) {\n            if (opts.min == null) axis.min = Math.min(axis.min, niceTicks[0]);\n            if (opts.max == null && niceTicks.length > 1) axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\n          }\n\n          axis.tickGenerator = function(axis) {\n            // copy ticks, scaled to this axis\n            var ticks = [],\n              v,\n              i;\n            for (i = 0; i < otherAxis.ticks.length; ++i) {\n              v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\n              v = axis.min + v * (axis.max - axis.min);\n              ticks.push(v);\n            }\n            return ticks;\n          };\n\n          // we might need an extra decimal since forced\n          // ticks don't necessarily fit naturally\n          if (!axis.mode && opts.tickDecimals == null) {\n            let extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\n              ts = axis.tickGenerator(axis);\n\n            // only proceed if the tick interval rounded\n            // with an extra decimal doesn't give us a\n            // zero at end\n            if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec)))) axis.tickDecimals = extraDec;\n          }\n        }\n      }\n    }\n\n    function setTicks(axis) {\n      var oticks = axis.options.ticks,\n        ticks = [];\n      if (oticks == null || (typeof oticks == 'number' && oticks > 0)) ticks = axis.tickGenerator(axis);\n      else if (oticks) {\n        if ($.isFunction(oticks))\n          // generate the ticks\n          ticks = oticks(axis);\n        else ticks = oticks;\n      }\n\n      // clean up/labelify the supplied ticks, copy them over\n      let i, v;\n      axis.ticks = [];\n      for (i = 0; i < ticks.length; ++i) {\n        let label = null;\n        let t = ticks[i];\n        if (typeof t == 'object') {\n          v = +t[0];\n          if (t.length > 1) label = t[1];\n        } else v = +t;\n        if (label == null) label = axis.tickFormatter(v, axis);\n        if (!isNaN(v)) axis.ticks.push({ v: v, label: label });\n      }\n    }\n\n    function snapRangeToTicks(axis, ticks) {\n      let changed = false;\n      if (axis.options.autoscaleMargin && ticks.length > 0) {\n        // snap to ticks\n        if (axis.options.min == null) {\n          axis.min = Math.min(axis.min, ticks[0].v);\n          changed = true;\n        }\n        if (axis.options.max == null && ticks.length > 1) {\n          axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\n          changed = true;\n        }\n      }\n      return changed;\n    }\n\n    function draw() {\n      surface.clear();\n\n      executeHooks(hooks.drawBackground, [ctx]);\n\n      let grid = options.grid;\n\n      // draw background, if any\n      if (grid.show && grid.backgroundColor) drawBackground();\n\n      if (grid.show && !grid.aboveData) {\n        drawGrid();\n      }\n\n      for (let i = 0; i < series.length; ++i) {\n        executeHooks(hooks.drawSeries, [ctx, series[i]]);\n        drawSeries(series[i]);\n      }\n\n      executeHooks(hooks.draw, [ctx]);\n\n      if (grid.show && grid.aboveData) {\n        drawGrid();\n      }\n\n      surface.render();\n\n      // A draw implies that either the axes or data have changed, so we\n      // should probably update the overlay highlights as well.\n\n      triggerRedrawOverlay();\n    }\n\n    function extractRange(ranges, coord) {\n      var axis,\n        from,\n        to,\n        key,\n        axes = allAxes();\n\n      for (let i = 0; i < axes.length; ++i) {\n        axis = axes[i];\n        if (axis.direction == coord) {\n          key = coord + axis.n + 'axis';\n          if (!ranges[key] && axis.n == 1) key = coord + 'axis'; // support x1axis as xaxis\n          if (ranges[key]) {\n            from = ranges[key].from;\n            to = ranges[key].to;\n            break;\n          }\n        }\n      }\n\n      // backwards-compat stuff - to be removed in future\n      if (!ranges[key]) {\n        axis = coord == 'x' ? xaxes[0] : yaxes[0];\n        from = ranges[coord + '1'];\n        to = ranges[coord + '2'];\n      }\n\n      // auto-reverse as an added bonus\n      if (from != null && to != null && from > to) {\n        let tmp = from;\n        from = to;\n        to = tmp;\n      }\n\n      return { from: from, to: to, axis: axis };\n    }\n\n    function drawBackground() {\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, 'rgba(255, 255, 255, 0)');\n      ctx.fillRect(0, 0, plotWidth, plotHeight);\n      ctx.restore();\n    }\n\n    function drawGrid() {\n      let i, axes, bw, bc;\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      // draw markings\n      let markings = options.grid.markings;\n      if (markings) {\n        if ($.isFunction(markings)) {\n          axes = plot.getAxes();\n          // xmin etc. is backwards compatibility, to be\n          // removed in the future\n          axes.xmin = axes.xaxis.min;\n          axes.xmax = axes.xaxis.max;\n          axes.ymin = axes.yaxis.min;\n          axes.ymax = axes.yaxis.max;\n\n          markings = markings(axes);\n        }\n\n        for (i = 0; i < markings.length; ++i) {\n          let m = markings[i],\n            xrange = extractRange(m, 'x'),\n            yrange = extractRange(m, 'y');\n\n          // fill in missing\n          if (xrange.from == null) xrange.from = xrange.axis.min;\n          if (xrange.to == null) xrange.to = xrange.axis.max;\n          if (yrange.from == null) yrange.from = yrange.axis.min;\n          if (yrange.to == null) yrange.to = yrange.axis.max;\n\n          // clip\n          if (\n            xrange.to < xrange.axis.min ||\n            xrange.from > xrange.axis.max ||\n            yrange.to < yrange.axis.min ||\n            yrange.from > yrange.axis.max\n          )\n            continue;\n\n          xrange.from = Math.max(xrange.from, xrange.axis.min);\n          xrange.to = Math.min(xrange.to, xrange.axis.max);\n          yrange.from = Math.max(yrange.from, yrange.axis.min);\n          yrange.to = Math.min(yrange.to, yrange.axis.max);\n\n          let xequal = xrange.from === xrange.to,\n            yequal = yrange.from === yrange.to;\n\n          if (xequal && yequal) {\n            continue;\n          }\n\n          // then draw\n          xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\n          xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\n          yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\n          yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\n\n          if (xequal || yequal) {\n            let lineWidth = m.lineWidth || options.grid.markingsLineWidth,\n              subPixel = lineWidth % 2 ? 0.5 : 0;\n            ctx.beginPath();\n            ctx.strokeStyle = m.color || options.grid.markingsColor;\n            ctx.lineWidth = lineWidth;\n            if (xequal) {\n              ctx.moveTo(xrange.to + subPixel, yrange.from);\n              ctx.lineTo(xrange.to + subPixel, yrange.to);\n            } else {\n              ctx.moveTo(xrange.from, yrange.to + subPixel);\n              ctx.lineTo(xrange.to, yrange.to + subPixel);\n            }\n            ctx.stroke();\n          } else {\n            ctx.fillStyle = m.color || options.grid.markingsColor;\n            ctx.fillRect(xrange.from, yrange.to, xrange.to - xrange.from, yrange.from - yrange.to);\n          }\n        }\n      }\n\n      // draw the ticks\n      axes = allAxes();\n      bw = options.grid.borderWidth;\n\n      for (let j = 0; j < axes.length; ++j) {\n        var axis = axes[j],\n          box = axis.box,\n          t = axis.tickLength,\n          x,\n          y,\n          xoff,\n          yoff;\n        if (!axis.show || axis.ticks.length == 0) continue;\n\n        ctx.lineWidth = 1;\n\n        // find the edges\n        if (axis.direction == 'x') {\n          x = 0;\n          if (t == 'full') y = axis.position == 'top' ? 0 : plotHeight;\n          else y = box.top - plotOffset.top + (axis.position == 'top' ? box.height : 0);\n        } else {\n          y = 0;\n          if (t == 'full') x = axis.position == 'left' ? 0 : plotWidth;\n          else x = box.left - plotOffset.left + (axis.position == 'left' ? box.width : 0);\n        }\n\n        // draw tick bar\n        if (!axis.innermost) {\n          ctx.strokeStyle = axis.options.color;\n          ctx.beginPath();\n          xoff = yoff = 0;\n          if (axis.direction == 'x') xoff = plotWidth + 1;\n          else yoff = plotHeight + 1;\n\n          if (ctx.lineWidth == 1) {\n            if (axis.direction == 'x') {\n              y = Math.floor(y) + 0.5;\n            } else {\n              x = Math.floor(x) + 0.5;\n            }\n          }\n\n          ctx.moveTo(x, y);\n          ctx.lineTo(x + xoff, y + yoff);\n          ctx.stroke();\n        }\n\n        // draw ticks\n\n        ctx.strokeStyle = axis.options.tickColor;\n\n        ctx.beginPath();\n        for (i = 0; i < axis.ticks.length; ++i) {\n          let v = axis.ticks[i].v;\n\n          xoff = yoff = 0;\n\n          if (\n            isNaN(v) ||\n            v < axis.min ||\n            v > axis.max ||\n            // skip those lying on the axes if we got a border\n            (t == 'full' && ((typeof bw == 'object' && bw[axis.position] > 0) || bw > 0) && (v == axis.min || v == axis.max))\n          )\n            continue;\n\n          if (axis.direction == 'x') {\n            x = axis.p2c(v);\n            yoff = t == 'full' ? -plotHeight : t;\n\n            if (axis.position == 'top') yoff = -yoff;\n          } else {\n            y = axis.p2c(v);\n            xoff = t == 'full' ? -plotWidth : t;\n\n            if (axis.position == 'left') xoff = -xoff;\n          }\n\n          if (ctx.lineWidth == 1) {\n            if (axis.direction == 'x') x = Math.floor(x) + 0.5;\n            else y = Math.floor(y) + 0.5;\n          }\n\n          ctx.moveTo(x, y);\n          ctx.lineTo(x + xoff, y + yoff);\n        }\n\n        ctx.stroke();\n      }\n\n      // draw border\n      if (bw) {\n        // If either borderWidth or borderColor is an object, then draw the border\n        // line by line instead of as one rectangle\n        bc = options.grid.borderColor;\n        if (typeof bw == 'object' || typeof bc == 'object') {\n          if (typeof bw !== 'object') {\n            bw = { top: bw, right: bw, bottom: bw, left: bw };\n          }\n          if (typeof bc !== 'object') {\n            bc = { top: bc, right: bc, bottom: bc, left: bc };\n          }\n\n          if (bw.top > 0) {\n            ctx.strokeStyle = bc.top;\n            ctx.lineWidth = bw.top;\n            ctx.beginPath();\n            ctx.moveTo(0 - bw.left, 0 - bw.top / 2);\n            ctx.lineTo(plotWidth, 0 - bw.top / 2);\n            ctx.stroke();\n          }\n\n          if (bw.right > 0) {\n            ctx.strokeStyle = bc.right;\n            ctx.lineWidth = bw.right;\n            ctx.beginPath();\n            ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\n            ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\n            ctx.stroke();\n          }\n\n          if (bw.bottom > 0) {\n            ctx.strokeStyle = bc.bottom;\n            ctx.lineWidth = bw.bottom;\n            ctx.beginPath();\n            ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\n            ctx.lineTo(0, plotHeight + bw.bottom / 2);\n            ctx.stroke();\n          }\n\n          if (bw.left > 0) {\n            ctx.strokeStyle = bc.left;\n            ctx.lineWidth = bw.left;\n            ctx.beginPath();\n            ctx.moveTo(0 - bw.left / 2, plotHeight + bw.bottom);\n            ctx.lineTo(0 - bw.left / 2, 0);\n            ctx.stroke();\n          }\n        } else {\n          ctx.lineWidth = bw;\n          ctx.strokeStyle = options.grid.borderColor;\n          ctx.strokeRect(-bw / 2, -bw / 2, plotWidth + bw, plotHeight + bw);\n        }\n      }\n\n      ctx.restore();\n    }\n\n    function drawAxisLabels() {\n      $.each(allAxes(), function(_, axis) {\n        let box = axis.box,\n          legacyStyles = axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis',\n          layer = 'flot-' + axis.direction + '-axis flot-' + axis.direction + axis.n + '-axis ' + legacyStyles,\n          font = axis.options.font || 'flot-tick-label tickLabel',\n          tick,\n          x,\n          y,\n          halign,\n          valign;\n\n        // Remove text before checking for axis.show and ticks.length;\n        // otherwise plugins, like flot-tickrotor, that draw their own\n        // tick labels will end up with both theirs and the defaults.\n\n        surface.removeText(layer);\n\n        if (!axis.show || axis.ticks.length == 0) return;\n\n        for (let i = 0; i < axis.ticks.length; ++i) {\n          tick = axis.ticks[i];\n          if (!tick.label || tick.v < axis.min || tick.v > axis.max) continue;\n\n          if (axis.direction == 'x') {\n            halign = 'center';\n            x = plotOffset.left + axis.p2c(tick.v);\n            if (axis.position == 'bottom') {\n              y = box.top + box.padding + box.eventSectionPadding;\n            } else {\n              y = box.top + box.height - box.padding;\n              valign = 'bottom';\n            }\n          } else {\n            valign = 'middle';\n            y = plotOffset.top + axis.p2c(tick.v);\n            if (axis.position == 'left') {\n              x = box.left + box.width - box.padding;\n              halign = 'right';\n            } else {\n              x = box.left + box.padding;\n            }\n          }\n\n          surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\n        }\n      });\n    }\n\n    function drawOrphanedPoints(series) {\n      /* Filters series data for points with no neighbors before or after\n       * and plots single 0.5 radius points for them so that they are displayed.\n       */\n      let abandonedPoints = [];\n      let beforeX = null;\n      let afterX = null;\n      let datapoints = series.datapoints;\n      // find any points with no neighbors before or after\n      let emptyPoints = [];\n      for (let j = 0; j < datapoints.pointsize - 2; j++) {\n        emptyPoints.push(0);\n      }\n      for (let i = 0; i < datapoints.points.length; i += datapoints.pointsize) {\n        var x = datapoints.points[i],\n          y = datapoints.points[i + 1];\n        if (i === datapoints.points.length - datapoints.pointsize) {\n          afterX = null;\n        } else {\n          afterX = datapoints.points[i + datapoints.pointsize];\n        }\n        if (x !== null && y !== null && beforeX === null && afterX === null) {\n          abandonedPoints.push(x);\n          abandonedPoints.push(y);\n          abandonedPoints.push.apply(abandonedPoints, emptyPoints);\n        }\n        beforeX = x;\n      }\n      var olddatapoints = datapoints.points;\n      datapoints.points = abandonedPoints;\n\n      series.points.radius = series.lines.lineWidth / 2;\n      // plot the orphan points with a radius of lineWidth/2\n      drawSeriesPoints(series);\n      // reset old info\n      datapoints.points = olddatapoints;\n    }\n\n    function drawSeries(series) {\n      if (series.lines.show) {\n        drawSeriesLines(series);\n        if (!series.points.show && !series.bars.show) {\n          // not necessary if user wants points displayed for everything\n          drawOrphanedPoints(series);\n        }\n      }\n      if (series.bars.show) drawSeriesBars(series);\n      if (series.points.show) drawSeriesPoints(series);\n    }\n\n    function drawSeriesLines(series) {\n      function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\n        let points = datapoints.points,\n          ps = datapoints.pointsize,\n          prevx = null,\n          prevy = null;\n\n        ctx.beginPath();\n        for (let i = ps; i < points.length; i += ps) {\n          var x1 = points[i - ps],\n            y1 = points[i - ps + 1],\n            x2 = points[i],\n            y2 = points[i + 1];\n\n          if (x1 == null || x2 == null) continue;\n\n          // clip with ymin\n          if (y1 <= y2 && y1 < axisy.min) {\n            if (y2 < axisy.min) continue; // line segment is outside\n            // compute new intersection point\n            x1 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.min;\n          } else if (y2 <= y1 && y2 < axisy.min) {\n            if (y1 < axisy.min) continue;\n            x2 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.min;\n          }\n\n          // clip with ymax\n          if (y1 >= y2 && y1 > axisy.max) {\n            if (y2 > axisy.max) continue;\n            x1 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.max;\n          } else if (y2 >= y1 && y2 > axisy.max) {\n            if (y1 > axisy.max) continue;\n            x2 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.max;\n          }\n\n          // clip with xmin\n          if (x1 <= x2 && x1 < axisx.min) {\n            if (x2 < axisx.min) continue;\n            y1 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.min;\n          } else if (x2 <= x1 && x2 < axisx.min) {\n            if (x1 < axisx.min) continue;\n            y2 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.min;\n          }\n\n          // clip with xmax\n          if (x1 >= x2 && x1 > axisx.max) {\n            if (x2 > axisx.max) continue;\n            y1 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.max;\n          } else if (x2 >= x1 && x2 > axisx.max) {\n            if (x1 > axisx.max) continue;\n            y2 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.max;\n          }\n\n          if (x1 != prevx || y1 != prevy) ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n\n          prevx = x2;\n          prevy = y2;\n          ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\n        }\n        ctx.stroke();\n      }\n\n      function plotLineArea(datapoints, axisx, axisy) {\n        let points = datapoints.points,\n          ps = datapoints.pointsize,\n          bottom = Math.min(Math.max(0, axisy.min), axisy.max),\n          i = 0,\n          areaOpen = false,\n          ypos = 1,\n          segmentStart = 0,\n          segmentEnd = 0;\n\n        // we process each segment in two turns, first forward\n        // direction to sketch out top, then once we hit the\n        // end we go backwards to sketch the bottom\n        while (true) {\n          if (ps > 0 && i > points.length + ps) break;\n\n          i += ps; // ps is negative if going backwards\n\n          let x1 = points[i - ps],\n            y1 = points[i - ps + ypos],\n            x2 = points[i],\n            y2 = points[i + ypos];\n\n          if (areaOpen) {\n            if (ps > 0 && x1 != null && x2 == null) {\n              // at turning point\n              segmentEnd = i;\n              ps = -ps;\n              ypos = 2;\n              continue;\n            }\n\n            if (ps < 0 && i == segmentStart + ps) {\n              // done with the reverse sweep\n              ctx.fill();\n              areaOpen = false;\n              ps = -ps;\n              ypos = 1;\n              i = segmentStart = segmentEnd + ps;\n              continue;\n            }\n          }\n\n          if (x1 == null || x2 == null) continue;\n\n          // clip x values\n\n          // clip with xmin\n          if (x1 <= x2 && x1 < axisx.min) {\n            if (x2 < axisx.min) continue;\n            y1 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.min;\n          } else if (x2 <= x1 && x2 < axisx.min) {\n            if (x1 < axisx.min) continue;\n            y2 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.min;\n          }\n\n          // clip with xmax\n          if (x1 >= x2 && x1 > axisx.max) {\n            if (x2 > axisx.max) continue;\n            y1 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.max;\n          } else if (x2 >= x1 && x2 > axisx.max) {\n            if (x1 > axisx.max) continue;\n            y2 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.max;\n          }\n\n          if (!areaOpen) {\n            // open area\n            ctx.beginPath();\n            ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\n            areaOpen = true;\n          }\n\n          // now first check the case where both is outside\n          if (y1 >= axisy.max && y2 >= axisy.max) {\n            ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\n            ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\n            continue;\n          } else if (y1 <= axisy.min && y2 <= axisy.min) {\n            ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\n            ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\n            continue;\n          }\n\n          // else it's a bit more complicated, there might\n          // be a flat maxed out rectangle first, then a\n          // triangular cutout or reverse; to find these\n          // keep track of the current x values\n          var x1old = x1,\n            x2old = x2;\n\n          // clip the y values, without shortcutting, we\n          // go through all cases in turn\n\n          // clip with ymin\n          if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\n            x1 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.min;\n          } else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\n            x2 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.min;\n          }\n\n          // clip with ymax\n          if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\n            x1 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.max;\n          } else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\n            x2 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.max;\n          }\n\n          // if the x value was changed we got a rectangle\n          // to fill\n          if (x1 != x1old) {\n            ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\n            // it goes to (x1, y1), but we fill that below\n          }\n\n          // fill triangular section, this sometimes result\n          // in redundant points if (x1, y1) hasn't changed\n          // from previous line to, but we just ignore that\n          ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\n          ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n\n          // fill the other rectangle if it's there\n          if (x2 != x2old) {\n            ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n            ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\n          }\n        }\n      }\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n      ctx.lineJoin = 'round';\n\n      let lw = series.lines.lineWidth,\n        sw = series.shadowSize;\n      // FIXME: consider another form of shadow when filling is turned on\n      if (lw > 0 && sw > 0) {\n        // draw shadow as a thick and thin line with transparency\n        ctx.lineWidth = sw;\n        ctx.strokeStyle = 'rgba(0,0,0,0.1)';\n        // position shadow at angle from the mid of line\n        var angle = Math.PI / 18;\n        plotLine(\n          series.datapoints,\n          Math.sin(angle) * (lw / 2 + sw / 2),\n          Math.cos(angle) * (lw / 2 + sw / 2),\n          series.xaxis,\n          series.yaxis\n        );\n        ctx.lineWidth = sw / 2;\n        plotLine(\n          series.datapoints,\n          Math.sin(angle) * (lw / 2 + sw / 4),\n          Math.cos(angle) * (lw / 2 + sw / 4),\n          series.xaxis,\n          series.yaxis\n        );\n      }\n\n      ctx.lineWidth = lw;\n      ctx.strokeStyle = series.color;\n      let fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\n      if (fillStyle) {\n        ctx.fillStyle = fillStyle;\n        plotLineArea(series.datapoints, series.xaxis, series.yaxis);\n      }\n\n      if (lw > 0) plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\n      ctx.restore();\n    }\n\n    function drawSeriesPoints(series) {\n      function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\n        var points = datapoints.points,\n          ps = datapoints.pointsize;\n\n        for (let i = 0; i < points.length; i += ps) {\n          var x = points[i],\n            y = points[i + 1];\n          if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) continue;\n\n          ctx.beginPath();\n          x = axisx.p2c(x);\n          y = axisy.p2c(y) + offset;\n          if (symbol == 'circle') ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\n          else symbol(ctx, x, y, radius, shadow);\n          ctx.closePath();\n\n          if (fillStyle) {\n            ctx.fillStyle = fillStyle;\n            ctx.fill();\n          }\n          ctx.stroke();\n        }\n      }\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      let lw = series.points.lineWidth,\n        sw = series.shadowSize,\n        radius = series.points.radius,\n        symbol = series.points.symbol;\n\n      // If the user sets the line width to 0, we change it to a very\n      // small value. A line width of 0 seems to force the default of 1.\n      // Doing the conditional here allows the shadow setting to still be\n      // optional even with a lineWidth of 0.\n\n      if (lw == 0) lw = 0.0001;\n\n      if (lw > 0 && sw > 0) {\n        // draw shadow in two steps\n        let w = sw / 2;\n        ctx.lineWidth = w;\n        ctx.strokeStyle = 'rgba(0,0,0,0.1)';\n        plotPoints(series.datapoints, radius, null, w + w / 2, true, series.xaxis, series.yaxis, symbol);\n\n        ctx.strokeStyle = 'rgba(0,0,0,0.2)';\n        plotPoints(series.datapoints, radius, null, w / 2, true, series.xaxis, series.yaxis, symbol);\n      }\n\n      ctx.lineWidth = lw;\n      ctx.strokeStyle = series.color;\n      plotPoints(\n        series.datapoints,\n        radius,\n        getFillStyle(series.points, series.color),\n        0,\n        false,\n        series.xaxis,\n        series.yaxis,\n        symbol\n      );\n      ctx.restore();\n    }\n\n    function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\n      var left, right, bottom, top, drawLeft, drawRight, drawTop, drawBottom, tmp;\n\n      // in horizontal mode, we start the bar from the left\n      // instead of from the bottom so it appears to be\n      // horizontal rather than vertical\n      if (horizontal) {\n        drawBottom = drawRight = drawTop = true;\n        drawLeft = false;\n        left = b;\n        right = x;\n        top = y + barLeft;\n        bottom = y + barRight;\n\n        // account for negative bars\n        if (right < left) {\n          tmp = right;\n          right = left;\n          left = tmp;\n          drawLeft = true;\n          drawRight = false;\n        }\n      } else {\n        drawLeft = drawRight = drawTop = true;\n        drawBottom = false;\n        left = x + barLeft;\n        right = x + barRight;\n        bottom = b;\n        top = y;\n\n        // account for negative bars\n        if (top < bottom) {\n          tmp = top;\n          top = bottom;\n          bottom = tmp;\n          drawBottom = true;\n          drawTop = false;\n        }\n      }\n\n      // clip\n      if (right < axisx.min || left > axisx.max || top < axisy.min || bottom > axisy.max) return;\n\n      if (left < axisx.min) {\n        left = axisx.min;\n        drawLeft = false;\n      }\n\n      if (right > axisx.max) {\n        right = axisx.max;\n        drawRight = false;\n      }\n\n      if (bottom < axisy.min) {\n        bottom = axisy.min;\n        drawBottom = false;\n      }\n\n      if (top > axisy.max) {\n        top = axisy.max;\n        drawTop = false;\n      }\n\n      left = axisx.p2c(left);\n      bottom = axisy.p2c(bottom);\n      right = axisx.p2c(right);\n      top = axisy.p2c(top);\n\n      // fill the bar\n      if (fillStyleCallback) {\n        c.fillStyle = fillStyleCallback(bottom, top);\n        c.fillRect(left, top, right - left, bottom - top);\n      }\n\n      // draw outline\n      if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\n        c.beginPath();\n\n        // FIXME: inline moveTo is buggy with excanvas\n        c.moveTo(left, bottom);\n        if (drawLeft) c.lineTo(left, top);\n        else c.moveTo(left, top);\n        if (drawTop) c.lineTo(right, top);\n        else c.moveTo(right, top);\n        if (drawRight) c.lineTo(right, bottom);\n        else c.moveTo(right, bottom);\n        if (drawBottom) c.lineTo(left, bottom);\n        else c.moveTo(left, bottom);\n        c.stroke();\n      }\n    }\n\n    function drawSeriesBars(series) {\n      function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\n        var points = datapoints.points,\n          ps = datapoints.pointsize;\n\n        for (let i = 0; i < points.length; i += ps) {\n          if (points[i] == null) continue;\n          drawBar(\n            points[i],\n            points[i + 1],\n            points[i + 2],\n            barLeft,\n            barRight,\n            fillStyleCallback,\n            axisx,\n            axisy,\n            ctx,\n            series.bars.horizontal,\n            series.bars.lineWidth\n          );\n        }\n      }\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      // FIXME: figure out a way to add shadows (for instance along the right edge)\n      ctx.lineWidth = series.bars.lineWidth;\n      ctx.strokeStyle = series.color;\n\n      let barLeft;\n\n      switch (series.bars.align) {\n        case 'left':\n          barLeft = 0;\n          break;\n        case 'right':\n          barLeft = -series.bars.barWidth;\n          break;\n        default:\n          barLeft = -series.bars.barWidth / 2;\n      }\n\n      var fillStyleCallback = series.bars.fill\n        ? function(bottom, top) {\n            return getFillStyle(series.bars, series.color, bottom, top);\n          }\n        : null;\n      plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\n      ctx.restore();\n    }\n\n    function getFillStyle(filloptions, seriesColor, bottom, top) {\n      let fill = filloptions.fill;\n      if (!fill) return null;\n\n      if (filloptions.fillColor) return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\n\n      let c = $.color.parse(seriesColor);\n      c.a = typeof fill == 'number' ? fill : 0.4;\n      c.normalize();\n      return c.toString();\n    }\n\n    function insertLegend() {\n      if (options.legend.container != null) {\n        $(options.legend.container).html('');\n      } else {\n        placeholder.find('.legend').remove();\n      }\n\n      if (!options.legend.show) {\n        return;\n      }\n\n      var fragments = [],\n        entries = [],\n        rowStarted = false,\n        lf = options.legend.labelFormatter,\n        s,\n        label;\n\n      // Build a list of legend entries, with each having a label and a color\n\n      for (var i = 0; i < series.length; ++i) {\n        s = series[i];\n        if (s.label) {\n          label = lf ? lf(s.label, s) : s.label;\n          if (label) {\n            entries.push({\n              label: label,\n              color: s.color,\n            });\n          }\n        }\n      }\n\n      // Sort the legend using either the default or a custom comparator\n\n      if (options.legend.sorted) {\n        if ($.isFunction(options.legend.sorted)) {\n          entries.sort(options.legend.sorted);\n        } else if (options.legend.sorted == 'reverse') {\n          entries.reverse();\n        } else {\n          var ascending = options.legend.sorted != 'descending';\n          entries.sort(function(a, b) {\n            // eslint-disable-next-line\n            return a.label == b.label ? 0 : a.label < b.label != ascending ? 1 : -1; // Logical XOR\n          });\n        }\n      }\n\n      // Generate markup for the list of entries, in their final order\n\n      for (var i = 0; i < entries.length; ++i) {\n        let entry = entries[i];\n\n        if (i % options.legend.noColumns == 0) {\n          if (rowStarted) fragments.push('</tr>');\n          fragments.push('<tr>');\n          rowStarted = true;\n        }\n\n        fragments.push(\n          '<td class=\"legendColorBox\"><div style=\"border:1px solid ' +\n            options.legend.labelBoxBorderColor +\n            ';padding:1px\"><div style=\"width:4px;height:0;border:5px solid ' +\n            entry.color +\n            ';overflow:hidden\"></div></div></td>' +\n            '<td class=\"legendLabel\">' +\n            entry.label +\n            '</td>'\n        );\n      }\n\n      if (rowStarted) fragments.push('</tr>');\n\n      if (fragments.length == 0) return;\n\n      var table = '<table style=\"font-size:smaller;color:' + options.grid.color + '\">' + fragments.join('') + '</table>';\n      if (options.legend.container != null) $(options.legend.container).html(table);\n      else {\n        var pos = '',\n          p = options.legend.position,\n          m = options.legend.margin;\n        if (m[0] == null) m = [m, m];\n        if (p.charAt(0) == 'n') pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\n        else if (p.charAt(0) == 's') pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\n        if (p.charAt(1) == 'e') pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\n        else if (p.charAt(1) == 'w') pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\n        var legend = $(\n          '<div class=\"legend\">' + table.replace('style=\"', 'style=\"position:absolute;' + pos + ';') + '</div>'\n        ).appendTo(placeholder);\n        if (options.legend.backgroundOpacity != 0.0) {\n          // put in the transparent background\n          // separately to avoid blended labels and\n          // label boxes\n          let c = options.legend.backgroundColor;\n          if (c == null) {\n            c = options.grid.backgroundColor;\n            if (c && typeof c == 'string') c = $.color.parse(c);\n            else c = $.color.extract(legend, 'background-color');\n            c.a = 1;\n            c = c.toString();\n          }\n          let div = legend.children();\n          $(\n            '<div style=\"position:absolute;width:' +\n              div.width() +\n              'px;height:' +\n              div.height() +\n              'px;' +\n              pos +\n              'background-color:' +\n              c +\n              ';\"> </div>'\n          )\n            .prependTo(legend)\n            .css('opacity', options.legend.backgroundOpacity);\n        }\n      }\n    }\n\n    // interactive features\n\n    var highlights = [],\n      redrawTimeout = null;\n\n    // returns the data item the mouse is over, or null if none is found\n    function findNearbyItem(mouseX, mouseY, seriesFilter) {\n      let maxDistance = options.grid.mouseActiveRadius,\n        smallestDistance = maxDistance * maxDistance + 1,\n        item = null,\n        i,\n        j,\n        ps;\n\n      for (i = series.length - 1; i >= 0; --i) {\n        if (!seriesFilter(series[i])) continue;\n\n        let s = series[i],\n          axisx = s.xaxis,\n          axisy = s.yaxis,\n          points = s.datapoints.points,\n          mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\n          my = axisy.c2p(mouseY),\n          maxx = maxDistance / axisx.scale,\n          maxy = maxDistance / axisy.scale;\n\n        ps = s.datapoints.pointsize;\n        // with inverse transforms, we can't use the maxx/maxy\n        // optimization, sadly\n        if (axisx.options.inverseTransform) maxx = Number.MAX_VALUE;\n        if (axisy.options.inverseTransform) maxy = Number.MAX_VALUE;\n\n        if (s.lines.show || s.points.show) {\n          for (j = 0; j < points.length; j += ps) {\n            var x = points[j],\n              y = points[j + 1];\n            if (x == null) continue;\n\n            // For points and lines, the cursor must be within a\n            // certain distance to the data point\n            if (x - mx > maxx || x - mx < -maxx || y - my > maxy || y - my < -maxy) continue;\n\n            // We have to calculate distances in pixels, not in\n            // data units, because the scales of the axes may be different\n            let dx = Math.abs(axisx.p2c(x) - mouseX),\n              dy = Math.abs(axisy.p2c(y) - mouseY),\n              dist = dx * dx + dy * dy; // we save the sqrt\n\n            // use <= to ensure last point takes precedence\n            // (last generally means on top of)\n            if (dist < smallestDistance) {\n              smallestDistance = dist;\n              item = [i, j / ps];\n            }\n          }\n        }\n\n        if (s.bars.show && !item) {\n          // no other point can be nearby\n\n          var barLeft, barRight;\n\n          switch (s.bars.align) {\n            case 'left':\n              barLeft = 0;\n              break;\n            case 'right':\n              barLeft = -s.bars.barWidth;\n              break;\n            default:\n              barLeft = -s.bars.barWidth / 2;\n          }\n\n          barRight = barLeft + s.bars.barWidth;\n\n          for (j = 0; j < points.length; j += ps) {\n            var x = points[j],\n              y = points[j + 1],\n              b = points[j + 2];\n            if (x == null) continue;\n\n            // for a bar graph, the cursor must be inside the bar\n            if (\n              series[i].bars.horizontal\n                ? mx <= Math.max(b, x) && mx >= Math.min(b, x) && my >= y + barLeft && my <= y + barRight\n                : mx >= x + barLeft && mx <= x + barRight && my >= Math.min(b, y) && my <= Math.max(b, y)\n            )\n              item = [i, j / ps];\n          }\n        }\n      }\n\n      if (item) {\n        i = item[0];\n        j = item[1];\n        ps = series[i].datapoints.pointsize;\n\n        return {\n          datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\n          dataIndex: j,\n          series: series[i],\n          seriesIndex: i,\n        };\n      }\n\n      return null;\n    }\n\n    function onMouseMove(e) {\n      if (options.grid.hoverable)\n        triggerClickHoverEvent('plothover', e, function(s) {\n          return s['hoverable'] != false;\n        });\n    }\n\n    function onMouseLeave(e) {\n      if (options.grid.hoverable)\n        triggerClickHoverEvent('plothover', e, function() {\n          return false;\n        });\n    }\n\n    function onClick(e) {\n      if (plot.isSelecting) {\n        return;\n      }\n\n      triggerClickHoverEvent('plotclick', e, function(s) {\n        return s['clickable'] != false;\n      });\n    }\n\n    // trigger click or hover event (they send the same parameters\n    // so we share their code)\n    function triggerClickHoverEvent(eventname, event, seriesFilter) {\n      let offset = eventHolder.offset(),\n        canvasX = event.pageX - offset.left - plotOffset.left,\n        canvasY = event.pageY - offset.top - plotOffset.top,\n        pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\n\n      pos.pageX = event.pageX;\n      pos.pageY = event.pageY;\n\n      // Add ctrlKey and metaKey to event\n      pos.ctrlKey = event.ctrlKey;\n      pos.metaKey = event.metaKey;\n\n      let item = findNearbyItem(canvasX, canvasY, seriesFilter);\n\n      if (item) {\n        // fill in mouse pos for any listeners out there\n        item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\n        item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\n      }\n\n      if (options.grid.autoHighlight) {\n        // clear auto-highlights\n        for (let i = 0; i < highlights.length; ++i) {\n          let h = highlights[i];\n          if (\n            h.auto == eventname &&\n            !(item && h.series == item.series && h.point[0] == item.datapoint[0] && h.point[1] == item.datapoint[1])\n          )\n            unhighlight(h.series, h.point);\n        }\n\n        if (item) highlight(item.series, item.datapoint, eventname);\n      }\n\n      placeholder.trigger(eventname, [pos, item]);\n    }\n\n    function triggerRedrawOverlay() {\n      let t = options.interaction.redrawOverlayInterval;\n      if (t == -1) {\n        // skip event queue\n        drawOverlay();\n        return;\n      }\n\n      if (!redrawTimeout) redrawTimeout = setTimeout(drawOverlay, t);\n    }\n\n    function drawOverlay() {\n      redrawTimeout = null;\n\n      // draw highlights\n      octx.save();\n      overlay.clear();\n      octx.translate(plotOffset.left, plotOffset.top);\n\n      let i, hi;\n      for (i = 0; i < highlights.length; ++i) {\n        hi = highlights[i];\n\n        if (hi.series.bars.show) drawBarHighlight(hi.series, hi.point);\n        else drawPointHighlight(hi.series, hi.point);\n      }\n      octx.restore();\n\n      executeHooks(hooks.drawOverlay, [octx]);\n    }\n\n    function highlight(s, point, auto) {\n      if (typeof s == 'number') s = series[s];\n\n      if (typeof point == 'number') {\n        let ps = s.datapoints.pointsize;\n        point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n      }\n\n      let i = indexOfHighlight(s, point);\n      if (i == -1) {\n        highlights.push({ series: s, point: point, auto: auto });\n\n        triggerRedrawOverlay();\n      } else if (!auto) highlights[i].auto = false;\n    }\n\n    function unhighlight(s, point) {\n      if (s == null && point == null) {\n        highlights = [];\n        triggerRedrawOverlay();\n        return;\n      }\n\n      if (typeof s == 'number') s = series[s];\n\n      if (typeof point == 'number') {\n        let ps = s.datapoints.pointsize;\n        point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n      }\n\n      let i = indexOfHighlight(s, point);\n      if (i != -1) {\n        highlights.splice(i, 1);\n\n        triggerRedrawOverlay();\n      }\n    }\n\n    function indexOfHighlight(s, p) {\n      for (let i = 0; i < highlights.length; ++i) {\n        let h = highlights[i];\n        if (h.series == s && h.point[0] == p[0] && h.point[1] == p[1]) return i;\n      }\n      return -1;\n    }\n\n    function drawPointHighlight(series, point) {\n      var x = point[0],\n        y = point[1],\n        axisx = series.xaxis,\n        axisy = series.yaxis,\n        highlightColor =\n          typeof series.highlightColor === 'string'\n            ? series.highlightColor\n            : $.color\n                .parse(series.color)\n                .scale('a', 0.5)\n                .toString();\n\n      if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) return;\n\n      let pointRadius = series.points.radius + series.points.lineWidth / 2;\n      octx.lineWidth = pointRadius;\n      octx.strokeStyle = highlightColor;\n      let radius = 1.5 * pointRadius;\n      x = axisx.p2c(x);\n      y = axisy.p2c(y);\n\n      octx.beginPath();\n      if (series.points.symbol == 'circle') octx.arc(x, y, radius, 0, 2 * Math.PI, false);\n      else series.points.symbol(octx, x, y, radius, false);\n      octx.closePath();\n      octx.stroke();\n    }\n\n    function drawBarHighlight(series, point) {\n      var highlightColor =\n          typeof series.highlightColor === 'string'\n            ? series.highlightColor\n            : $.color\n                .parse(series.color)\n                .scale('a', 0.5)\n                .toString(),\n        fillStyle = highlightColor,\n        barLeft;\n\n      switch (series.bars.align) {\n        case 'left':\n          barLeft = 0;\n          break;\n        case 'right':\n          barLeft = -series.bars.barWidth;\n          break;\n        default:\n          barLeft = -series.bars.barWidth / 2;\n      }\n\n      octx.lineWidth = series.bars.lineWidth;\n      octx.strokeStyle = highlightColor;\n\n      drawBar(\n        point[0],\n        point[1],\n        point[2] || 0,\n        barLeft,\n        barLeft + series.bars.barWidth,\n        function() {\n          return fillStyle;\n        },\n        series.xaxis,\n        series.yaxis,\n        octx,\n        series.bars.horizontal,\n        series.bars.lineWidth\n      );\n    }\n\n    function getColorOrGradient(spec, bottom, top, defaultColor) {\n      if (typeof spec == 'string') return spec;\n      else {\n        // assume this is a gradient spec; IE currently only\n        // supports a simple vertical gradient properly, so that's\n        // what we support too\n        let gradient = ctx.createLinearGradient(0, top, 0, bottom);\n\n        for (let i = 0, l = spec.colors.length; i < l; ++i) {\n          let c = spec.colors[i];\n          if (typeof c != 'string') {\n            let co = $.color.parse(defaultColor);\n            if (c.brightness != null) co = co.scale('rgb', c.brightness);\n            if (c.opacity != null) co.a *= c.opacity;\n            c = co.toString();\n          }\n          gradient.addColorStop(i / (l - 1), c);\n        }\n\n        return gradient;\n      }\n    }\n  }\n\n  // Add the plot function to the top level of the jQuery object\n\n  $.plot = function(placeholder, data, options) {\n    //var t0 = new Date();\n    let plot = new Plot($(placeholder), data, options, $.plot.plugins);\n    //(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\n    return plot;\n  };\n\n  $.plot.version = '0.8.3';\n\n  $.plot.plugins = [];\n\n  // Also add the plot function as a chainable property\n\n  $.fn.plot = function(data, options) {\n    return this.each(function() {\n      $.plot(this, data, options);\n    });\n  };\n\n  // round to nearby lower multiple of base\n  function floorInBase(n, base) {\n    return base * Math.floor(n / base);\n  }\n})(window.jQuery);\n"]},"metadata":{},"sourceType":"module"}