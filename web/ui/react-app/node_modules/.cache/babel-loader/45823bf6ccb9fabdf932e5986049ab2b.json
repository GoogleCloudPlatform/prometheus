{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) {\n    if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DomHandler = void 0;\n\nvar domelementtype_1 = require(\"domelementtype\");\n\nvar node_1 = require(\"./node\");\n\n__exportStar(require(\"./node\"), exports);\n\nvar reWhitespace = /\\s+/g; // Default options\n\nvar defaultOpts = {\n  normalizeWhitespace: false,\n  withStartIndices: false,\n  withEndIndices: false\n};\n\nvar DomHandler =\n/** @class */\nfunction () {\n  /**\n   * @param callback Called once parsing has completed.\n   * @param options Settings for the handler.\n   * @param elementCB Callback whenever a tag is closed.\n   */\n  function DomHandler(callback, options, elementCB) {\n    /** The elements of the DOM */\n    this.dom = [];\n    /** The root element for the DOM */\n\n    this.root = new node_1.Document(this.dom);\n    /** Indicated whether parsing has been completed. */\n\n    this.done = false;\n    /** Stack of open tags. */\n\n    this.tagStack = [this.root];\n    /** A data node that is still being written to. */\n\n    this.lastNode = null;\n    /** Reference to the parser instance. Used for location information. */\n\n    this.parser = null; // Make it possible to skip arguments, for backwards-compatibility\n\n    if (typeof options === \"function\") {\n      elementCB = options;\n      options = defaultOpts;\n    }\n\n    if (typeof callback === \"object\") {\n      options = callback;\n      callback = undefined;\n    }\n\n    this.callback = callback !== null && callback !== void 0 ? callback : null;\n    this.options = options !== null && options !== void 0 ? options : defaultOpts;\n    this.elementCB = elementCB !== null && elementCB !== void 0 ? elementCB : null;\n  }\n\n  DomHandler.prototype.onparserinit = function (parser) {\n    this.parser = parser;\n  }; // Resets the handler back to starting state\n\n\n  DomHandler.prototype.onreset = function () {\n    var _a;\n\n    this.dom = [];\n    this.root = new node_1.Document(this.dom);\n    this.done = false;\n    this.tagStack = [this.root];\n    this.lastNode = null;\n    this.parser = (_a = this.parser) !== null && _a !== void 0 ? _a : null;\n  }; // Signals the handler that parsing is done\n\n\n  DomHandler.prototype.onend = function () {\n    if (this.done) return;\n    this.done = true;\n    this.parser = null;\n    this.handleCallback(null);\n  };\n\n  DomHandler.prototype.onerror = function (error) {\n    this.handleCallback(error);\n  };\n\n  DomHandler.prototype.onclosetag = function () {\n    this.lastNode = null;\n    var elem = this.tagStack.pop();\n\n    if (this.options.withEndIndices) {\n      elem.endIndex = this.parser.endIndex;\n    }\n\n    if (this.elementCB) this.elementCB(elem);\n  };\n\n  DomHandler.prototype.onopentag = function (name, attribs) {\n    var type = this.options.xmlMode ? domelementtype_1.ElementType.Tag : undefined;\n    var element = new node_1.Element(name, attribs, undefined, type);\n    this.addNode(element);\n    this.tagStack.push(element);\n  };\n\n  DomHandler.prototype.ontext = function (data) {\n    var normalizeWhitespace = this.options.normalizeWhitespace;\n    var lastNode = this.lastNode;\n\n    if (lastNode && lastNode.type === domelementtype_1.ElementType.Text) {\n      if (normalizeWhitespace) {\n        lastNode.data = (lastNode.data + data).replace(reWhitespace, \" \");\n      } else {\n        lastNode.data += data;\n      }\n    } else {\n      if (normalizeWhitespace) {\n        data = data.replace(reWhitespace, \" \");\n      }\n\n      var node = new node_1.Text(data);\n      this.addNode(node);\n      this.lastNode = node;\n    }\n  };\n\n  DomHandler.prototype.oncomment = function (data) {\n    if (this.lastNode && this.lastNode.type === domelementtype_1.ElementType.Comment) {\n      this.lastNode.data += data;\n      return;\n    }\n\n    var node = new node_1.Comment(data);\n    this.addNode(node);\n    this.lastNode = node;\n  };\n\n  DomHandler.prototype.oncommentend = function () {\n    this.lastNode = null;\n  };\n\n  DomHandler.prototype.oncdatastart = function () {\n    var text = new node_1.Text(\"\");\n    var node = new node_1.NodeWithChildren(domelementtype_1.ElementType.CDATA, [text]);\n    this.addNode(node);\n    text.parent = node;\n    this.lastNode = text;\n  };\n\n  DomHandler.prototype.oncdataend = function () {\n    this.lastNode = null;\n  };\n\n  DomHandler.prototype.onprocessinginstruction = function (name, data) {\n    var node = new node_1.ProcessingInstruction(name, data);\n    this.addNode(node);\n  };\n\n  DomHandler.prototype.handleCallback = function (error) {\n    if (typeof this.callback === \"function\") {\n      this.callback(error, this.dom);\n    } else if (error) {\n      throw error;\n    }\n  };\n\n  DomHandler.prototype.addNode = function (node) {\n    var parent = this.tagStack[this.tagStack.length - 1];\n    var previousSibling = parent.children[parent.children.length - 1];\n\n    if (this.options.withStartIndices) {\n      node.startIndex = this.parser.startIndex;\n    }\n\n    if (this.options.withEndIndices) {\n      node.endIndex = this.parser.endIndex;\n    }\n\n    parent.children.push(node);\n\n    if (previousSibling) {\n      node.prev = previousSibling;\n      previousSibling.next = node;\n    }\n\n    node.parent = parent;\n    this.lastNode = null;\n  };\n\n  return DomHandler;\n}();\n\nexports.DomHandler = DomHandler;\nexports.default = DomHandler;","map":{"version":3,"sources":["/usr/local/google/home/freinartz/repos/src/github.com/GoogleCloudPlatform/prometheus-clean/web/ui/react-app/node_modules/domhandler/lib/index.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","prototype","hasOwnProperty","call","value","DomHandler","domelementtype_1","require","node_1","reWhitespace","defaultOpts","normalizeWhitespace","withStartIndices","withEndIndices","callback","options","elementCB","dom","root","Document","done","tagStack","lastNode","parser","onparserinit","onreset","_a","onend","handleCallback","onerror","error","onclosetag","elem","pop","endIndex","onopentag","name","attribs","type","xmlMode","ElementType","Tag","element","Element","addNode","push","ontext","data","Text","replace","node","oncomment","Comment","oncommentend","oncdatastart","text","NodeWithChildren","CDATA","parent","oncdataend","onprocessinginstruction","ProcessingInstruction","length","previousSibling","children","startIndex","prev","next","default"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DomHandler = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\nvar node_1 = require(\"./node\");\n__exportStar(require(\"./node\"), exports);\nvar reWhitespace = /\\s+/g;\n// Default options\nvar defaultOpts = {\n    normalizeWhitespace: false,\n    withStartIndices: false,\n    withEndIndices: false,\n};\nvar DomHandler = /** @class */ (function () {\n    /**\n     * @param callback Called once parsing has completed.\n     * @param options Settings for the handler.\n     * @param elementCB Callback whenever a tag is closed.\n     */\n    function DomHandler(callback, options, elementCB) {\n        /** The elements of the DOM */\n        this.dom = [];\n        /** The root element for the DOM */\n        this.root = new node_1.Document(this.dom);\n        /** Indicated whether parsing has been completed. */\n        this.done = false;\n        /** Stack of open tags. */\n        this.tagStack = [this.root];\n        /** A data node that is still being written to. */\n        this.lastNode = null;\n        /** Reference to the parser instance. Used for location information. */\n        this.parser = null;\n        // Make it possible to skip arguments, for backwards-compatibility\n        if (typeof options === \"function\") {\n            elementCB = options;\n            options = defaultOpts;\n        }\n        if (typeof callback === \"object\") {\n            options = callback;\n            callback = undefined;\n        }\n        this.callback = callback !== null && callback !== void 0 ? callback : null;\n        this.options = options !== null && options !== void 0 ? options : defaultOpts;\n        this.elementCB = elementCB !== null && elementCB !== void 0 ? elementCB : null;\n    }\n    DomHandler.prototype.onparserinit = function (parser) {\n        this.parser = parser;\n    };\n    // Resets the handler back to starting state\n    DomHandler.prototype.onreset = function () {\n        var _a;\n        this.dom = [];\n        this.root = new node_1.Document(this.dom);\n        this.done = false;\n        this.tagStack = [this.root];\n        this.lastNode = null;\n        this.parser = (_a = this.parser) !== null && _a !== void 0 ? _a : null;\n    };\n    // Signals the handler that parsing is done\n    DomHandler.prototype.onend = function () {\n        if (this.done)\n            return;\n        this.done = true;\n        this.parser = null;\n        this.handleCallback(null);\n    };\n    DomHandler.prototype.onerror = function (error) {\n        this.handleCallback(error);\n    };\n    DomHandler.prototype.onclosetag = function () {\n        this.lastNode = null;\n        var elem = this.tagStack.pop();\n        if (this.options.withEndIndices) {\n            elem.endIndex = this.parser.endIndex;\n        }\n        if (this.elementCB)\n            this.elementCB(elem);\n    };\n    DomHandler.prototype.onopentag = function (name, attribs) {\n        var type = this.options.xmlMode ? domelementtype_1.ElementType.Tag : undefined;\n        var element = new node_1.Element(name, attribs, undefined, type);\n        this.addNode(element);\n        this.tagStack.push(element);\n    };\n    DomHandler.prototype.ontext = function (data) {\n        var normalizeWhitespace = this.options.normalizeWhitespace;\n        var lastNode = this.lastNode;\n        if (lastNode && lastNode.type === domelementtype_1.ElementType.Text) {\n            if (normalizeWhitespace) {\n                lastNode.data = (lastNode.data + data).replace(reWhitespace, \" \");\n            }\n            else {\n                lastNode.data += data;\n            }\n        }\n        else {\n            if (normalizeWhitespace) {\n                data = data.replace(reWhitespace, \" \");\n            }\n            var node = new node_1.Text(data);\n            this.addNode(node);\n            this.lastNode = node;\n        }\n    };\n    DomHandler.prototype.oncomment = function (data) {\n        if (this.lastNode && this.lastNode.type === domelementtype_1.ElementType.Comment) {\n            this.lastNode.data += data;\n            return;\n        }\n        var node = new node_1.Comment(data);\n        this.addNode(node);\n        this.lastNode = node;\n    };\n    DomHandler.prototype.oncommentend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.oncdatastart = function () {\n        var text = new node_1.Text(\"\");\n        var node = new node_1.NodeWithChildren(domelementtype_1.ElementType.CDATA, [text]);\n        this.addNode(node);\n        text.parent = node;\n        this.lastNode = text;\n    };\n    DomHandler.prototype.oncdataend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.onprocessinginstruction = function (name, data) {\n        var node = new node_1.ProcessingInstruction(name, data);\n        this.addNode(node);\n    };\n    DomHandler.prototype.handleCallback = function (error) {\n        if (typeof this.callback === \"function\") {\n            this.callback(error, this.dom);\n        }\n        else if (error) {\n            throw error;\n        }\n    };\n    DomHandler.prototype.addNode = function (node) {\n        var parent = this.tagStack[this.tagStack.length - 1];\n        var previousSibling = parent.children[parent.children.length - 1];\n        if (this.options.withStartIndices) {\n            node.startIndex = this.parser.startIndex;\n        }\n        if (this.options.withEndIndices) {\n            node.endIndex = this.parser.endIndex;\n        }\n        parent.children.push(node);\n        if (previousSibling) {\n            node.prev = previousSibling;\n            previousSibling.next = node;\n        }\n        node.parent = parent;\n        this.lastNode = null;\n    };\n    return DomHandler;\n}());\nexports.DomHandler = DomHandler;\nexports.default = DomHandler;\n"]},"metadata":{},"sourceType":"script"}